(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{qVXu:function(t,e,i){"use strict";i.r(e),i.d(e,"InventaireModule",(function(){return Yn}));var n=i("ofXK"),c=i("tyNb"),a=i("o69J"),o=i("+/Pe"),r=i("mrSG"),s=i("FtGj"),l=i("jiEm"),d=i("hFwF"),u=i("gaWP"),b=i("/8Pk"),m=i("3Pt+"),p=i("PSD3"),h=i.n(p),g=i("EUZL"),f=i("fXoL"),v=i("dNgK"),E=i("kmnG"),x=i("qFsG"),Z=i("NFeN"),I=i("bTqV"),C=i("A5z7");const S=["fruitInput"],O=["closeLocaliteModal"],y=["closeSubdivision"],w=["formDirective1"],k=["formDirective2"],L=["formDirective3"];function M(t,e){if(1&t&&(f.ac(0,"h2",50),f.Yc(1),f.Zb()),2&t){const t=f.qc();f.Eb(1),f.Zc(t.subdivisions[0])}}function P(t,e){1&t&&(f.ac(0,"h2",50),f.Yc(1,"Localit\xe9s"),f.Zb())}function q(t,e){if(1&t){const t=f.bc();f.ac(0,"button",51,52),f.mc("click",(function(){return f.Oc(t),f.qc().initForm()}))("click",(function(){return f.Oc(t),f.qc().update=!1})),f.ac(2,"mat-icon"),f.Yc(3,"add"),f.Zb(),f.Zb()}}function F(t,e){if(1&t&&(f.ac(0,"button",53),f.ac(1,"mat-icon"),f.Yc(2,"add"),f.Zb(),f.Zb()),2&t){const t=f.qc();f.xc("title",t.titleAdd)}}const D=function(t){return{"btn-add-sub":t}};function R(t,e){if(1&t){const t=f.bc();f.ac(0,"button",54,55),f.mc("click",(function(){return f.Oc(t),f.qc().initSub()})),f.ac(2,"mat-icon"),f.Yc(3,"reorder"),f.Zb(),f.Zb()}if(2&t){const t=f.qc();f.xc("ngClass",f.Bc(1,D,!t.securityServ.superviseurGene))}}function N(t,e){if(1&t){const t=f.bc();f.ac(0,"button",56),f.ac(1,"mat-icon",57),f.mc("click",(function(){return f.Oc(t),f.Kc(4).click()})),f.Yc(2," cloud_upload "),f.Zb(),f.ac(3,"input",58,59),f.mc("change",(function(e){return f.Oc(t),f.qc().getAllLocalite(e)})),f.Zb(),f.Zb()}}function Y(t,e){if(1&t){const t=f.bc();f.ac(0,"img",65),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().openFirst(e.id)})),f.Zb()}if(2&t){const t=f.qc().$implicit;f.xc("title",t.nom)}}function A(t,e){if(1&t){const t=f.bc();f.ac(0,"img",66),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().openFirst(e.id)})),f.Zb()}if(2&t){const t=f.qc().$implicit;f.xc("title",t.nom)}}function T(t,e){if(1&t&&f.Vb(0,"img",67),2&t){const t=f.qc().$implicit;f.xc("title",t.nom)}}const V=function(t,e){return{left:t,top:e,width:"10%"}};function _(t,e){if(1&t){const t=f.bc();f.ac(0,"div",60),f.ac(1,"span",61),f.mc("click",(function(){f.Oc(t);const i=e.$implicit;return f.qc().idCurrentLocal=i.id})),f.Yc(2),f.Zb(),f.Wc(3,Y,1,1,"img",62),f.Wc(4,A,1,1,"img",63),f.Wc(5,T,1,1,"img",64),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc();f.xc("ngStyle",f.Cc(5,V,t.position[0],t.position[1])),f.Eb(2),f.Zc(i.longText(t.nom,11)),f.Eb(1),f.xc("ngIf",i.idCurrentLocal!=t.id&&!t.rattacher),f.Eb(1),f.xc("ngIf",i.idCurrentLocal!=t.id&&t.rattacher),f.Eb(1),f.xc("ngIf",i.idCurrentLocal==t.id)}}function W(t,e){if(1&t&&(f.ac(0,"h2",74),f.Yc(1),f.Zb()),2&t){const t=f.qc().$implicit,e=f.qc();var i;f.Eb(1),f.Zc(null==(i=e.getOnById(t))?null:i.nom)}}function U(t,e){if(1&t&&(f.ac(0,"h2",75),f.ac(1,"span",76),f.Yc(2,"Cr\xe9\xe9 par : "),f.Zb(),f.Yc(3),f.Zb()),2&t){const t=f.qc().$implicit,e=f.qc();var i;f.Eb(3),f.ad(" ",null==(i=e.getOnById(t))||null==i.createur?null:i.createur.nom," ")}}function B(t,e){if(1&t){const t=f.bc();f.ac(0,"li",77),f.ac(1,"button",78),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit,i=f.qc();return i.deleteLoc(i.getOnById(e))})),f.ac(2,"mat-icon"),f.Yc(3,"delete"),f.Zb(),f.Zb(),f.Zb()}}function z(t,e){if(1&t){const t=f.bc();f.ac(0,"li",8),f.ac(1,"button",79),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit,i=f.qc();return i.updateL(i.getOnById(e))}))("click",(function(){return f.Oc(t),f.qc(2),f.Kc(20).click()})),f.ac(2,"mat-icon"),f.Yc(3,"edit"),f.Zb(),f.Zb(),f.Zb()}}function G(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-icon",92),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc(3).updateL(e)}))("click",(function(){return f.Oc(t),f.qc(4),f.Kc(20).click()})),f.Yc(1,"edit"),f.Zb()}}function $(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-icon",93),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc(3).deleteLoc(e)})),f.Yc(1,"delete"),f.Zb()}}const j=function(t,e){return{"col-8":t,"col-11":e}},K=function(t,e){return{"col-4":t,"col-1":e}};function H(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-chip",86),f.ac(1,"span",87),f.Yc(2),f.Zb(),f.ac(3,"span",88),f.ac(4,"mat-icon",89),f.mc("click",(function(i){f.Oc(t);const n=e.$implicit,c=f.qc(2).index;return f.qc().openOther(i,c+1,n.id)})),f.Yc(5,"playlist_add"),f.Zb(),f.Wc(6,G,2,0,"mat-icon",90),f.Wc(7,$,2,0,"mat-icon",91),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc(2).index,n=f.qc();f.Ib("chip-localite-",i+1,""),f.xc("selectable",n.selectable)("removable",!1),f.Eb(1),f.xc("ngClass",f.Cc(11,j,!n.securityServ.superviseurGene,n.securityServ.superviseurGene))("title",t.nom),f.Eb(1),f.Zc(n.longText(t.nom,20)),f.Eb(1),f.xc("ngClass",f.Cc(14,K,!n.securityServ.superviseurGene,n.securityServ.superviseurGene)),f.Eb(3),f.xc("ngIf",!n.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",!n.securityServ.superviseurGene)}}function J(t,e){if(1&t){const t=f.bc();f.ac(0,"input",94,95),f.mc("matChipInputTokenEnd",(function(e){f.Oc(t);const i=f.qc(2),n=i.$implicit,c=i.index;return f.qc().add(e,n,c+1)})),f.Zb()}if(2&t){f.qc();const t=f.Kc(2),e=f.qc().index,i=f.qc();f.xc("placeholder",i.subdivisions[e+1])("matChipInputFor",t)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)}}function X(t,e){if(1&t){const t=f.bc();f.ac(0,"input",96,95),f.mc("matChipInputTokenEnd",(function(e){f.Oc(t);const i=f.qc(2),n=i.$implicit,c=i.index;return f.qc().add(e,n,c+1)})),f.Zb()}if(2&t){f.qc();const t=f.Kc(2),e=f.qc().index,i=f.qc();f.xc("placeholder",i.subdivisions[e+1])("formControl",i.fruitCtrl)("matChipInputFor",t)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)}}function Q(t,e){if(1&t&&(f.ac(0,"mat-form-field",80),f.ac(1,"mat-chip-list",81,82),f.Wc(3,H,8,17,"mat-chip",83),f.Wc(4,J,2,3,"input",84),f.Wc(5,X,2,4,"input",85),f.Zb(),f.Zb()),2&t){const t=f.qc().$implicit,e=f.qc();f.Eb(3),f.xc("ngForOf",e.getCurrentSubById(t)),f.Eb(1),f.xc("ngIf",e.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",!e.securityServ.superviseurGene)}}function tt(t,e){1&t&&(f.ac(0,"p"),f.Yc(1,"Veuillez ajouter une nouvelle subdivision"),f.Zb())}function et(t,e){if(1&t&&(f.ac(0,"div",68),f.ac(1,"div",5),f.ac(2,"div",2),f.Wc(3,W,2,1,"h2",69),f.ac(4,"ul",7),f.Wc(5,U,4,1,"h2",70),f.Wc(6,B,4,0,"li",71),f.Wc(7,z,4,0,"li",72),f.Zb(),f.Zb(),f.Zb(),f.ac(8,"div",13),f.Wc(9,Q,6,3,"mat-form-field",73),f.Wc(10,tt,2,0,"p",38),f.Zb(),f.Zb()),2&t){const t=e.$implicit,i=e.index,n=f.qc();f.xc("hidden",!n.idCurrentLocal||!n.getOnById(t)),f.Eb(3),f.xc("ngIf",n.getOnById(t)),f.Eb(2),f.xc("ngIf",n.getOnById(t)&&0==i&&n.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",!n.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",!n.securityServ.superviseurGene),f.Eb(2),f.xc("ngIf",n.subdivisions&&n.subdivisions[i+1]),f.Eb(1),f.xc("ngIf",!n.subdivisions[i+1])}}function it(t,e){if(1&t&&(f.ac(0,"div",45),f.Yc(1),f.Zb()),2&t){const t=f.qc();f.Eb(1),f.Zc(t.subdivisions[0])}}function nt(t,e){1&t&&(f.ac(0,"div",45),f.Yc(1," Modification"),f.Zb())}function ct(t,e){1&t&&(f.ac(0,"mat-error"),f.Yc(1," Ce champ est requise "),f.Zb())}function at(t,e){1&t&&(f.ac(0,"mat-label"),f.Yc(1,"Nom de la subdivision"),f.Zb())}function ot(t,e){if(1&t&&(f.ac(0,"mat-label"),f.Yc(1),f.Zb()),2&t){const t=f.qc().index,e=f.qc();f.Eb(1),f.ad("Un(e) ",e.lowerCase(e.tabSubdivision.value[t-1])," peut contenir un(e) :")}}function rt(t,e){if(1&t){const t=f.bc();f.ac(0,"div",97),f.ac(1,"mat-form-field",98),f.Wc(2,at,2,0,"mat-label",38),f.Wc(3,ot,2,1,"mat-label",38),f.Vb(4,"input",99),f.ac(5,"mat-icon",37),f.Yc(6,"room"),f.Zb(),f.Zb(),f.ac(7,"mat-icon",100),f.mc("click",(function(){return f.Oc(t),f.qc().addSubdivision()})),f.Yc(8,"add_circle_outline"),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(2),f.xc("ngIf",0==i),f.Eb(1),f.xc("ngIf",i>0),f.Eb(1),f.xc("formControl",t),f.Eb(3),f.xc("hidden",i!=n.tabSubdivision.controls.length-1||!t.value)}}const st=function(t){return{background:t}};let lt=(()=>{class t{constructor(t,e,i,n,c,a,o,r){this.adminServ=t,this.inventaireServ=e,this.fb=i,this._snackBar=n,this.sharedService=c,this.securityServ=a,this.route=o,this.router=r,this.isValableFileLocalite=!0,this.localiteFile=[],this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[s.g,s.c],this.fruitCtrl=new m.f,this.fruits=["Bureau 1","Bureau 2","Bureau 3","Bureau 4","Bureau 5","Bureau 6","Bureau 8","Bureau 9","Bureau X","Bureau Y","Bureau Z"],this.anelOpenState=!1,this.step=2,this.entreprises=[],this.idCurrentEse="",this.idCurrentLocal=0,this.idCurrentZ=0,this.currentLocal=null,this.localites=[],this.allLoc=[],this.tabSubdivision=new m.d([]),this.subdivisions=[],this.tabOpen=[],this.update=!1,this.currentImage="map3.jpeg",this.myId="",this.titleAdd="",this.idToOpen=0,this.availableColors=[{name:"Primary",color:"primary"},{name:"Accent",color:"accent"},{name:"Warn",color:"warn"}],this.data=[],this.titleAdd=this.securityServ.superviseurAdjoint?"Demandez au superviseur g\xe9n\xe9ral d'ajouter une subdivision":"Ajouter une subdivision"}ngOnInit(){this.myId=localStorage.getItem("idUser"),this.carrousel(),this.securityServ.showLoadingIndicatior.next(!0),this.initForm(),this.idCurrentEse=localStorage.getItem("currentEse"),this.getOneEntreprise(),this.addSubdivision("Localit\xe9"),this.route.snapshot.params.id&&(this.idToOpen=this.sharedService.decodId(+this.route.snapshot.params.id)),this.sameComponent()}sameComponent(){this.router.events.subscribe(t=>{t instanceof c.b&&this.route.snapshot.params.id&&(this.idToOpen=this.sharedService.decodId(+this.route.snapshot.params.id),this.getOneEntreprise())})}initForm(t={id:0,nom:"",position:[]}){this.formDirective1&&this.formDirective1.resetForm(),this.localiteForm=this.fb.group({id:[t.id],nom:[t.nom,[m.x.required]],position:[t.position],level:[]})}getOneEntreprise(){this.adminServ.getOneEntreprise(this.idCurrentEse).then(t=>{var e,i;this.allLoc=t.localites,this.localites=t.localites,this.idToOpen&&(this.securityServ.superviseurGene||this.securityServ.superviseur||this.securityServ.superviseurAdjoint&&this.allLoc.find(t=>{var e;return t.id==this.idToOpen&&(null===(e=t.createur)||void 0===e?void 0:e.id)==this.myId}))&&this.openOneById(this.idToOpen),this.securityServ.superviseurAdjoint&&(this.localites=this.allLoc.filter(t=>{var e;return(null===(e=t.createur)||void 0===e?void 0:e.id)==this.myId})),this.subdivisions=t.subdivisions,0==(null===(e=this.tabOpen)||void 0===e?void 0:e.length)&&(null===(i=this.subdivisions)||void 0===i||i.forEach(t=>this.tabOpen.push(0))),this.securityServ.showLoadingIndicatior.next(!1)},t=>{console.log(t)})}addLocalite(t){const e=this.allLoc.filter(t=>{var e;return(null===(e=t.position)||void 0===e?void 0:e.length)>0}),i=this.firstSubNameExiste(this.allLoc,t.value);if(e.length<=45&&!i)this.saveValideLoc(t);else if(i){const e=this.firstSubNameExiste(this.localites,t.value);let i="";this.securityServ.superviseurAdjoint&&!e&&(i=", veuillez contacter le superviseur g\xe9n\xe9ral"),this.showNotification("bg-info",t.value.nom+" existe d\xe9ja"+i+".","bottom","center",5e3)}else h.a.fire({title:"",text:"Vous avez atteint le nombre limite de localit\xe9.",icon:"info"})}saveValideLoc(t){let e=t.value;e.entreprise="/api/entreprises/"+this.idCurrentEse,0==e.id&&(e.createur="/api/users/"+this.myId),e.position&&0==e.position.length&&(e.position=this.getPosition()),this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite(e).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.closeLocaliteModal.nativeElement.click(),0==e.id?this.localites.push(t):this.getOneEntreprise()},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}addSub(t,e,i){let n={nom:t,entreprise:"/api/entreprises/"+this.idCurrentEse,parent:"/api/localites/"+e,level:i,createur:"/api/users/"+this.myId};this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite(n).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.closeLocaliteModal.nativeElement.click(),this.getOneEntreprise()},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}updateOne(t){const e=t.value;this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite({id:e.id,nom:e.nom}).then(t=>{this.update=!1,this.securityServ.showLoadingIndicatior.next(!1),this.closeLocaliteModal.nativeElement.click(),this.getOneEntreprise()},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}onSubmit(t){this.update?this.updateOne(t):(t.controls.level.setValue(0),this.addLocalite(t))}firstSubNameExiste(t,e){const i=e.nom.trim();return null!=t.find(t=>{var n,c;return(null===(n=t.nom)||void 0===n?void 0:n.toLowerCase())==(null==i?void 0:i.toLowerCase())&&t.id!=e.id&&((null===(c=t.position)||void 0===c?void 0:c.length)>0||0==e.id)})}rev(t){let e=[];return t&&t.length>0&&(e=t,this.sharedService.trier(e,"id",-1)),e}add(t,e,i){const n=t.input,c=t.value,a=this.localites.find(t=>{var i,n;return(null===(i=t.nom)||void 0===i?void 0:i.toLowerCase())==(null===(n=c.trim())||void 0===n?void 0:n.toLowerCase())&&t.idParent==e});if((c||"").trim()&&!a)c.trim()&&this.addSub(c,e,i);else if(a)return void this.showNotification("bg-info",c.trim()+" existe d\xe9ja.","bottom","center",5e3);n&&(n.value=""),this.fruitCtrl.setValue(null)}deleteLoc(t){t.rattacher?this.showNotification("bg-danger","Impossible de supprimer cet \xe9l\xe9ment car il contient des subdivisions.","bottom","center",5e3):t.linkToUser?this.showNotification("bg-danger","Impossible de supprimer cet \xe9l\xe9ment car des personnes y sont affect\xe9es.","bottom","center",5e3):t.linkToUser||t.rattacher||this.supLocPossible(t)}supLocPossible(t){h.a.fire({title:"Confirmation",text:"Voulez-vous confirmer la suppression de cet \xe9l\xe9ment ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then(e=>{e.value&&(this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.deleteLoc(t.id).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.getOneEntreprise()},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)}))})}showNotification(t,e,i,n,c=2e3){this._snackBar.open(e,"",{duration:c,verticalPosition:i,horizontalPosition:n,panelClass:[t,"color-white"]})}longText(t,e){return this.sharedService.longText(t,e)}getPosition(){let t=!1,e=2,i=2;do{t=!1,e=Math.floor(94*Math.random())+2,i=Math.floor(83*Math.random())+2,this.allLoc.forEach(n=>{if(n.position&&n.position.length>0){const c=this.getValPourcentage(n.position[0]),a=this.getValPourcentage(n.position[1]);(c==e&&a==i||e>=c-6&&e<=c+6&&i>=a-16&&i<=a+16)&&(t=!0)}})}while(t);return[e+"%",i+"%"]}getValPourcentage(t){return parseInt(t.replace("%",""))}carrousel(){const t=["map4.jpg","map2.jpeg","map3.jpeg"];let e=0;window.setInterval(()=>{e>=t.length&&(e=0),this.currentImage=t[e],e++},5e3)}addSubdivision(t=""){this.tabSubdivision.push(new m.f(t))}lowerCase(t){return t.toLowerCase()}capitalize(t){return this.sharedService.capitalize(t)}capitalizeAll(t){let e=[];return t.forEach(t=>{t.trim()&&e.push(this.capitalize(t))}),e}oneSaveSubdiv(){let t={id:this.idCurrentEse,subdivisions:this.capitalizeAll(this.tabSubdivision.value)};this.adminServ.addEntreprise(t).then(t=>{this.subdivisions=t.subdivisions,this.closeSubdivision.nativeElement.click(),this.showNotification("bg-success","Enregistr\xe9","top","center")},t=>this.showNotification("bg-danger",t,"top","center"))}initSub(){var t;this.tabSubdivision=new m.d([]),null===(t=this.subdivisions)||void 0===t||t.forEach(t=>this.addSubdivision(t)),this.subdivisions&&0!=this.subdivisions.length||this.addSubdivision("Localit\xe9")}firstSub(t){return null==t?void 0:t.filter(t=>{var e;return(null===(e=t.position)||void 0===e?void 0:e.length)>0})}getCurrentSubById(t){var e;return(null===(e=this.getOnById(t))||void 0===e?void 0:e.subdivisions)||[]}getOnById(t){var e;return(null===(e=this.localites)||void 0===e?void 0:e.find(e=>e.id==t))||null}openFirst(t){this.idCurrentLocal=t,this.tabOpen[0]=t,this.offUnderSub(1)}openOther(t,e,i){this.tabOpen[e]=i,this.offUnderSub(e+1),document.querySelectorAll(".chip-localite-"+e).forEach(t=>{t.classList.remove("active")}),t.target.closest(".chip-localite-"+e).classList.add("active")}offUnderSub(t){for(let e=t;e<this.tabOpen.length;e++)this.tabOpen[e]&&(this.tabOpen[e]=0)}updateL(t){this.update=!0,this.initForm(t)}openOneById(t){this.tabOpen.push(t),this.tabOpen=[];let e=null,i=this.allLoc.find(e=>e.id==t);do{e&&this.tabOpen.push(e),e=i?i.idParent:null,i=this.allLoc.find(t=>t.id==e)}while(e);this.tabOpen.sort((function(t,e){return t-e})),this.idCurrentLocal=this.tabOpen[0]}getAllLocalite(t){const e=t.target;if(1!==e.files.length)throw new Error("Cannot use multiple files");const i=new FileReader;i.onload=t=>{var e,i;return Object(r.b)(this,void 0,void 0,(function*(){const n=g.read(t.target.result,{type:"binary"}),c=n.Sheets[n.SheetNames[0]];this.data=yield g.utils.sheet_to_json(c,{header:1,raw:!1}),console.log(this.data);for(let t=1;t<this.data.length;t++)this.localiteFile.push(this.data[t]);for(let t=0;t<this.localiteFile.length;t++)this.localiteFile[t].length>this.subdivisions.length&&(this.isValableFileLocalite=!1);if(this.isValableFileLocalite){let t=1;try{for(var a,o=Object(r.a)(this.localiteFile);!(a=yield o.next()).done;){t++;const e=a.value;let i=0;for(let t=0;t<e.length;t++){const n=e[t];0==t?yield this.inventaireServ.addLocalite({nom:n,entreprise:"/api/entreprises/"+this.idCurrentEse,createur:"/api/users/"+this.myId,level:t,position:this.getPosition()}).then(t=>{i=t.id,this.securityServ.showLoadingIndicatior.next(!0),console.log(t)}):yield this.inventaireServ.addLocalite({nom:n,entreprise:"/api/entreprises/"+this.idCurrentEse,createur:"/api/users/"+this.myId,level:t,parent:"/api/localites/"+i}).then(t=>{i=t.id,this.securityServ.showLoadingIndicatior.next(!0),console.log(t)})}}}catch(s){e={error:s}}finally{try{a&&!a.done&&(i=o.return)&&(yield i.call(o))}finally{if(e)throw e.error}}this.getOneEntreprise(),this.securityServ.showLoadingIndicatior.next(!1)}else this.showNotification("bg-red","Fichier uploader pa bon","top","center")}))},i.readAsBinaryString(e.files[0])}verfiIfDeuxLocIsSame(t,e){return t==e}isLastChilTab(t,e){for(let i=0;i<t.length-1;i++)if(e[i]!=t[i])return i;return 100}}return t.\u0275fac=function(e){return new(e||t)(f.Ub(l.a),f.Ub(d.a),f.Ub(m.e),f.Ub(v.a),f.Ub(u.a),f.Ub(b.a),f.Ub(c.a),f.Ub(c.d))},t.\u0275cmp=f.Ob({type:t,selectors:[["app-zonage"]],viewQuery:function(t,e){var i;1&t&&(f.Uc(S,!0),f.dd(O,!0),f.dd(y,!0),f.dd(w,!0),f.dd(k,!0),f.dd(L,!0)),2&t&&(f.Jc(i=f.nc())&&(e.fruitInput=i.first),f.Jc(i=f.nc())&&(e.closeLocaliteModal=i.first),f.Jc(i=f.nc())&&(e.closeSubdivision=i.first),f.Jc(i=f.nc())&&(e.formDirective1=i.first),f.Jc(i=f.nc())&&(e.formDirective2=i.first),f.Jc(i=f.nc())&&(e.formDirective3=i.first))},decls:77,vars:17,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"border-bottom","1px solid #00000021"],["class","col-xl-3 col-lg-3 col-md-3 col-sm-3 pb-0 pt-2 bolder",4,"ngIf"],[1,"header-dropdown","m-r--5"],[1,"dropdown"],["class","addInv","data-toggle","modal","data-target","#localiteModal","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter","color","primary","aria-label","Example icon-button with a heart icon",3,"click",4,"ngIf"],["class","addInv","mat-mini-fab","","disabled","","color","primary","aria-label","Example icon-button with a heart icon",3,"title",4,"ngIf"],["class","addInv","data-toggle","modal","data-target","#Subdivision","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter une subdivision","color","primary","aria-label","Example icon-button with a heart icon",3,"ngClass","click",4,"ngIf"],["mat-mini-fab","","class","addLocaliteExcel","style","color: brown;",4,"ngIf"],[1,"body"],[1,"map-localite","mb-2",3,"ngStyle"],["class","pointer-localite pointer",3,"ngStyle",4,"ngFor","ngForOf"],["class","card mb-5 pb-3",3,"hidden",4,"ngFor","ngForOf"],["data-toggle","modal","hidden","","data-target","#localiteModal","data-backdrop","static","data-keyboard","false"],["openLocM",""],["id","localiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-keyboard","false",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"formGroup","ngSubmit"],["formDirective1","ngForm"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],[1,"modal-about"],["class","font-weight-bold p-t-10 font-17",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeLocaliteModal",""],[1,"material-icons"],[1,"modal-body"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","pb-0"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nom"],["matSuffix",""],[4,"ngIf"],[1,"modal-footer","pr-0","pt-0"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger","btn-border-radius","mr-0"],["id","Subdivision","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-keyboard","false",1,"modal","fade"],[1,"modal-content"],[1,"font-weight-bold","p-t-10","font-17"],["closeSubdivision",""],["class","col-xl-12 col-lg-12 col-md-12 col-sm-12 pb-0 pr-0",4,"ngFor","ngForOf"],[1,"modal-footer","pr-4","pt-0"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"click"],[1,"col-xl-3","col-lg-3","col-md-3","col-sm-3","pb-0","pt-2","bolder"],["data-toggle","modal","data-target","#localiteModal","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],["openF",""],["mat-mini-fab","","disabled","","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"title"],["data-toggle","modal","data-target","#Subdivision","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter une subdivision","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"ngClass","click"],["subd",""],["mat-mini-fab","",1,"addLocaliteExcel",2,"color","brown"],[2,"color","white",3,"click"],["type","file","hidden","",3,"change"],["openFileUload",""],[1,"pointer-localite","pointer",3,"ngStyle"],[1,"pl-1",3,"click"],["src","assets/images/image-gallery/pointer.png","style","width:50%;",3,"title","click",4,"ngIf"],["src","assets/images/image-gallery/pointer4.png","style","width:40%;",3,"title","click",4,"ngIf"],["src","assets/images/image-gallery/pointer2.png","style","width:50%;",3,"title",4,"ngIf"],["src","assets/images/image-gallery/pointer.png",2,"width","50%",3,"title","click"],["src","assets/images/image-gallery/pointer4.png",2,"width","40%",3,"title","click"],["src","assets/images/image-gallery/pointer2.png",2,"width","50%",3,"title"],[1,"card","mb-5","pb-3",3,"hidden"],["class","col-xl-5 col-lg-5 col-md-5 col-sm-5 pb-0 pt-2 bolder",4,"ngIf"],["class","pb-0 pt-1 pr-3",4,"ngIf"],["class","dropdown","style","left: -50px;",4,"ngIf"],["class","dropdown",4,"ngIf"],["class","example-chip-list example-full-width zonage",4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-5","col-sm-5","pb-0","pt-2","bolder"],[1,"pb-0","pt-1","pr-3"],[1,"bolder"],[1,"dropdown",2,"left","-50px"],["mat-mini-fab","","title","Supprimer","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],["mat-mini-fab","","title","Modifier","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],[1,"example-chip-list","example-full-width","zonage"],["aria-label","Sous-zones"],["chipList",""],["class","w-25 row pt-1 color-chips","style","min-width: 275px;",3,"selectable","class","removable",4,"ngFor","ngForOf"],["disabled","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd",4,"ngIf"],[3,"placeholder","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd",4,"ngIf"],[1,"w-25","row","pt-1","color-chips",2,"min-width","275px",3,"selectable","removable"],[1,"p-0","pl-1",3,"ngClass","title"],[1,"p-0",3,"ngClass"],["title","Afficher",1,"edit-sousZ","pointer","text-secondary",3,"click"],["class","ml-2 edit-sousZ pointer text-secondary","title","Modifier",3,"click",4,"ngIf"],["matChipRemove","","class","ml-0","title","Supprimer",3,"click",4,"ngIf"],["title","Modifier",1,"ml-2","edit-sousZ","pointer","text-secondary",3,"click"],["matChipRemove","","title","Supprimer",1,"ml-0",3,"click"],["disabled","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["fruitInput",""],[3,"placeholder","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","pb-0","pr-0"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],["matInput","",3,"formControl"],["matSuffix","","title","Ajouter un membre",1,"pointer",3,"hidden","click"]],template:function(t,e){1&t&&(f.ac(0,"section",0),f.ac(1,"div",1),f.ac(2,"div",2),f.ac(3,"div",3),f.ac(4,"div",4),f.ac(5,"div",5),f.ac(6,"div",2),f.Wc(7,M,2,1,"h2",6),f.Wc(8,P,2,0,"h2",6),f.ac(9,"ul",7),f.ac(10,"li",8),f.Wc(11,q,4,0,"button",9),f.Wc(12,F,3,1,"button",10),f.Wc(13,R,4,3,"button",11),f.Wc(14,N,5,0,"button",12),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(15,"div",13),f.ac(16,"div",14),f.Wc(17,_,6,8,"div",15),f.Zb(),f.Zb(),f.Zb(),f.Wc(18,et,11,7,"div",16),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Vb(19,"em",17,18),f.ac(21,"div",19),f.ac(22,"div",20),f.ac(23,"form",21,22),f.mc("ngSubmit",(function(){return e.onSubmit(e.localiteForm)})),f.ac(25,"div",23),f.ac(26,"div",24),f.ac(27,"div",25),f.ac(28,"div",26),f.Wc(29,it,2,1,"div",27),f.Wc(30,nt,2,0,"div",27),f.Zb(),f.Zb(),f.Zb(),f.ac(31,"button",28,29),f.ac(33,"i",30),f.Yc(34,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(35,"div",31),f.ac(36,"div"),f.ac(37,"div",2),f.ac(38,"div",32),f.Vb(39,"input",33),f.Zb(),f.ac(40,"div",34),f.ac(41,"mat-form-field",35),f.ac(42,"mat-label"),f.Yc(43,"Nom"),f.Zb(),f.Vb(44,"input",36),f.ac(45,"mat-icon",37),f.Yc(46,"room"),f.Zb(),f.Wc(47,ct,2,0,"mat-error",38),f.Zb(),f.Zb(),f.Zb(),f.ac(48,"div",39),f.ac(49,"div",40),f.ac(50,"button",41),f.Yc(51,"Enregistrer"),f.Zb(),f.ac(52,"button",42),f.Yc(53,"Annuler"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(54,"div",43),f.ac(55,"div",20),f.ac(56,"form",44),f.ac(57,"div",23),f.ac(58,"div",24),f.ac(59,"div",25),f.ac(60,"div",26),f.ac(61,"div",45),f.Yc(62,"Subdivision"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(63,"button",28,46),f.ac(65,"i",30),f.Yc(66,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(67,"div",31),f.ac(68,"div"),f.ac(69,"div",2),f.Wc(70,rt,9,4,"div",47),f.Zb(),f.ac(71,"div",48),f.ac(72,"div",40),f.ac(73,"button",49),f.mc("click",(function(){return e.oneSaveSubdiv()})),f.Yc(74,"Enregistrer"),f.Zb(),f.ac(75,"button",42),f.Yc(76,"Annuler"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()),2&t&&(f.Eb(7),f.xc("ngIf",e.subdivisions&&e.subdivisions[0]),f.Eb(1),f.xc("ngIf",!e.subdivisions||0==e.subdivisions.length),f.Eb(3),f.xc("ngIf",e.subdivisions&&e.subdivisions.length>0&&!e.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",!e.subdivisions||0==e.subdivisions.length),f.Eb(1),f.xc("ngIf",e.securityServ.superviseur||e.securityServ.superviseurGene),f.Eb(1),f.xc("ngIf",e.securityServ.superviseur||e.securityServ.superviseurAdjoint),f.Eb(2),f.xc("ngStyle",f.Bc(15,st,"url(./assets/images/image-gallery/"+e.currentImage+") no-repeat center center")),f.Eb(1),f.xc("ngForOf",e.rev(e.firstSub(e.localites))),f.Eb(1),f.xc("ngForOf",e.tabOpen),f.Eb(5),f.xc("formGroup",e.localiteForm),f.Eb(6),f.xc("ngIf",e.subdivisions&&e.subdivisions[0]&&!e.update),f.Eb(1),f.xc("ngIf",e.update),f.Eb(17),f.xc("ngIf",e.localiteForm.get("nom").hasError("required")),f.Eb(3),f.xc("disabled",e.localiteForm.invalid),f.Eb(20),f.xc("ngForOf",e.tabSubdivision.controls))},directives:[n.n,n.o,n.m,m.z,m.p,m.j,m.b,m.o,m.h,E.c,E.g,x.b,Z.a,E.i,m.q,I.b,n.l,C.c,C.a,C.d,C.b,m.g,E.b],styles:[".icon-localite[_ngcontent-%COMP%]{font-size:13px;padding-top:.4em}.edit-sousZ[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.icone-loc[_ngcontent-%COMP%]{font-size:20px}.map-localite[_ngcontent-%COMP%]{height:400px;border:2px solid #8f9aa8;border-radius:0;position:relative}.pointer-localite[_ngcontent-%COMP%]{position:absolute}.pointer-localite[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inherit;color:#fff;font-weight:bolder}.addInv[_ngcontent-%COMP%]{position:absolute;top:-21px;left:-46px}.btn-add-sub[_ngcontent-%COMP%]{left:-150px}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.icon-opacity[_ngcontent-%COMP%]{opacity:.8}.addLocaliteExcel[_ngcontent-%COMP%]{position:absolute;top:-21px;left:-96px}.mat-chip.active[_ngcontent-%COMP%]{background-color:#ef7711;color:#fff;opacity:1}"]}),t})();var dt=i("lDzL"),ut=i("4veq"),bt=i("Kdsb"),mt=i("/1cH"),pt=i("FKr1"),ht=i("d3UM"),gt=i("7EHt"),ft=i("bSwM");const vt=["roleTemplate"],Et=["closeEditModal"],xt=["formDirective"];function Zt(t,e){if(1&t&&(f.ac(0,"option",69),f.Yc(1),f.Zb()),2&t){const t=e.$implicit;f.xc("value",t.id),f.Eb(1),f.Zc(t.denomination)}}function It(t,e){if(1&t){const t=f.bc();f.ac(0,"li",50),f.ac(1,"select",66),f.mc("ngModelChange",(function(e){return f.Oc(t),f.qc(2).idCurrentEse=e}))("change",(function(e){return f.Oc(t),f.qc(2).entiteChange(e.target.value)})),f.ac(2,"option",67),f.Yc(3,"Toutes les entit\xe9s"),f.Zb(),f.Wc(4,Zt,2,2,"option",68),f.Zb(),f.Zb()}if(2&t){const t=f.qc(2);f.Eb(1),f.xc("ngModel",t.idCurrentEse),f.Eb(3),f.xc("ngForOf",t.entreprises)}}function Ct(t,e){if(1&t){const t=f.bc();f.ac(0,"li"),f.ac(1,"div",70),f.ac(2,"button",71),f.mc("click",(function(){return f.Oc(t),f.Kc(6).click()})),f.ac(3,"mat-icon",72),f.Yc(4,"file_upload"),f.Zb(),f.Zb(),f.Zb(),f.ac(5,"input",73,74),f.mc("change",(function(e){return f.Oc(t),f.qc(2).getAllAgents(e)})),f.Zb(),f.Zb()}}function St(t,e){if(1&t){const t=f.bc();f.ac(0,"li"),f.ac(1,"div",70),f.ac(2,"button",75),f.mc("click",(function(){return f.Oc(t),f.qc(2).addRow()})),f.ac(3,"mat-icon",72),f.Yc(4,"add"),f.Zb(),f.Zb(),f.Zb(),f.Zb()}}function Ot(t,e){if(1&t&&(f.ac(0,"td",76),f.Vb(1,"img",77),f.Zb()),2&t){const t=e.value,i=f.qc(2);f.Eb(1),f.yc("src",i.imgLink+t,f.Rc)}}function yt(t,e){if(1&t&&(f.ac(0,"td",78),f.Yc(1),f.Zb()),2&t){const t=e.value,i=f.qc(2);f.xc("title",t),f.Eb(1),f.ad(" ",i.longText(t,20)," ")}}function wt(t,e){if(1&t&&(f.ac(0,"td",78),f.Yc(1),f.Zb()),2&t){const t=e.value,i=f.qc(2);f.xc("title",t),f.Eb(1),f.ad(" ",i.longText(t,20)," ")}}function kt(t,e){if(1&t&&(f.ac(0,"td",78),f.Yc(1),f.Zb()),2&t){const t=e.value,i=f.qc(2);f.xc("title",i.getRole(t)),f.Eb(1),f.ad(" ",i.longText(i.getRole(t),15)," ")}}function Lt(t,e){if(1&t&&(f.ac(0,"span",81),f.Yc(1),f.Zb()),2&t){const t=f.qc().value,e=f.qc(2);f.xc("title",t[0].denomination),f.Eb(1),f.Zc(e.longText(t[0].denomination,20))}}function Mt(t,e){if(1&t&&(f.ac(0,"option"),f.Yc(1),f.Zb()),2&t){const t=e.$implicit;f.Eb(1),f.Zc(t.denomination)}}function Pt(t,e){if(1&t&&(f.ac(0,"select",82),f.Wc(1,Mt,2,1,"option",83),f.Zb()),2&t){const t=f.qc().value;f.Eb(1),f.xc("ngForOf",t)}}function qt(t,e){if(1&t&&(f.ac(0,"span",81),f.Yc(1),f.Zb()),2&t){const t=f.qc().value,e=f.qc(2);var i;f.xc("title",t[0].denomination),f.Eb(1),f.Zc(null==(i=e.getEntrepriseById())?null:i.denomination)}}function Ft(t,e){if(1&t&&(f.ac(0,"td",76),f.Wc(1,Lt,2,2,"span",79),f.Wc(2,Pt,2,1,"select",80),f.Wc(3,qt,2,2,"span",79),f.Zb()),2&t){const t=e.value,i=f.qc(2);f.Eb(1),f.xc("ngIf",t&&1==t.length&&i.securityServ.admin),f.Eb(1),f.xc("ngIf",t&&t.length>1&&i.securityServ.admin),f.Eb(1),f.xc("ngIf",!i.securityServ.admin)}}function Dt(t,e){1&t&&(f.ac(0,"button",87),f.ac(1,"i",13),f.Yc(2,"room"),f.Zb(),f.Zb())}function Rt(t,e){if(1&t){const t=f.bc();f.ac(0,"span"),f.ac(1,"button",85),f.mc("click",(function(){f.Oc(t);const i=e.row;return f.qc(3).showDetails(i)})),f.ac(2,"i",13),f.Yc(3,"remove_red_eye"),f.Zb(),f.Zb(),f.Wc(4,Dt,3,0,"button",86),f.Zb()}if(2&t){const t=e.row;f.Eb(4),f.xc("ngIf",(null==t.localites?null:t.localites.length)>0)}}function Nt(t,e){1&t&&(f.ac(0,"ngx-datatable-column",84),f.Wc(1,Rt,5,1,"ng-template",59),f.Zb()),2&t&&f.xc("width",80)}function Yt(t,e){1&t&&(f.ac(0,"i",13),f.Yc(1,"lock_open"),f.Zb())}function At(t,e){1&t&&(f.ac(0,"i",13),f.Yc(1,"lock_outline"),f.Zb())}const Tt=function(t,e){return{"text-success":t,"text-danger":e}};function Vt(t,e){if(1&t){const t=f.bc();f.ac(0,"span"),f.ac(1,"button",85),f.mc("click",(function(){f.Oc(t);const i=e.row;return f.qc(3).showDetails(i)})),f.ac(2,"i",13),f.Yc(3,"remove_red_eye"),f.Zb(),f.Zb(),f.ac(4,"button",88),f.mc("click",(function(){f.Oc(t);const i=e.row;return f.qc(3).updateUser(i)})),f.ac(5,"i",13),f.Yc(6,"mode_edit"),f.Zb(),f.Zb(),f.ac(7,"button",89),f.mc("click",(function(){f.Oc(t);const i=e.row;return f.qc(3).backupPwd(i)})),f.ac(8,"i",13),f.Yc(9,"refresh"),f.Zb(),f.Zb(),f.ac(10,"button",90),f.mc("click",(function(){f.Oc(t);const i=e.row;return f.qc(3).lockRow(i)})),f.Wc(11,Yt,2,0,"i",91),f.Wc(12,At,2,0,"i",91),f.Zb(),f.Zb()}if(2&t){const t=e.row;f.Eb(10),f.xc("ngClass",f.Cc(3,Tt,"actif"==t.status,"bloque"==t.status)),f.Eb(1),f.xc("ngIf","actif"==t.status),f.Eb(1),f.xc("ngIf","bloque"==t.status)}}function _t(t,e){1&t&&(f.ac(0,"ngx-datatable-column",84),f.Wc(1,Vt,13,6,"ng-template",59),f.Zb()),2&t&&f.xc("width",130)}function Wt(t,e){if(1&t&&(f.ac(0,"span"),f.Yc(1),f.Zb()),2&t){const t=f.qc().selectedCount,e=f.qc(2);f.Eb(1),f.bd(" ",t.toLocaleString()," ",e.selectedMessage," / ")}}function Ut(t,e){if(1&t){const t=f.bc();f.ac(0,"div",92),f.Wc(1,Wt,2,2,"span",25),f.Yc(2),f.Zb(),f.ac(3,"datatable-pager",93),f.mc("change",(function(e){return f.Oc(t),f.qc(),f.Kc(20).onFooterPage(e)}))("change",(function(e){return f.Oc(t),f.qc(2).look(e)})),f.Zb()}if(2&t){const t=e.rowCount,i=e.pageSize,n=e.curPage,c=f.qc(2);f.Eb(1),f.xc("ngIf",c.selectedMessage),f.Eb(1),f.bd(" ",c.totalMessage," ",t.toLocaleString()," "),f.Eb(1),f.xc("pagerLeftArrowIcon","datatable-icon-left")("pagerRightArrowIcon","datatable-icon-right")("pagerPreviousIcon","datatable-icon-prev")("pagerNextIcon","datatable-icon-skip")("page",n)("size",i)("count",t)("hidden",!(t/i>1))}}function Bt(t,e){if(1&t){const t=f.bc();f.ac(0,"section",41),f.ac(1,"div",42),f.ac(2,"div",43),f.ac(3,"div",44),f.ac(4,"div",45),f.ac(5,"div",46),f.ac(6,"div",28),f.ac(7,"div",47),f.ac(8,"div",48),f.ac(9,"ul",49),f.ac(10,"li",50),f.ac(11,"label",51),f.ac(12,"i",52),f.Yc(13,"search"),f.Zb(),f.Zb(),f.ac(14,"input",53),f.mc("keyup",(function(e){return f.Oc(t),f.qc().filterDatatable(e.target.value)}))("ngModelChange",(function(e){return f.Oc(t),f.qc().searchValue=e})),f.Zb(),f.Zb(),f.Wc(15,It,5,2,"li",54),f.Zb(),f.ac(16,"ul",55),f.Wc(17,Ct,7,0,"li",25),f.Wc(18,St,5,0,"li",25),f.Zb(),f.Zb(),f.ac(19,"ngx-datatable",56,57),f.ac(21,"ngx-datatable-column",58),f.Wc(22,Ot,2,1,"ng-template",59),f.Zb(),f.ac(23,"ngx-datatable-column",60),f.Wc(24,yt,2,2,"ng-template",59),f.Zb(),f.ac(25,"ngx-datatable-column",61),f.Wc(26,wt,2,2,"ng-template",59),f.Zb(),f.ac(27,"ngx-datatable-column",62),f.Wc(28,kt,2,2,"ng-template",59),f.Zb(),f.ac(29,"ngx-datatable-column",63),f.Wc(30,Ft,4,3,"ng-template",59),f.Zb(),f.Wc(31,Nt,2,1,"ngx-datatable-column",64),f.Wc(32,_t,2,1,"ngx-datatable-column",64),f.ac(33,"ngx-datatable-footer"),f.Wc(34,Ut,4,11,"ng-template",65),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=f.qc();f.Eb(14),f.xc("ngModel",t.searchValue),f.Eb(1),f.xc("ngIf",t.securityServ.admin),f.Eb(2),f.xc("ngIf",t.entreprises&&t.entreprises.length>0&&t.securityServ.admin),f.Eb(1),f.xc("ngIf",t.entreprises&&t.entreprises.length>0&&t.securityServ.admin),f.Eb(1),f.xc("rows",t.data)("columns",t.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),f.Eb(2),f.xc("width",10),f.Eb(2),f.xc("width",130),f.Eb(2),f.xc("width",130),f.Eb(2),f.xc("width",80),f.Eb(2),f.xc("width",130),f.Eb(2),f.xc("ngIf",!t.securityServ.admin),f.Eb(1),f.xc("ngIf",t.securityServ.admin)}}function zt(t,e){if(1&t&&f.Vb(0,"img",94),2&t){const t=f.qc();f.xc("src",t.imgLink+(null==t.selectedRowData?null:t.selectedRowData.image),f.Rc)}}function Gt(t,e){if(1&t&&f.Vb(0,"img",94),2&t){const t=f.qc();f.xc("src",t.newUserImg,f.Rc)}}function $t(t,e){1&t&&(f.ac(0,"div",95),f.Yc(1,"Nouvel utilisateur"),f.Zb())}function jt(t,e){if(1&t&&(f.ac(0,"div",95),f.Yc(1),f.Zb()),2&t){const t=f.qc();f.Eb(1),f.Zc(t.editForm.get("nom").value)}}function Kt(t,e){if(1&t&&(f.ac(0,"div",95),f.Yc(1),f.Zb()),2&t){const t=f.qc();f.Eb(1),f.Zc(null==t.selectedRowData?null:t.selectedRowData.nom)}}function Ht(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-option",96),f.mc("click",(function(){f.Oc(t);const i=e.$implicit;return f.qc().selectOutUser(i)})),f.Yc(1),f.Zb()}if(2&t){const t=e.$implicit;f.xc("value",t.nom)("title",t.nom+" - "+t.username),f.Eb(1),f.bd(" ",t.nom," - ",t.username," ")}}function Jt(t,e){1&t&&(f.ac(0,"mat-error"),f.Yc(1," Le nom complet est requise "),f.Zb())}function Xt(t,e){1&t&&(f.ac(0,"mat-error"),f.Yc(1," Le login est requis "),f.Zb())}function Qt(t,e){if(1&t&&(f.ac(0,"div",28),f.ac(1,"div",29),f.ac(2,"mat-form-field",20),f.ac(3,"mat-label"),f.Yc(4,"Login"),f.Zb(),f.Vb(5,"input",97),f.ac(6,"mat-icon",24),f.Yc(7,"assignment_ind"),f.Zb(),f.Wc(8,Xt,2,0,"mat-error",25),f.Zb(),f.Zb(),f.Zb()),2&t){const t=f.qc();f.Eb(8),f.xc("ngIf",t.editForm.get("username").hasError("required"))}}function te(t,e){if(1&t&&f.Vb(0,"input",98),2&t){const t=f.qc();f.xc("value",t.firstDep)}}function ee(t,e){if(1&t&&(f.ac(0,"mat-option",69),f.Yc(1),f.Zb()),2&t){const t=e.$implicit;f.xc("value",t),f.Eb(1),f.Zc(t)}}const ie=function(){return{standalone:!0}};function ne(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-select",99),f.mc("ngModelChange",(function(e){return f.Oc(t),f.qc().firstDep=e}))("selectionChange",(function(e){return f.Oc(t),f.qc().depChange(e.value)})),f.Wc(1,ee,2,2,"mat-option",68),f.Zb()}if(2&t){const t=f.qc();f.xc("ngModel",t.firstDep)("ngModelOptions",f.Ac(3,ie)),f.Eb(1),f.xc("ngForOf",t.dep)}}function ce(t,e){1&t&&f.Vb(0,"input",100)}function ae(t,e){if(1&t&&(f.ac(0,"mat-option",103),f.Yc(1),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.xc("value",t)("hidden",!i.securityServ.admin&&("Superviseur"==t||"Superviseur g\xe9n\xe9ral"==t||"Superviseur adjoint"==t)),f.Eb(1),f.Zc(t)}}function oe(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-select",101),f.mc("selectionChange",(function(e){return f.Oc(t),f.qc().roleChange(e.value)}))("selectionChange",(function(){return f.Oc(t),f.qc().initByRole()})),f.Wc(1,ae,2,3,"mat-option",102),f.Zb()}if(2&t){const t=f.qc();f.Eb(1),f.xc("ngForOf",t.roles)}}function re(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-checkbox",113),f.mc("change",(function(){f.Oc(t);const i=e.$implicit,n=f.qc(2).$implicit;return f.qc(2).checksubMenuChange(n.id,i.id)})),f.Yc(1),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc(2).$implicit,n=f.qc(2);f.xc("checked",n.subMenuIsPick(i.id,t.id)),f.Eb(1),f.Zc(t.title)}}function se(t,e){if(1&t&&(f.ac(0,"section",117),f.Wc(1,re,2,2,"mat-checkbox",118),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.xc("ngForOf",t.submenu)}}function le(t,e){1&t&&(f.ac(0,"span"),f.Yc(1,"Il n'y a pas de sous-menu"),f.Zb())}const de=function(t){return{"mt-4":t}};function ue(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-expansion-panel",108),f.ac(1,"mat-expansion-panel-header",109,110),f.mc("click",(function(){return f.Oc(t),f.Kc(2)._toggle()})),f.ac(3,"mat-panel-title",111),f.mc("click",(function(){return f.Oc(t),f.Kc(2)._toggle()})),f.Yc(4),f.Zb(),f.ac(5,"mat-panel-description"),f.ac(6,"section",112),f.ac(7,"mat-checkbox",113),f.mc("change",(function(){f.Oc(t);const i=e.$implicit;return f.qc(2).checkMenuChange(i.id)})),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(8,"div",28),f.ac(9,"div",114),f.ac(10,"div",45),f.ac(11,"div",115),f.Wc(12,se,2,1,"section",116),f.Wc(13,le,2,0,"span",25),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc(2);f.xc("ngClass",f.Bc(5,de,0==i)),f.Eb(4),f.Zc(t.title),f.Eb(3),f.xc("checked",n.menuIsPick(t.id)),f.Eb(5),f.xc("ngIf",t.submenu.length>0),f.Eb(1),f.xc("ngIf",0==t.submenu.length)}}function be(t,e){if(1&t&&(f.ac(0,"div",28),f.ac(1,"div",29),f.ac(2,"mat-expansion-panel",104),f.ac(3,"mat-expansion-panel-header",105),f.ac(4,"mat-panel-title",106),f.Yc(5,"Menu"),f.Zb(),f.Vb(6,"mat-panel-description"),f.Zb(),f.Wc(7,ue,14,7,"mat-expansion-panel",107),f.Zb(),f.Zb(),f.Zb()),2&t){const t=f.qc();f.Eb(7),f.xc("ngForOf",t.sidebarItems)}}function me(t,e){if(1&t&&f.Vb(0,"input",125),2&t){const t=f.qc().$implicit,e=f.qc();f.xc("value",e.getDenomination(t.value))}}function pe(t,e){1&t&&f.Vb(0,"mat-option",128)}function he(t,e){if(1&t&&(f.ac(0,"mat-option",103),f.Yc(1),f.Zb()),2&t){const t=e.$implicit,i=f.qc(3);f.xc("value",t.id)("hidden",i.inTabEse(t.id)),f.Eb(1),f.Zc(t.denomination)}}function ge(t,e){if(1&t&&(f.ac(0,"mat-select",126),f.Wc(1,pe,1,0,"mat-option",127),f.Wc(2,he,2,3,"mat-option",102),f.Zb()),2&t){const t=f.qc(),e=t.$implicit,i=t.index,n=f.qc();f.xc("formControl",e),f.Eb(1),f.xc("ngIf",i>0),f.Eb(1),f.xc("ngForOf",n.entreprises)}}function fe(t,e){if(1&t){const t=f.bc();f.ac(0,"div",119),f.ac(1,"div",120),f.ac(2,"mat-form-field",121),f.ac(3,"mat-label"),f.Yc(4),f.Zb(),f.Wc(5,me,1,1,"input",122),f.Wc(6,ge,3,3,"mat-select",123),f.Zb(),f.ac(7,"mat-icon",124),f.mc("click",(function(){return f.Oc(t),f.qc().addEntreprise()})),f.Yc(8,"add_circle_outline"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.xc("hidden",!n.securityServ.admin),f.Eb(1),f.xc("hidden",n.entreprises&&n.entreprises.length<2),f.Eb(3),f.ad("Entit\xe9 ",i+1,""),f.Eb(1),f.xc("ngIf",n.details),f.Eb(1),f.xc("ngIf",!n.details),f.Eb(1),f.xc("hidden",i!=n.tabEse.controls.length-1||!t.value||n.details)}}const ve=function(t){return{"mt-3":t}};function Ee(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-chip",136),f.ac(1,"span",137),f.ac(2,"section",138),f.ac(3,"mat-checkbox",139),f.mc("change",(function(){f.Oc(t);const i=e.$implicit;return f.qc(2).checkLoc(i)})),f.Yc(4),f.Zb(),f.Zb(),f.Zb(),f.ac(5,"span",140),f.ac(6,"mat-icon",141),f.mc("click",(function(){f.Oc(t);const i=e.$implicit;return f.qc(2).openFirst(i.id)})),f.Yc(7,"remove_red_eye"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc(2);f.xc("ngClass",f.Bc(4,ve,0!=i)),f.Eb(3),f.xc("disabled",n.details||n.securityServ.superviseurGene)("checked",n.inTab(t.id,n.tabLoc)),f.Eb(1),f.Zc(t.nom)}}function xe(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-chip",148),f.ac(1,"span",137),f.ac(2,"section",138),f.ac(3,"mat-checkbox",139),f.mc("change",(function(){f.Oc(t);const i=e.$implicit;return f.qc(3).checkLoc(i)})),f.Yc(4),f.Zb(),f.Zb(),f.Zb(),f.ac(5,"span",140),f.ac(6,"mat-icon",141),f.mc("click",(function(){f.Oc(t);const i=e.$implicit,n=f.qc().index;return f.qc(2).openOther(n+1,i.id)})),f.Yc(7,"remove_red_eye"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc().index,n=f.qc(2);f.xc("ngClass",f.Bc(4,ve,0!=i)),f.Eb(3),f.xc("disabled",n.details||n.securityServ.superviseurGene)("checked",n.inTab(t.id,n.tabLoc)),f.Eb(1),f.Zc(t.nom)}}function Ze(t,e){1&t&&(f.ac(0,"p",149),f.Yc(1,"Cette subdivision est vide"),f.Zb())}function Ie(t,e){if(1&t&&(f.ac(0,"div",142),f.ac(1,"p",143),f.Yc(2),f.Zb(),f.Vb(3,"hr"),f.ac(4,"mat-chip-list",144),f.ac(5,"small",145),f.Yc(6),f.Zb(),f.Wc(7,xe,8,6,"mat-chip",146),f.Zb(),f.Wc(8,Ze,2,0,"p",147),f.Zb()),2&t){const t=e.$implicit,n=e.index,c=f.qc(2);var i;f.xc("hidden",!c.openLocalite||!c.getOnById(t)),f.Eb(2),f.Zc(null==(i=c.getOnById(t))?null:i.nom),f.Eb(4),f.Zc(c.subdivisions[n+1]),f.Eb(1),f.xc("ngForOf",c.getCurrentSubById(t)),f.Eb(1),f.xc("ngIf",0==c.getCurrentSubById(t).length)}}function Ce(t,e){if(1&t){const t=f.bc();f.ac(0,"div",28),f.ac(1,"div",29),f.ac(2,"mat-expansion-panel",104),f.ac(3,"mat-expansion-panel-header",105),f.ac(4,"mat-panel-title",106),f.Yc(5,"Affectation"),f.Zb(),f.Vb(6,"mat-panel-description"),f.Zb(),f.ac(7,"div",129),f.ac(8,"p",130),f.Yc(9),f.Zb(),f.Vb(10,"hr"),f.ac(11,"mat-chip-list",131),f.Wc(12,Ee,8,6,"mat-chip",132),f.Zb(),f.Zb(),f.Wc(13,Ie,9,5,"div",133),f.ac(14,"section",134),f.ac(15,"mat-checkbox",135),f.mc("change",(function(){return f.Oc(t),f.qc().checkAllLoc()})),f.Yc(16,"Tous cocher"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=f.qc();f.Eb(9),f.Zc(t.subdivisions[0]),f.Eb(3),f.xc("ngForOf",t.firstSub(t.localites)),f.Eb(1),f.xc("ngForOf",t.tabOpen),f.Eb(1),f.xc("hidden",t.details||t.securityServ.superviseurGene),f.Eb(1),f.xc("checked",t.allLocIsChec())}}let Se=(()=>{class t{constructor(t,e,i,n,c){this.fb=t,this._snackBar=e,this.adminServ=i,this.sharedService=n,this.securityServ=c,this.rows=[],this.data_dii=[],this.colNmbre=5,this.newUserImg="",this.totalMessage="Total",this.data=[],this.filteredData=[],this.dep=["Direction financi\xe8re","Direction comptable","Direction du patrimoine","Autre (\xe0 pr\xe9ciser)"],this.roles=["Chef d'\xe9quipe de comptage","Membre d'\xe9quipe de comptage","Superviseur","Superviseur g\xe9n\xe9ral","Superviseur adjoint","Pr\xe9sident du comit\xe9","Membre du comit\xe9"],this.show=!1,this.imgLink="",this.defaultImag="exemple.jpg",this.myId="",this.tabEse=new m.d([]),this.autreDep=!1,this.entreprises=[],this.details=!1,this.update=!1,this.firstDep="",this.localites=[],this.separatorKeysCodes=[s.g,s.c],this.fruitCtrl=new m.f,this.tabLoc=[],this.idCurrentEse=0,this.idEseLocalStor="",this.usersTampon=[],this.isMembreEquipe=!1,this.isGuest=!1,this.tabMenu=[],this.searchValue="",this.subdivisions=[],this.tabOpen=[],this.openLocalite=null,this.getEntrepriseById=()=>{var t,e;return null===(e=null===(t=this.securityServ.user)||void 0===t?void 0:t.entreprises)||void 0===e?void 0:e.find(t=>t.id==this.idEseLocalStor)},this.editForm=this.fb.group({id:[0],image:[""],username:["",[m.x.required]],nom:["",[m.x.required]],poste:[""],departement:[""],status:["actif"],role:["",[m.x.required]]}),this.imgLink=this.sharedService.baseUrl+"/images/",this.newUserImg=this.imgLink+this.defaultImag}ngOnInit(){this.securityServ.showLoadingIndicatior.next(!0),this.myId=localStorage.getItem("idUser"),this.idEseLocalStor=localStorage.getItem("currentEse"),this.getUsers(),this.getEntreprises(),this.securityServ.getUser(),this.sidebarItems=this.useInSideBI(ut.a),this.outUsers=[]}useInSideBI(t){let e=[];return t.forEach(t=>{let i=[];(t.roles.indexOf("ROLE_Guest")>-1||t.roles.indexOf("all")>-1)&&(t.submenu.forEach(t=>{(t.roles.indexOf("ROLE_Guest")>-1||t.roles.indexOf("all")>-1)&&i.push({id:t.id,title:t.title,submenu:[]})}),e.push({id:t.id,title:t.title,submenu:i}))}),e}checkMenuChange(t){var e=this.getIndexMenu(t);e>-1?this.tabMenu.splice(e,1):this.tabMenu.push([t,[]])}getIndexMenu(t){let e=-1;if(this.tabMenu)for(let i=0;i<this.tabMenu.length;i++)if(this.tabMenu[i][0]==t){e=i;break}return e}menuIsPick(t){return this.getIndexMenu(t)>-1}checksubMenuChange(t,e){let i=this.getIndexMenu(t);-1==i&&(this.tabMenu.push([t,[]]),i=this.tabMenu.length-1);let n=this.tabMenu[i][1];var c=n.indexOf(e);c>-1?n.splice(c,1):n.push(e),this.tabMenu[i][1]=n,n&&0==n.length&&this.tabMenu.splice(i,1)}subMenuIsPick(t,e){let i=this.getIndexMenu(t),n=!1;return i>-1&&(n=this.tabMenu[i][1].indexOf(e)>-1),n}roleChange(t){this.isMembreEquipe=!1,this.isGuest=!1,"Chef d'\xe9quipe"==t||"Chef d'\xe9quipe de comptage"==t||"ROLE_CE"==t||"Membre d'\xe9quipe de comptage"==t||"Membre inventaire"==t||"ROLE_MI"==t?this.isMembreEquipe=!0:"Guest"!=t&&"ROLE_Guest"!=t||(this.isGuest=!0)}initByRole(){this.tabLoc=[],this.tabMenu=[]}entiteChange(t){if(0==t)return void this.setTableData(this.usersTampon);this.entreprises.find(e=>e.id==t);const e=this.usersTampon.filter(e=>e.entreprises.find(e=>e.id==t));this.setTableData(e)}getUsers(){this.adminServ.getUsers().then(t=>{let e=[];t&&t.length>0&&(e=t.reverse(),e=e.filter(t=>t.id!=this.myId&&t.roles&&"ROLE_Admin"!=t.roles[0])),this.setTableData(e),this.usersTampon=e,this.show=!0,this.securityServ.showLoadingIndicatior.next(!1),this.idCurrentEse=0,this.entiteChange(0),""!=this.searchValue&&this.filterDatatable(this.searchValue)},t=>{console.log(t),this.securityServ.showLoadingIndicatior.next(!1)})}setTableData(t){this.data=t,this.filteredData=t}getEntreprises(){this.adminServ.getEntreprise().then(t=>{var e,i;this.entreprises=t,t&&1==t.length&&(this.idCurrentEse=t[0].id);let n=this.idEseLocalStor?this.getEntreprise(this.idEseLocalStor):null;this.localites=null==n?void 0:n.localites,this.securityServ.superviseurAdjoint&&(this.localites=this.localites.filter(t=>{var e;return(null===(e=t.createur)||void 0===e?void 0:e.id)==this.myId})),this.subdivisions=(null==n?void 0:n.subdivisions)?null==n?void 0:n.subdivisions:[],0==(null===(e=this.tabOpen)||void 0===e?void 0:e.length)&&(null===(i=this.subdivisions)||void 0===i||i.forEach(t=>this.tabOpen.push(0)))},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}getEntreprise(t){let e=null;return this.entreprises&&this.entreprises.length>0&&t&&(e=this.entreprises.find(e=>e.id==t)),e}getOneEntreprise(t){this.adminServ.getOneEntreprise(t).then(t=>{this.localites=t.localites},t=>{console.log(t)})}addEntreprise(t=null){this.tabEse.push(new m.f(t))}depChange(t){this.autreDep=!1,this.editForm.get("departement").setValue(""),t!=this.dep[this.dep.length-1]?this.editForm.get("departement").setValue(t):this.autreDep=!0}nomChange(t){if(!this.update){let e=t.replace(/\ /g,"").replace(/\\xe9/g,"e").replace(/\\xe8/g,"e");this.editForm.get("username").setValue(e+"@gestion-immo.com")}}keyUpNomChange(t){this.adminServ.getUsers("status=out&nom="+t).then(t=>{this.outUsers=t})}selectOutUser(t){this.update=!0,this.editRow(t)}updateUser(t){this.details=!1,this.autreDep=!1,this.tabMenu=[],this.dep.includes(t.departement)?this.firstDep=t.departement:(this.firstDep=this.dep[this.dep.length-1],this.autreDep=!0),this.traitementUpdate(t),this.update=!0,this.editRow(t)}traitementUpdate(t){var e;this.roleChange(t.roles[0]),this.tabEse=new m.d([]),t.menu&&(this.tabMenu=t.menu),t.entreprises.forEach(t=>this.addEntreprise(t.id)),this.tabLoc=[],t.localites.forEach(t=>this.checkLoc(t,!0)),this.tabOpen=[],null===(e=this.subdivisions)||void 0===e||e.forEach(t=>this.tabOpen.push(0))}editRow(t,e=!1){this.formDirective&&this.formDirective.resetForm(),this.editForm=this.fb.group({id:[{value:t.id,disabled:e}],image:[{value:t.image,disabled:e}],username:[{value:t.username,disabled:e},[m.x.required]],nom:[{value:t.nom,disabled:e},[m.x.required]],poste:[{value:t.poste,disabled:e}],departement:[{value:t.departement,disabled:e}],status:["actif"],role:[{value:this.getRole(t.roles),disabled:e},[m.x.required]]}),this.selectedRowData=t}lockRow(t){let e="d\xe9bloqu\xe9",i="d\xe9blocage";"actif"==t.status&&(e="bloqu\xe9",i="blocage"),h.a.fire({title:"Confirmation",text:"Voulez-vous confirmer le "+i+" de l'utilisateur "+t.nom+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then(i=>{i.value&&(this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.lockUser(t.id).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-success","Utilisateur "+e,"top","center"),this.getUsers()},t=>{this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-red",t,"top","right")}))})}longText(t,e){return this.sharedService.longText(t,e)}addRow(){var t;this.firstDep="",this.details=!1,this.autreDep=!1,this.update=!1,this.isGuest=!1,this.isMembreEquipe=!1,this.tabEse=new m.d([]),this.tabLoc=[];let e="";this.tabOpen=[],null===(t=this.subdivisions)||void 0===t||t.forEach(t=>this.tabOpen.push(0)),this.entreprises&&this.entreprises.length>0&&(e=this.entreprises[0].id),this.addEntreprise(e),this.editRow({id:0,username:"",nom:"",poste:"",departement:"",role:"",image:this.defaultImag,status:"actif"})}showDetails(t){this.autreDep=!1,this.traitementUpdate(t),this.dep.includes(t.departement)?this.firstDep=t.departement:(this.firstDep=this.dep[this.dep.length-1],this.autreDep=!0),this.details=!0,this.editRow(t,!0)}getDenomination(t){let e="";return this.entreprises&&this.entreprises.length>0&&t&&(e=this.entreprises.find(e=>e.id==t).denomination),e}onEditSave(t){let e=t.value;e.entreprises=this.getDataEse(e),e.currentEse=1==e.entreprises.length?e.entreprises[0]:null;const i=this.getRole(e.role,!1);e.roles=[i],e.menu=this.getDataMenu(i),e.localites=this.getDataLoc();const n=this.changeSuperviseur(e.role,e.id);n[0]?this.textChangeSup(e.role,n):this.sendData(e)}sendData(t){this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.addUser(t).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-success","Enregistr\xe9","top","center"),this.closeEditModal.nativeElement.click(),this.getUsers(),this.securityServ.admin&&this.getEntreprises()},t=>{console.log(t),this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-red",t,"top","right")})}textChangeSup(t,e){let i="Vous ne pouvez pas cr\xe9e un "+this.sharedService.decapitalize(t)+" car vous avez d\xe9ja un "+e[2]+" dans l'entit\xe9 "+e[1].denomination;this.showNotification("bg-red",i,"top","right",7e3)}getDataEse(t){if(!this.securityServ.admin&&0==t.id)return["/api/entreprises/"+localStorage.getItem("idEse")];let e=[];return this.tabEse.value.forEach(t=>{t&&e.push("/api/entreprises/"+t)}),e}getDataMenu(t){return"ROLE_Guest"!=t?[]:this.tabMenu}getDataLoc(){let t=[];return this.tabLoc.forEach(e=>{e&&t.push("/api/localites/"+e)}),t}getRole(t,e=!0){let i="",n="";return!t||"Superviseur"!=t&&"ROLE_Superviseur"!=t[0]?!t||"Superviseur g\xe9n\xe9ral"!=t&&"ROLE_SuperViseurGene"!=t[0]?!t||"Superviseur adjoint"!=t&&"ROLE_SuperViseurAdjoint"!=t[0]?!t||"Guest"!=t&&"ROLE_Guest"!=t[0]?!t||"Pr\xe9sident du comit\xe9"!=t&&"ROLE_PC"!=t[0]?!t||"Membre du comit\xe9"!=t&&"ROLE_MC"!=t[0]?!t||"Chef d'\xe9quipe"!=t&&"ROLE_CE"!=t[0]&&"Chef d'\xe9quipe de comptage"!=t?!t||"Membre inventaire"!=t&&"ROLE_MI"!=t[0]&&"Membre d'\xe9quipe de comptage"!=t||(i="Membre d'\xe9quipe de comptage",n="ROLE_MI"):(i="Chef d'\xe9quipe de comptage",n="ROLE_CE"):(i="Membre du comit\xe9",n="ROLE_MC"):(i="Pr\xe9sident du comit\xe9",n="ROLE_PC"):(i="Guest",n="ROLE_Guest"):(i="Superviseur adjoint",n="ROLE_SuperViseurAdjoint"):(i="Superviseur g\xe9n\xe9ral",n="ROLE_SuperViseurGene"):(i="Superviseur",n="ROLE_Superviseur"),e?i:n}filterDatatable(t){const e=t.toLowerCase(),i=this.colNmbre,n=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter((function(t){for(let c=0;c<i;c++)if(-1!==t[n[c]].toString().toLowerCase().indexOf(e)||!e)return!0})),this.table.offset=0}openSnackBar(t){this._snackBar.open(t,"",{duration:2e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["bg-red"]})}showNotification(t,e,i,n,c=2e3){this._snackBar.open(e,"",{duration:c,verticalPosition:i,horizontalPosition:n,panelClass:[t,"color-white"]})}backupPwd(t){h.a.fire({title:"Confirmation",text:"Voulez-vous confirmer la r\xe9initialisation du mot de passe de l'utilisateur "+t.nom+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then(e=>{e.value&&(this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.backupPWD(t.id).then(t=>{this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-success","Mot de passe r\xe9initialis\xe9","top","center"),this.getUsers()},t=>{this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-red",t,"top","right")}))})}rev(t){let e=[];return t&&t.length>0&&(e=t,this.sharedService.trier(e,"id",-1)),e}inTabEse(t){return this.tabEse.value.find(e=>e==t)}trierSZ(t){return this.sharedService.trier(t,"id")}firstSub(t){return null==t?void 0:t.filter(t=>{var e;return(null===(e=t.position)||void 0===e?void 0:e.length)>0})}getCurrentSubById(t){var e;return(null===(e=this.getOnById(t))||void 0===e?void 0:e.subdivisions)||[]}getOnById(t){var e;return(null===(e=this.localites)||void 0===e?void 0:e.find(e=>e.id==t))||null}openOther(t,e){this.tabOpen[t]=e,this.offUnderSub(t+1)}offUnderSub(t){for(let e=t;e<this.tabOpen.length;e++)this.tabOpen[e]&&(this.tabOpen[e]=0)}openFirst(t){this.openLocalite=t,this.tabOpen[0]=t,this.offUnderSub(1)}inTab(t,e){return null==e?void 0:e.find(e=>e==t)}checkLoc(t,e=!1){var i=this.tabLoc.indexOf(t.id);if(i>-1&&!e)this.tabLoc.splice(i,1);else if(i<=-1){this.tabLoc.push(t.id);const e=t.idParent;e&&!this.inTab(e,this.tabLoc)&&this.checkLoc(this.getOnById(e))}}checkAllLoc(){this.allLocIsChec()?this.localites.forEach(t=>{this.inTab(t.id,this.tabLoc)&&this.checkLoc(t)}):this.localites.forEach(t=>{this.inTab(t.id,this.tabLoc)||this.checkLoc(t)})}allLocIsChec(){let t=!0;return this.localites.forEach(e=>{t&&(t=this.inTab(e.id,this.tabLoc))}),t}changeSuperviseur(t,e){let i=[!1,null,""];return this.tabEse.value.forEach(n=>{const c=this.entreprises.find(t=>t.id==n),a=(null==c?void 0:c.users)?c.users:[],o=!!a.find(t=>"ROLE_Superviseur"==t.roles[0]&&t.id!=e)&&[!0,"superviseur"],r=!!a.find(t=>"ROLE_SuperViseurGene"==t.roles[0]&&t.id!=e)&&[!0,"superviseur g\xe9n\xe9ral"],s=!!a.find(t=>"ROLE_SuperViseurAdjoint"==t.roles[0]&&t.id!=e)&&[!0,"superviseur adjoint"];if(o[0]&&("Superviseur g\xe9n\xe9ral"==t||"Superviseur adjoint"==t)||(r[0]||s[0])&&"Superviseur"==t){let t=o[0]?o[1]:"";t=s[0]?s[1]:t,t=r[0]?r[1]:t,i=[!0,c,t]}}),i}getAllAgents(t){const e=[];console.log();const i=t.target;if(1!==i.files.length)throw new Error("Cannot use multiple files");const n=new FileReader;n.onload=t=>{var i,n;return Object(r.b)(this,void 0,void 0,(function*(){const c=g.read(t.target.result,{type:"binary"});this.data_dii=g.utils.sheet_to_json(c.Sheets[c.SheetNames[0]],{header:1,raw:!1});for(let t=1;t<this.data_dii.length;t++)e.push(this.data_dii[t]);if(0==this.idCurrentEse)this.showNotification("bg-red","Selectionner Une Entit\xe9","top","center");else{try{for(var a,o=Object(r.a)(e);!(a=yield o.next()).done;){const t=a.value,e={id:0,nom:t[0],entreprises:["api/entreprises/"+this.idCurrentEse],username:t[3],poste:t[1],departement:t[2],password:"azerty",status:"OUT",image:"exemple.jpg"};this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.addUser(e).then(t=>{})}}catch(s){i={error:s}}finally{try{a&&!a.done&&(n=o.return)&&(yield n.call(o))}finally{if(i)throw i.error}}this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-success","Fichier Enregistr\xe9","top","center")}}))},n.readAsBinaryString(i.files[0])}}return t.\u0275fac=function(e){return new(e||t)(f.Ub(m.e),f.Ub(v.a),f.Ub(l.a),f.Ub(u.a),f.Ub(b.a))},t.\u0275cmp=f.Ob({type:t,selectors:[["app-equipe"]],viewQuery:function(t,e){var i;1&t&&(f.Uc(vt,!0),f.dd(dt.e,!0),f.dd(Et,!0),f.dd(xt,!0)),2&t&&(f.Jc(i=f.nc())&&(e.roleTemplate=i.first),f.Jc(i=f.nc())&&(e.table=i.first),f.Jc(i=f.nc())&&(e.closeEditModal=i.first),f.Jc(i=f.nc())&&(e.formDirective=i.first))},decls:72,vars:21,consts:[["class","content",4,"ngIf"],["id","editModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"formGroup","ngSubmit"],["formDirective","ngForm"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],["alt","avatar",3,"src",4,"ngIf"],[1,"modal-about"],["class","font-weight-bold p-t-10 font-17",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeEditModal",""],[1,"material-icons"],[1,"modal-body",3,"perfectScrollbar"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],["formControlName","status","type","hidden",1,"form-control"],[1,"row","pr-3"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nom",3,"matAutocomplete","keyup","change"],["auto","matAutocomplete"],[3,"value","title","click",4,"ngFor","ngForOf"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","poste"],["class","row",4,"ngIf"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","disabled","true",3,"value",4,"ngIf"],["name","depart",3,"ngModel","ngModelOptions","ngModelChange","selectionChange",4,"ngIf"],[1,"row",3,"hidden"],["matInput","","formControlName","departement"],["matInput","","formControlName","role",4,"ngIf"],["formControlName","role",3,"selectionChange",4,"ngIf"],["class","row mb-2",3,"hidden",4,"ngFor","ngForOf"],[1,"modal-footer",3,"hidden"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger","btn-border-radius"],[1,"content"],[1,"container-fluid"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"col-sm-12"],[1,"ngxTableHeader","pl-0","pb-0"],[1,"header-buttons-left","ml-0"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Recherche","type","text","aria-label","Search box",1,"browser-default","search-field","search-team",3,"ngModel","keyup","ngModelChange"],["class","dropdown m-l-20",4,"ngIf"],[1,"header-buttons","m-r-20"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","","sortable","false","prop","image",3,"width"],["ngx-datatable-cell-template",""],["name","Pr\xe9nom et nom","sortable","false","prop","nom",3,"width"],["name","D\xe9partement","sortable","false","prop","departement",3,"width"],["name","R\xf4le","sortable","false","prop","roles",3,"width"],["name","Entit\xe9","sortable","false","prop","entreprises",3,"width"],["name","Actions","sortable","false","class","text-center",3,"width",4,"ngIf"],["ngx-datatable-footer-template",""],["title","Entit\xe9",1,"form-control","select-trie","pl-0","pr-0",3,"ngModel","ngModelChange","change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["type","file","hidden","",3,"change"],["openFileUload",""],["mat-mini-fab","","color","primary","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal",3,"click"],[1,"table-img","padding-0"],["width","40",3,"src"],[1,"table-img","padding-0",3,"title"],[3,"title",4,"ngIf"],["class","form-control no-border pl-0","style","border: none !important;",4,"ngIf"],[3,"title"],[1,"form-control","no-border","pl-0",2,"border","none !important"],[4,"ngFor","ngForOf"],["name","Actions","sortable","false",1,"text-center",3,"width"],["data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal","title","Afficher les detais de l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-info",3,"click"],["class","btn tblActnBtn pointer h-auto text-secondary ml-4","title","Rattacher \xe0 une localit\xe9",4,"ngIf"],["title","Rattacher \xe0 une localit\xe9",1,"btn","tblActnBtn","pointer","h-auto","text-secondary","ml-4"],["data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal","title","Modifier l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-secondary",3,"click"],["title","R\xe9initialiser le mot de passe de l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-primary",3,"click"],["title","Bloquer/D\xe9bloquer un utilisateur",1,"btn","tblActnBtn","pointer","h-auto",3,"ngClass","click"],["class","material-icons",4,"ngIf"],[1,"page-count"],[3,"pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","hidden","change"],["alt","avatar",3,"src"],[1,"font-weight-bold","p-t-10","font-17"],[3,"value","title","click"],["matInput","","formControlName","username"],["matInput","","disabled","true",3,"value"],["name","depart",3,"ngModel","ngModelOptions","ngModelChange","selectionChange"],["matInput","","formControlName","role"],["formControlName","role",3,"selectionChange"],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"example-full-width","mb-4","pl-0","pr-0"],[2,"background-color","#d8d5d538"],[1,"pl-0","col-10"],["class","example-full-width mb-4 pl-0 pr-0","hideToggle","",3,"ngClass",4,"ngFor","ngForOf"],["hideToggle","",1,"example-full-width","mb-4","pl-0","pr-0",3,"ngClass"],[1,"pr-1",2,"background-color","#eab9b9",3,"click"],["panelH",""],[1,"pl-0","col-11","pt-4","mr-0",3,"click"],[1,"example-section","row"],[1,"example-margin",3,"checked","change"],[1,"col-lg-12","col-md-12","col-sm-12","col-12","mb-0"],[1,"body","pl-0","pr-0"],["class","example-section row all-height",4,"ngIf"],[1,"example-section","row","all-height"],["class","example-margin",3,"checked","change",4,"ngFor","ngForOf"],[1,"row","mb-2",3,"hidden"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0",3,"hidden"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],["matInput","","disabled","",3,"value",4,"ngIf"],[3,"formControl",4,"ngIf"],["matSuffix","","title","Ajouter une entit\xe9",1,"pointer",3,"hidden","click"],["matInput","","disabled","",3,"value"],[3,"formControl"],["value","",4,"ngIf"],["value",""],[1,"p-2","mt-3","pb-4","box-loc"],[1,"ml-2"],["aria-label","Fish selection",1,"mt-4"],["class","w-100 color-chips",3,"ngClass",4,"ngFor","ngForOf"],["class","p-2 mt-4 pb-4 box-loc",3,"hidden",4,"ngFor","ngForOf"],[1,"example-section",3,"hidden"],[1,"example-margin","pt-2",3,"checked","change"],[1,"w-100","color-chips",3,"ngClass"],[1,"col-11","pl-0"],[1,"example-section","pick-loc"],[1,"example-margin","pt-2",3,"disabled","checked","change"],[1,"col-1"],["title","Afficher",1,"icone-affectation","pointer","text-info",3,"click"],[1,"p-2","mt-4","pb-4","box-loc",3,"hidden"],[1,"mt-3","ml-2"],["aria-label","Fish selection"],[1,"ml-3",2,"font-style","italic"],["class","w-100 color-chips","color","primary",3,"ngClass",4,"ngFor","ngForOf"],["class","ml-2 mt-2",4,"ngIf"],["color","primary",1,"w-100","color-chips",3,"ngClass"],[1,"ml-2","mt-2"]],template:function(t,e){if(1&t&&(f.Wc(0,Bt,35,19,"section",0),f.ac(1,"div",1),f.ac(2,"div",2),f.ac(3,"form",3,4),f.mc("ngSubmit",(function(){return e.onEditSave(e.editForm)})),f.ac(5,"div",5),f.ac(6,"div",6),f.ac(7,"div",7),f.Wc(8,zt,1,1,"img",8),f.Wc(9,Gt,1,1,"img",8),f.ac(10,"div",9),f.Wc(11,$t,2,0,"div",10),f.Wc(12,jt,2,1,"div",10),f.Wc(13,Kt,2,1,"div",10),f.Zb(),f.Zb(),f.Zb(),f.ac(14,"button",11,12),f.ac(16,"i",13),f.Yc(17,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(18,"div",14),f.ac(19,"div"),f.ac(20,"div",15),f.Vb(21,"input",16),f.Vb(22,"input",17),f.Zb(),f.ac(23,"div",18),f.ac(24,"div",19),f.ac(25,"mat-form-field",20),f.ac(26,"mat-label"),f.Yc(27,"Pr\xe9nom et nom"),f.Zb(),f.ac(28,"input",21),f.mc("keyup",(function(t){return e.keyUpNomChange(t.target.value)}))("change",(function(t){return e.nomChange(t.target.value)})),f.Zb(),f.ac(29,"mat-autocomplete",null,22),f.Wc(31,Ht,2,4,"mat-option",23),f.Zb(),f.ac(32,"mat-icon",24),f.Yc(33,"face"),f.Zb(),f.Wc(34,Jt,2,0,"mat-error",25),f.Zb(),f.Zb(),f.ac(35,"div",19),f.ac(36,"mat-form-field",20),f.ac(37,"mat-label"),f.Yc(38,"Poste"),f.Zb(),f.Vb(39,"input",26),f.ac(40,"mat-icon",24),f.Yc(41,"card_travel"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Wc(42,Qt,9,1,"div",27),f.ac(43,"div",28),f.ac(44,"div",29),f.ac(45,"mat-form-field",20),f.ac(46,"mat-label"),f.Yc(47,"Direction"),f.Zb(),f.Wc(48,te,1,1,"input",30),f.Wc(49,ne,2,4,"mat-select",31),f.Zb(),f.Zb(),f.Zb(),f.ac(50,"div",32),f.ac(51,"div",29),f.ac(52,"mat-form-field",20),f.ac(53,"mat-label"),f.Yc(54,"Autre direction"),f.Zb(),f.Vb(55,"input",33),f.Zb(),f.Zb(),f.Zb(),f.ac(56,"div",28),f.ac(57,"div",29),f.ac(58,"mat-form-field",20),f.ac(59,"mat-label"),f.Yc(60,"R\xf4le"),f.Zb(),f.Wc(61,ce,1,0,"input",34),f.Wc(62,oe,2,1,"mat-select",35),f.Zb(),f.Zb(),f.Zb(),f.Wc(63,be,8,1,"div",27),f.Wc(64,fe,9,6,"div",36),f.Wc(65,Ce,17,5,"div",27),f.ac(66,"div",37),f.ac(67,"div",38),f.ac(68,"button",39),f.Yc(69,"Enregistrer"),f.Zb(),f.ac(70,"button",40),f.Yc(71,"Annuler"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()),2&t){const t=f.Kc(30);f.xc("ngIf",e.show),f.Eb(3),f.xc("formGroup",e.editForm),f.Eb(5),f.xc("ngIf",null==e.selectedRowData?null:e.selectedRowData.image),f.Eb(1),f.xc("ngIf",!(null!=e.selectedRowData&&e.selectedRowData.image)),f.Eb(2),f.xc("ngIf",!(null!=e.selectedRowData&&e.selectedRowData.nom||e.editForm.get("nom").value)),f.Eb(1),f.xc("ngIf",!(null!=e.selectedRowData&&e.selectedRowData.nom)&&e.editForm.get("nom").value),f.Eb(1),f.xc("ngIf",null==e.selectedRowData?null:e.selectedRowData.nom),f.Eb(15),f.xc("matAutocomplete",t),f.Eb(3),f.xc("ngForOf",e.outUsers),f.Eb(3),f.xc("ngIf",e.editForm.get("nom").hasError("required")),f.Eb(8),f.xc("ngIf",e.securityServ.admin),f.Eb(6),f.xc("ngIf",e.details),f.Eb(1),f.xc("ngIf",!e.details),f.Eb(1),f.xc("hidden",!e.autreDep),f.Eb(11),f.xc("ngIf",e.details),f.Eb(1),f.xc("ngIf",!e.details),f.Eb(1),f.xc("ngIf",e.isGuest),f.Eb(1),f.xc("ngForOf",e.tabEse.controls),f.Eb(1),f.xc("ngIf",e.isMembreEquipe&&!e.securityServ.admin),f.Eb(1),f.xc("hidden",e.details),f.Eb(2),f.xc("disabled",e.editForm.invalid)}},directives:[n.n,m.z,m.p,m.j,bt.b,m.b,m.o,m.h,E.c,E.g,x.b,mt.c,mt.a,n.m,Z.a,E.i,m.r,dt.e,dt.b,dt.a,dt.f,dt.c,m.w,m.s,m.y,I.b,n.l,dt.d,pt.o,E.b,ht.a,gt.c,gt.f,gt.g,gt.e,ft.a,m.g,C.c,C.a],styles:[".example-full-width[_ngcontent-%COMP%]{width:95.2%!important}.select-trie[_ngcontent-%COMP%]{background-color:#ebebee!important;width:153px!important}.ngxTableHeader[_ngcontent-%COMP%]   .header-buttons-left[_ngcontent-%COMP%]   input.search-field[_ngcontent-%COMP%]{width:200px}.modal-body[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden}.icone-affectation[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.box-loc[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.14);border-radius:5%;background-color:#f6f6f6;box-shadow:0 0 3px #31414a}"]}),t})();var Oe=i("5JmO"),ye=i.n(Oe),we=i("TruH"),ke=i.n(we),Le=i("+GiM"),Me=i("0IaG"),Pe=i("1kSV"),qe=i("xHqg"),Fe=i("iadO");const De=["closeComiteModal"],Re=["closePresentModal"],Ne=["closeLocaliteModal"],Ye=["closeFunctionSigndModal"],Ae=["openFunctionSigndModal"],Te=["formDirective"];function Ve(t,e){1&t&&(f.ac(0,"span"),f.Yc(1,"Ajouter "),f.Zb())}function _e(t,e){1&t&&(f.ac(0,"span"),f.Yc(1,"Modifier "),f.Zb())}function We(t,e){1&t&&(f.ac(0,"mat-error"),f.Yc(1,"Ant\xe9rieure \xe0 la date de d\xe9but"),f.Zb())}function Ue(t,e){1&t&&(f.ac(0,"button",121),f.ac(1,"mat-icon"),f.Yc(2,"room"),f.Zb(),f.Zb()),2&t&&f.xc("title",e.$implicit.nom)}function Be(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"button",122),f.mc("click",(function(){return f.Oc(t),f.qc(2).createNewInv()})),f.ac(2,"mat-icon"),f.Yc(3,"create"),f.Zb(),f.Zb(),f.ac(4,"button",123),f.mc("click",(function(){return f.Oc(t),f.Kc(8).click()})),f.ac(5,"mat-icon"),f.Yc(6,"file_upload"),f.Zb(),f.Zb(),f.ac(7,"input",124,125),f.mc("change",(function(e){return f.Oc(t),f.qc(2).handleFileInput(e.target.files)})),f.Zb(),f.Zb()}}const ze=function(t){return{"ml-5":t}};function Ge(t,e){if(1&t){const t=f.bc();f.ac(0,"button",131),f.mc("click",(function(){return f.Oc(t),f.qc(2),f.Kc(3).click()})),f.ac(1,"mat-icon"),f.Yc(2,"add"),f.Zb(),f.Zb()}if(2&t){const t=f.qc(4);f.xc("ngClass",f.Bc(1,ze,(null==t.instructions?null:t.instructions.length)>0))}}function $e(t,e){if(1&t){const t=f.bc();f.ac(0,"span",127),f.ac(1,"mat-icon",128),f.Yc(2,"insert_drive_file"),f.Zb(),f.ac(3,"mat-icon",129),f.mc("click",(function(){f.Oc(t);const i=e.index;return f.qc(3).deleteInst(i)})),f.Yc(4,"cancel"),f.Zb(),f.Wc(5,Ge,3,3,"button",130),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("title","Supprimer "+t[0]),f.Eb(2),f.xc("ngIf",i==n.instructions.length-1)}}function je(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.Wc(1,$e,6,3,"span",126),f.ac(2,"input",124,125),f.mc("change",(function(e){return f.Oc(t),f.qc(2).handleFileInput(e.target.files)})),f.Zb(),f.Zb()}if(2&t){const t=f.qc(2);f.Eb(1),f.xc("ngForOf",t.instructions)}}function Ke(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"span",127),f.ac(2,"mat-icon",132),f.Yc(3,"assignment "),f.Zb(),f.ac(4,"mat-icon",133),f.mc("click",(function(){return f.Oc(t),f.qc(2).deletCreationInst()})),f.Yc(5,"cancel "),f.Zb(),f.ac(6,"button",134),f.ac(7,"mat-icon"),f.Yc(8,"create"),f.Zb(),f.Zb(),f.Zb(),f.Zb()}}function He(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"button",135),f.mc("click",(function(){return f.Oc(t),f.qc(),f.Kc(67).click()})),f.ac(2,"mat-icon"),f.Yc(3,"file_upload"),f.Zb(),f.Zb(),f.Zb()}}function Je(t,e){if(1&t){const t=f.bc();f.ac(0,"button",137),f.mc("click",(function(){return f.Oc(t),f.qc(3),f.Kc(67).click()})),f.ac(1,"mat-icon"),f.Yc(2,"add"),f.Zb(),f.Zb()}}function Xe(t,e){if(1&t){const t=f.bc();f.ac(0,"span",127),f.ac(1,"mat-icon",128),f.Yc(2," insert_drive_file"),f.Zb(),f.ac(3,"mat-icon",129),f.mc("click",(function(){f.Oc(t);const i=e.index;return f.qc(3).deleteDc(i)})),f.Yc(4,"cancel"),f.Zb(),f.Wc(5,Je,3,0,"button",136),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("title","Supprimer "+t[0]),f.Eb(2),f.xc("ngIf",i==n.docsDc.length-1)}}function Qe(t,e){if(1&t&&(f.ac(0,"span",102),f.Wc(1,Xe,6,3,"span",126),f.Zb()),2&t){const t=f.qc(2);f.Eb(1),f.xc("ngForOf",t.docsDc)}}function ti(t,e){if(1&t&&f.Vb(0,"img",138),2&t){const t=f.qc(2);f.xc("src",t.imgLink+t.getUserById(t.idPresiComite).image,f.Rc)("title","Pr\xe9sident du comit\xe9 : "+t.getUserById(t.idPresiComite).nom)}}function ei(t,e){if(1&t&&f.Vb(0,"img",138),2&t){const t=e.$implicit,c=f.qc(2);var i;const a=c.imgLink+(null==(i=c.getUserById(t))?null:i.image);var n;const o="Membre du comit\xe9 : "+(null==(n=c.getUserById(t))?null:n.nom);f.xc("src",a,f.Rc)("title",o)}}function ii(t,e){if(1&t&&f.Vb(0,"img",139),2&t){const t=e.$implicit,c=f.qc(2);var i;const a=c.imgLink+(null==(i=c.getUserById(t))?null:i.image);var n;const o=null==(n=c.getUserById(t))?null:n.nom;f.xc("src",a,f.Rc)("title",o)}}function ni(t,e){if(1&t&&f.Vb(0,"img",139),2&t){const t=e.$implicit,i=f.qc(2);f.xc("src",i.imgLink+"exemple.jpg",f.Rc)("title",t)}}function ci(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"button",140),f.mc("click",(function(){return f.Oc(t),f.qc(2).createNewPv()})),f.ac(2,"mat-icon"),f.Yc(3,"create"),f.Zb(),f.Zb(),f.ac(4,"button",141),f.mc("click",(function(){return f.Oc(t),f.qc(),f.Kc(114).click()})),f.ac(5,"mat-icon"),f.Yc(6,"file_upload"),f.Zb(),f.Zb(),f.Zb()}}function ai(t,e){if(1&t){const t=f.bc();f.ac(0,"button",137),f.mc("click",(function(){return f.Oc(t),f.qc(3),f.Kc(114).click()})),f.ac(1,"mat-icon"),f.Yc(2,"add"),f.Zb(),f.Zb()}}function oi(t,e){if(1&t){const t=f.bc();f.ac(0,"span",127),f.ac(1,"mat-icon",128),f.Yc(2," insert_drive_file"),f.Zb(),f.ac(3,"mat-icon",129),f.mc("click",(function(){f.Oc(t);const i=e.index;return f.qc(3).deletePv(i)})),f.Yc(4,"cancel"),f.Zb(),f.Wc(5,ai,3,0,"button",136),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("title","Supprimer "+t[0]),f.Eb(2),f.xc("ngIf",i==n.docsPv.length-1)}}function ri(t,e){if(1&t&&(f.ac(0,"span",102),f.Wc(1,oi,6,3,"span",126),f.Zb()),2&t){const t=f.qc(2);f.Eb(1),f.xc("ngForOf",t.docsPv)}}function si(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"span",127),f.ac(2,"mat-icon",142),f.Yc(3,"assignment"),f.Zb(),f.ac(4,"mat-icon",143),f.mc("click",(function(){return f.Oc(t),f.qc(2).deletCreationPv()})),f.Yc(5,"cancel "),f.Zb(),f.ac(6,"button",144),f.ac(7,"mat-icon"),f.Yc(8,"create"),f.Zb(),f.Zb(),f.Zb(),f.Zb()}}function li(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-expansion-panel",82),f.ac(1,"mat-expansion-panel-header",83),f.ac(2,"mat-panel-title",84),f.ac(3,"p"),f.Wc(4,Ve,2,0,"span",85),f.Wc(5,_e,2,0,"span",85),f.Yc(6," inventaire "),f.Zb(),f.Zb(),f.Vb(7,"mat-panel-description"),f.Zb(),f.ac(8,"form",86,87),f.ac(10,"div",88),f.Vb(11,"input",89),f.Zb(),f.ac(12,"p",2),f.ac(13,"span",90),f.Yc(14,"DATE D'INVENTAIRE"),f.Zb(),f.ac(15,"span",91),f.ac(16,"mat-form-field",92),f.ac(17,"mat-label"),f.Yc(18,"Date"),f.Zb(),f.Vb(19,"input",93),f.Vb(20,"mat-datepicker-toggle",94),f.Vb(21,"mat-datepicker",null,95),f.Zb(),f.Zb(),f.Zb(),f.Vb(23,"hr"),f.ac(24,"p",2),f.ac(25,"span",90),f.Yc(26,"PERIODE DE COMPTAGE"),f.Zb(),f.ac(27,"span",91),f.ac(28,"mat-form-field",92),f.ac(29,"mat-label"),f.Yc(30,"D\xe9but"),f.Zb(),f.Vb(31,"input",96),f.Vb(32,"mat-datepicker-toggle",94),f.Vb(33,"mat-datepicker",null,97),f.Zb(),f.Zb(),f.ac(35,"span",91),f.ac(36,"mat-form-field",92),f.ac(37,"mat-label"),f.Yc(38,"Fin"),f.Zb(),f.Vb(39,"input",98),f.Vb(40,"mat-datepicker-toggle",94),f.Vb(41,"mat-datepicker",null,99),f.Wc(43,We,2,0,"mat-error",85),f.Zb(),f.Zb(),f.Zb(),f.Vb(44,"hr"),f.ac(45,"p",100),f.ac(46,"span",101),f.Yc(47,"LOCALITES"),f.Zb(),f.ac(48,"span",102),f.Wc(49,Ue,3,1,"button",103),f.ac(50,"button",104),f.ac(51,"mat-icon"),f.Yc(52,"add"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Vb(53,"hr"),f.ac(54,"p",100),f.ac(55,"span",101),f.Yc(56,"INSTRUCTIONS D'INVENTAIRE"),f.Zb(),f.Wc(57,Be,9,0,"span",105),f.Wc(58,je,4,1,"span",105),f.Wc(59,Ke,9,0,"span",105),f.Zb(),f.Vb(60,"hr"),f.ac(61,"p",100),f.ac(62,"span",101),f.Yc(63,"DECISION DE CREATION DU COMITE"),f.Zb(),f.Wc(64,He,4,0,"span",105),f.Wc(65,Qe,2,1,"span",105),f.ac(66,"input",106,107),f.mc("change",(function(e){return f.Oc(t),f.qc().handleFileInputDc(e.target.files)})),f.Zb(),f.Zb(),f.Vb(68,"hr"),f.ac(69,"p",100),f.ac(70,"span",101),f.Yc(71,"COMITE D'INVENTAIRE"),f.Zb(),f.ac(72,"span",102),f.Wc(73,ti,1,2,"img",108),f.Wc(74,ei,1,2,"img",109),f.ac(75,"button",110),f.mc("click",(function(){return f.Oc(t),f.qc().openComModal()})),f.ac(76,"mat-icon"),f.Yc(77,"add"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Vb(78,"hr"),f.ac(79,"p",100),f.ac(80,"span",101),f.Yc(81,"REUNION DE LANCEMENT"),f.Zb(),f.ac(82,"span",91),f.ac(83,"mat-form-field",92),f.ac(84,"mat-label"),f.Yc(85,"Lieu"),f.Zb(),f.Vb(86,"input",111),f.ac(87,"mat-icon",112),f.Yc(88,"room"),f.Zb(),f.Zb(),f.Zb(),f.ac(89,"span",91),f.ac(90,"mat-form-field",92),f.ac(91,"mat-label"),f.Yc(92,"Date"),f.Zb(),f.Vb(93,"input",113),f.Vb(94,"mat-datepicker-toggle",94),f.Vb(95,"mat-datepicker",null,114),f.Zb(),f.Zb(),f.Zb(),f.Vb(97,"hr"),f.ac(98,"div",100),f.ac(99,"span",101),f.Yc(100,"PRESENTS A LA REUNION"),f.Zb(),f.ac(101,"span",102),f.Wc(102,ii,1,2,"img",115),f.Wc(103,ni,1,2,"img",115),f.ac(104,"button",116),f.mc("click",(function(){return f.Oc(t),f.qc().openPresModal()})),f.ac(105,"mat-icon"),f.Yc(106,"add"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Vb(107,"hr"),f.ac(108,"p",100),f.ac(109,"span",101),f.Yc(110,"PV DE LA REUNION"),f.Zb(),f.Wc(111,ci,7,0,"span",105),f.Wc(112,ri,2,1,"span",105),f.ac(113,"input",117,118),f.mc("change",(function(e){return f.Oc(t),f.qc().handleFileInputPv(e.target.files)})),f.Zb(),f.Wc(115,si,9,0,"span",105),f.Zb(),f.Zb(),f.ac(116,"mat-action-row"),f.ac(117,"button",119),f.mc("click",(function(){f.Oc(t);const e=f.qc();return e.onEditSave(e.editForm)})),f.Yc(118,"Enregistrer"),f.Zb(),f.ac(119,"button",120),f.mc("click",(function(){return f.Oc(t),f.qc().off()})),f.Yc(120,"Annuler"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=f.Kc(22),e=f.Kc(34),a=f.Kc(42),o=f.Kc(96),r=f.qc();var i;const s=f.Bc(31,ze,(null==(i=r.noNull(r.tabLoc))?null:i.length)>0);var n;const l=f.Bc(33,ze,(null==(n=r.noNull(r.tabComite.value))?null:n.length)>0);var c;const d=f.Bc(35,ze,(null==(c=r.noNull(r.tabOtherPresent.value))?null:c.length)>0);f.Eb(4),f.xc("ngIf",0==r.editForm.get("id").value),f.Eb(1),f.xc("ngIf",0!=r.editForm.get("id").value),f.Eb(3),f.xc("formGroup",r.editForm),f.Eb(11),f.xc("matDatepicker",t),f.Eb(1),f.xc("for",t),f.Eb(11),f.xc("matDatepicker",e),f.Eb(1),f.xc("for",e),f.Eb(7),f.xc("matDatepicker",a),f.Eb(1),f.xc("for",a),f.Eb(3),f.xc("ngIf",r.editForm.get("fin").hasError("diffDate")),f.Eb(6),f.xc("ngForOf",r.firstSub(r.noNull(r.tabLoc))),f.Eb(1),f.xc("ngClass",s),f.Eb(7),f.xc("ngIf",!(r.invCreer||r.instructions&&0!=r.instructions.length)),f.Eb(1),f.xc("ngIf",r.instructions&&r.instructions.length>0&&!r.invCreer),f.Eb(1),f.xc("ngIf",r.invCreer),f.Eb(5),f.xc("ngIf",!r.docsDc||0==r.docsDc.length),f.Eb(1),f.xc("ngIf",r.docsDc&&r.docsDc.length>0),f.Eb(8),f.xc("ngIf",r.getUserById(r.idPresiComite)),f.Eb(1),f.xc("ngForOf",r.noNull(r.tabComite.value)),f.Eb(1),f.xc("ngClass",l)("disabled",0==r.users.length),f.Eb(18),f.xc("matDatepicker",o),f.Eb(1),f.xc("for",o),f.Eb(8),f.xc("ngForOf",r.noNull(r.tabPresents.value)),f.Eb(1),f.xc("ngForOf",r.noNull(r.tabOtherPresent.value)),f.Eb(1),f.xc("ngClass",d)("disabled",0==r.users.length),f.Eb(7),f.xc("ngIf",!(r.pvCreer||r.docsPv&&0!=r.docsPv.length)),f.Eb(1),f.xc("ngIf",!r.pvCreer&&r.docsPv&&r.docsPv.length>0),f.Eb(3),f.xc("ngIf",r.pvCreer),f.Eb(2),f.xc("disabled",r.editForm.invalid)}}function di(t,e){if(1&t&&(f.ac(0,"span"),f.Yc(1),f.rc(2,"date"),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.ad(" au ",f.tc(2,1,t.dateInv,"dd/MM/yyyy")," ")}}function ui(t,e){if(1&t){const t=f.bc();f.ac(0,"div",165),f.ac(1,"mat-icon",166),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().updateOne(e)})),f.Yc(2,"edit"),f.Zb(),f.ac(3,"mat-icon",167),f.Yc(4,"delete"),f.Zb(),f.Zb()}}function bi(t,e){1&t&&(f.ac(0,"span"),f.Yc(1,"Aucune localit\xe9 n'a \xe9t\xe9 ajout\xe9e"),f.Zb())}function mi(t,e){if(1&t){const t=f.bc();f.ac(0,"button",168),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().detailsLoc(e)}))("mouseover",(function(){f.Oc(t);const i=e.$implicit;return f.qc(2).overLoc(i)}))("mouseout",(function(){return f.Oc(t),f.qc(2).outHoverLZS()})),f.ac(1,"mat-icon"),f.Yc(2,"room"),f.Zb(),f.Zb()}2&t&&f.xc("title",e.$implicit.nom)}function pi(t,e){1&t&&(f.ac(0,"span",102),f.Yc(1,"Aucune instruction n'a \xe9t\xe9 ajout\xe9e"),f.Zb())}function hi(t,e){if(1&t){const t=f.bc();f.ac(0,"span"),f.ac(1,"mat-icon",170),f.mc("click",(function(){return f.Oc(t),f.Kc(4).click()})),f.Yc(2," insert_drive_file"),f.Zb(),f.ac(3,"a",171,172),f.Yc(5,"open"),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("href",i.docLink+t[1],f.Rc)("download",t[0])}}function gi(t,e){if(1&t&&(f.ac(0,"span",102),f.Wc(1,hi,6,3,"span",169),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.xc("ngForOf",t.instruction)}}function fi(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"span"),f.ac(2,"mat-icon",173),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().generatePdf(e.instruction,0)})),f.Yc(3,"assignment "),f.Zb(),f.Zb(),f.Zb()}}function vi(t,e){1&t&&(f.ac(0,"span",102),f.Yc(1,"Aucune d\xe9cision n'a \xe9t\xe9 ajout\xe9e"),f.Zb())}function Ei(t,e){if(1&t){const t=f.bc();f.ac(0,"span"),f.ac(1,"mat-icon",170),f.mc("click",(function(){return f.Oc(t),f.Kc(4).click()})),f.Yc(2," insert_drive_file"),f.Zb(),f.ac(3,"a",171,174),f.Yc(5,"open"),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("href",i.docLink+t[1],f.Rc)("download",t[0])}}function xi(t,e){if(1&t&&(f.ac(0,"span",102),f.Wc(1,Ei,6,3,"span",169),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.xc("ngForOf",t.decisionCC)}}function Zi(t,e){1&t&&(f.ac(0,"span",175),f.Yc(1,"Membres du comit\xe9 non d\xe9finis"),f.Zb())}function Ii(t,e){if(1&t&&f.Vb(0,"img",176),2&t){const t=f.qc().$implicit,e=f.qc();f.xc("src",e.imgLink+t.presiComite.image,f.Rc)("title","Pr\xe9sident du comit\xe9 : "+t.presiComite.nom)}}function Ci(t,e){if(1&t&&(f.ac(0,"span",177),f.Vb(1,"img",178),f.ac(2,"small"),f.Yc(3),f.Zb(),f.ac(4,"small",179),f.Yc(5,"Pr\xe9sident"),f.Zb(),f.Zb()),2&t){const t=f.qc().$implicit,e=f.qc();f.Eb(1),f.xc("src",e.imgLink+t.presiComite.image,f.Rc)("title","Pr\xe9sident du comit\xe9 : "+t.presiComite.nom),f.Eb(2),f.Zc(e.longText(t.presiComite.nom,18))}}function Si(t,e){if(1&t&&f.Vb(0,"img",176),2&t){const t=e.$implicit,i=f.qc(2);f.xc("src",i.imgLink+t.image,f.Rc)("title","Membre du comit\xe9 : "+t.nom)}}function Oi(t,e){if(1&t&&(f.ac(0,"span",177),f.Vb(1,"img",180),f.ac(2,"small"),f.Yc(3),f.Zb(),f.ac(4,"small",179),f.Yc(5,"Membre"),f.Zb(),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.Eb(1),f.xc("src",i.imgLink+t.image,f.Rc)("title","Membre du comit\xe9 : "+t.nom),f.Eb(2),f.Zc(i.longText(t.nom,18))}}function yi(t,e){1&t&&(f.ac(0,"span",175),f.Yc(1,"Membres pr\xe9sents \xe0 la r\xe9union de lancement non d\xe9finis"),f.Zb())}function wi(t,e){if(1&t&&f.Vb(0,"img",181),2&t){const t=e.$implicit,i=f.qc(2);f.xc("src",i.imgLink+t.image,f.Rc)("title",t.nom)}}function ki(t,e){if(1&t&&(f.ac(0,"span",177),f.Vb(1,"img",180),f.ac(2,"small"),f.Yc(3),f.Zb(),f.ac(4,"small",182),f.Yc(5),f.Zb(),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.Eb(1),f.xc("src",i.imgLink+t.image,f.Rc)("title",t.nom),f.Eb(2),f.Zc(i.longText(t.nom,18)),f.Eb(1),f.xc("title",t.poste),f.Eb(1),f.Zc(i.longText(t.poste,18))}}function Li(t,e){if(1&t&&f.Vb(0,"img",181),2&t){const t=e.$implicit,i=f.qc(2);f.xc("src",i.imgLink+"exemple.jpg",f.Rc)("title",t)}}function Mi(t,e){if(1&t&&(f.ac(0,"span",177),f.Vb(1,"img",180),f.ac(2,"small"),f.Yc(3),f.Zb(),f.ac(4,"small",179),f.Yc(5,"Autre participant"),f.Zb(),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.Eb(1),f.xc("src",i.imgLink+"exemple.jpg",f.Rc)("title",t),f.Eb(2),f.Zc(i.longText(t,18))}}function Pi(t,e){1&t&&(f.ac(0,"span",102),f.Yc(1,"Aucun pv n'a \xe9t\xe9 ajout\xe9"),f.Zb())}function qi(t,e){if(1&t){const t=f.bc();f.ac(0,"span"),f.ac(1,"mat-icon",170),f.mc("click",(function(){return f.Oc(t),f.Kc(4).click()})),f.Yc(2,"insert_drive_file "),f.Zb(),f.ac(3,"a",183,184),f.Yc(5,"open"),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc(3);f.Eb(1),f.xc("title",t[0]),f.Eb(2),f.xc("href",i.docLink+t[1],f.Rc)}}function Fi(t,e){if(1&t&&(f.ac(0,"span",102),f.Wc(1,qi,6,2,"span",169),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.xc("ngForOf",t.pvReunion)}}function Di(t,e){if(1&t){const t=f.bc();f.ac(0,"span",102),f.ac(1,"span"),f.ac(2,"mat-icon",185),f.mc("click",(function(){f.Oc(t);const e=f.qc().$implicit;return f.qc().generatePdf(e.pvReunion,1)})),f.Yc(3,"assignment"),f.Zb(),f.Zb(),f.Zb()}}const Ri=function(t){return{"pt-3":t}},Ni=function(t){return{"pt-4":t}},Yi=function(t){return{"pt-5":t}},Ai=function(t,e){return{"pt-5":t,"pt-1":e}};function Ti(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-expansion-panel",145),f.mc("opened",(function(){f.Oc(t);const i=e.$implicit;return f.qc().idCurrentInv=i.id})),f.ac(1,"mat-expansion-panel-header",146,147),f.mc("click",(function(){return f.Oc(t),f.Kc(2)._toggle()})),f.ac(3,"mat-panel-title",148),f.mc("click",(function(){return f.Oc(t),f.Kc(2)._toggle()})),f.ac(4,"p"),f.Yc(5," Inventaire "),f.Wc(6,di,3,4,"span",85),f.Zb(),f.Zb(),f.ac(7,"mat-panel-description",149),f.Wc(8,ui,5,0,"div",150),f.Zb(),f.Zb(),f.ac(9,"div",151),f.ac(10,"p",152),f.ac(11,"span",153),f.Yc(12,"DATE D'INVENTAIRE"),f.Zb(),f.ac(13,"span",154),f.Yc(14),f.rc(15,"date"),f.Zb(),f.Zb(),f.Vb(16,"hr"),f.ac(17,"p",152),f.ac(18,"span",153),f.Yc(19,"PERIODE DE COMPTAGE"),f.Zb(),f.ac(20,"span",154),f.Yc(21),f.rc(22,"date"),f.Zb(),f.ac(23,"span",154),f.Yc(24),f.rc(25,"date"),f.Zb(),f.Zb(),f.Vb(26,"hr"),f.ac(27,"p",100),f.ac(28,"span",155),f.Yc(29,"LOCALITES"),f.Zb(),f.ac(30,"span",102),f.Wc(31,bi,2,0,"span",85),f.Wc(32,mi,3,1,"button",156),f.Zb(),f.Zb(),f.Vb(33,"hr"),f.ac(34,"p",100),f.ac(35,"span",155),f.Yc(36,"INSTRUCTIONS D'INVENTAIRE"),f.Zb(),f.Wc(37,pi,2,0,"span",105),f.Wc(38,gi,2,1,"span",105),f.Wc(39,fi,4,0,"span",105),f.Zb(),f.Vb(40,"hr"),f.ac(41,"p",100),f.ac(42,"span",155),f.Yc(43,"DECISION DE CREATION DU COMITE"),f.Zb(),f.Wc(44,vi,2,0,"span",105),f.Wc(45,xi,2,1,"span",105),f.Zb(),f.Vb(46,"hr"),f.ac(47,"p",100),f.ac(48,"span",155),f.Yc(49,"COMITE D'INVENTAIRE"),f.Zb(),f.ac(50,"span",157),f.Wc(51,Zi,2,0,"span",158),f.Wc(52,Ii,1,2,"img",159),f.Wc(53,Ci,6,3,"span",160),f.Wc(54,Si,1,2,"img",161),f.Wc(55,Oi,6,3,"span",162),f.Zb(),f.Zb(),f.Vb(56,"hr"),f.ac(57,"p",100),f.ac(58,"span",153),f.Yc(59,"REUNION DE LANCEMENT"),f.Zb(),f.ac(60,"span",154),f.Yc(61),f.Zb(),f.ac(62,"span",154),f.Yc(63),f.rc(64,"date"),f.Zb(),f.Zb(),f.Vb(65,"hr"),f.ac(66,"div",100),f.ac(67,"span",155),f.Yc(68,"PRESENTS A LA REUNION"),f.Zb(),f.ac(69,"span",157),f.Wc(70,yi,2,0,"span",158),f.Wc(71,wi,1,2,"img",163),f.Wc(72,ki,6,5,"span",164),f.Wc(73,Li,1,2,"img",163),f.Wc(74,Mi,6,3,"span",164),f.Zb(),f.Zb(),f.Vb(75,"hr"),f.ac(76,"p",100),f.ac(77,"span",155),f.Yc(78,"PV DE LA REUNION"),f.Zb(),f.Wc(79,Pi,2,0,"span",105),f.Wc(80,Fi,2,1,"span",105),f.Wc(81,Di,4,0,"span",105),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.xc("hidden",n.showForm)("expanded",t.id===n.idCurrentInv||0==n.idCurrentInv&&0==i),f.Eb(6),f.xc("ngIf",t.dateInv),f.Eb(2),f.xc("ngIf",!n.securityServ.superviseurAdjoint),f.Eb(6),f.ad("",f.tc(15,35,t.dateInv,"dd/MM/yyyy")," "),f.Eb(7),f.ad("Du : ",f.tc(22,38,t.debut,"dd/MM/yyyy")," "),f.Eb(3),f.ad("Au : ",f.tc(25,41,t.fin,"dd/MM/yyyy"),""),f.Eb(4),f.xc("ngClass",f.Bc(47,Ri,t.localites&&t.localites.length>0)),f.Eb(3),f.xc("ngIf",!t.localites||t.localites&&0==t.localites.length),f.Eb(1),f.xc("ngForOf",n.firstSub(t.localites)),f.Eb(3),f.xc("ngClass",f.Bc(49,Ni,t.instruction&&t.instruction.length>0)),f.Eb(2),f.xc("ngIf",!t.instruction||0==t.instruction.length),f.Eb(1),f.xc("ngIf",t.instruction&&t.instruction.length>0&&"creation"!=t.localInstructionPv[0]),f.Eb(1),f.xc("ngIf",t.instruction&&t.instruction.length>0&&"creation"==t.localInstructionPv[0]),f.Eb(3),f.xc("ngClass",f.Bc(51,Ri,t.decisionCC&&t.decisionCC.length>0)),f.Eb(2),f.xc("ngIf",!t.decisionCC||0==t.decisionCC.length),f.Eb(1),f.xc("ngIf",t.decisionCC&&t.decisionCC.length>0),f.Eb(3),f.xc("ngClass",f.Bc(53,Yi,t.presiComite||t.membresCom.length>0)),f.Eb(3),f.xc("ngIf",!t.presiComite&&0==t.membresCom.length),f.Eb(1),f.xc("ngIf",t.presiComite),f.Eb(1),f.xc("ngIf",t.presiComite),f.Eb(1),f.xc("ngForOf",t.membresCom),f.Eb(1),f.xc("ngForOf",t.membresCom),f.Eb(6),f.ad("Lieu : ",t.lieuReunion,""),f.Eb(2),f.ad("Date : ",f.tc(64,44,t.dateReunion,"dd/MM/yyyy"),""),f.Eb(4),f.xc("ngClass",f.Cc(55,Ai,t.presentsReunionOut.length>0||t.presentsReunion.length>0,0==t.presentsReunionOut.length&&0==t.presentsReunion.length)),f.Eb(3),f.xc("ngIf",0==t.presentsReunionOut.length&&0==t.presentsReunion.length),f.Eb(1),f.xc("ngForOf",t.presentsReunion),f.Eb(1),f.xc("ngForOf",t.presentsReunion),f.Eb(1),f.xc("ngForOf",t.presentsReunionOut),f.Eb(1),f.xc("ngForOf",t.presentsReunionOut),f.Eb(3),f.xc("ngClass",f.Bc(58,Ni,t.pvReunion&&t.pvReunion.length>0)),f.Eb(2),f.xc("ngIf",!t.pvReunion||t.pvReunion&&0==t.pvReunion.length),f.Eb(1),f.xc("ngIf",t.pvReunion&&t.pvReunion.length>0&&"creation"!=t.localInstructionPv[1]),f.Eb(1),f.xc("ngIf",t.pvReunion&&t.pvReunion.length>0&&"creation"==t.localInstructionPv[1])}}function Vi(t,e){if(1&t&&(f.ac(0,"mat-option",186),f.Yc(1),f.Zb()),2&t){const t=e.$implicit;f.xc("value",t.id),f.Eb(1),f.ad(" ",t.nom,"")}}function _i(t,e){if(1&t&&(f.ac(0,"mat-option",191),f.Yc(1),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.xc("value",t.id)("hidden",i.inTab(t.id,i.tabComite.value)),f.Eb(1),f.Zc(t.nom)}}function Wi(t,e){if(1&t){const t=f.bc();f.ac(0,"div",50),f.ac(1,"div",51),f.ac(2,"mat-form-field",187),f.ac(3,"mat-label"),f.Yc(4),f.Zb(),f.ac(5,"mat-select",188),f.Vb(6,"mat-option",29),f.Wc(7,_i,2,3,"mat-option",189),f.Zb(),f.Zb(),f.ac(8,"mat-icon",190),f.mc("click",(function(){return f.Oc(t),f.qc().addComMembre()})),f.Yc(9,"add_circle_outline "),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(4),f.ad("Membre ",i+1,""),f.Eb(1),f.xc("formControl",t),f.Eb(2),f.xc("ngForOf",n.users),f.Eb(1),f.xc("hidden",i!=n.tabComite.controls.length-1||!t.value)}}function Ui(t,e){if(1&t&&(f.ac(0,"mat-option",191),f.Yc(1),f.Zb()),2&t){const t=e.$implicit,i=f.qc(2);f.xc("value",t.id)("hidden",i.inTab(t.id,i.tabPresents.value)),f.Eb(1),f.Zc(t.nom)}}function Bi(t,e){if(1&t){const t=f.bc();f.ac(0,"div",50),f.ac(1,"div",51),f.ac(2,"mat-form-field",187),f.ac(3,"mat-label"),f.Yc(4),f.Zb(),f.ac(5,"mat-select",188),f.Vb(6,"mat-option",29),f.Wc(7,Ui,2,3,"mat-option",189),f.Zb(),f.Zb(),f.ac(8,"mat-icon",190),f.mc("click",(function(){return f.Oc(t),f.qc().addPresentMembre()})),f.Yc(9,"add_circle_outline "),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(4),f.ad("Participant ",i+1,""),f.Eb(1),f.xc("formControl",t),f.Eb(2),f.xc("ngForOf",n.users),f.Eb(1),f.xc("hidden",i!=n.tabPresents.controls.length-1||!t.value)}}function zi(t,e){if(1&t){const t=f.bc();f.ac(0,"div",50),f.ac(1,"div",51),f.ac(2,"mat-form-field",187),f.ac(3,"mat-label"),f.Yc(4,"Autre participant"),f.Zb(),f.Vb(5,"input",192),f.ac(6,"mat-icon",112),f.Yc(7,"face"),f.Zb(),f.Zb(),f.ac(8,"mat-icon",190),f.mc("click",(function(){return f.Oc(t),f.qc().addOtherPres()})),f.Yc(9,"add_circle_outline "),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(5),f.xc("formControl",t),f.Eb(3),f.xc("hidden",i!=n.tabOtherPresent.controls.length-1||!t.value)}}const Gi=function(t){return{"mt-3":t}};function $i(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-chip",193),f.ac(1,"span",194),f.ac(2,"section",195),f.ac(3,"mat-checkbox",196),f.mc("change",(function(){f.Oc(t);const i=e.$implicit;return f.qc().checkLoc(i)})),f.Yc(4),f.Zb(),f.Zb(),f.Zb(),f.ac(5,"span",197),f.ac(6,"mat-icon",198),f.mc("click",(function(){f.Oc(t);const i=e.$implicit;return f.qc().openFirst(i.id)})),f.Yc(7,"remove_red_eye"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.xc("ngClass",f.Bc(4,Gi,0!=i)),f.Eb(3),f.xc("disabled",!n.showForm)("checked",n.isChecked(t.id)),f.Eb(1),f.ad(" ",t.nom,"")}}function ji(t,e){if(1&t){const t=f.bc();f.ac(0,"mat-chip",193),f.ac(1,"span",194),f.ac(2,"section",195),f.ac(3,"mat-checkbox",196),f.mc("change",(function(){f.Oc(t);const i=e.$implicit;return f.qc(2).checkLoc(i)})),f.Yc(4),f.Zb(),f.Zb(),f.Zb(),f.ac(5,"span",197),f.ac(6,"mat-icon",198),f.mc("click",(function(){f.Oc(t);const i=e.$implicit,n=f.qc().index;return f.qc().openOther(n+1,i.id)})),f.Yc(7,"remove_red_eye"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=f.qc().index,n=f.qc();f.xc("ngClass",f.Bc(4,Gi,0!=i)),f.Eb(3),f.xc("disabled",!n.showForm)("checked",n.isChecked(t.id)),f.Eb(1),f.ad("",t.nom," ")}}function Ki(t,e){1&t&&(f.ac(0,"p",204),f.Yc(1,"Cette subdivision est vide "),f.Zb())}function Hi(t,e){if(1&t&&(f.ac(0,"div",199),f.ac(1,"p",200),f.Yc(2),f.Zb(),f.Vb(3,"hr"),f.ac(4,"mat-chip-list",201),f.ac(5,"small",202),f.Yc(6),f.Zb(),f.Wc(7,ji,8,6,"mat-chip",43),f.Zb(),f.Wc(8,Ki,2,0,"p",203),f.Zb()),2&t){const t=e.$implicit,n=e.index,c=f.qc();var i;f.xc("hidden",!c.openLocalite||!c.getOneLocById(t)),f.Eb(2),f.Zc(null==(i=c.getOneLocById(t))?null:i.nom),f.Eb(4),f.Zc(c.subdivisions[n+1]),f.Eb(1),f.xc("ngForOf",c.getCurrentSubById(t)),f.Eb(1),f.xc("ngIf",0==c.getCurrentSubById(t).length)}}function Ji(t,e){if(1&t){const t=f.bc();f.ac(0,"div",205),f.ac(1,"div",154),f.ac(2,"section",206),f.ac(3,"mat-checkbox",207),f.mc("change",(function(){return f.Oc(t),f.qc().checkAllLoc()})),f.Yc(4," Toutes les localit\xe9s"),f.Zb(),f.Zb(),f.Zb(),f.Vb(5,"div",208),f.ac(6,"button",209),f.mc("click",(function(){return f.Oc(t),f.qc().closeLoc()})),f.Yc(7,"Fermer"),f.Zb(),f.Zb()}if(2&t){const t=f.qc();f.Eb(3),f.xc("checked",t.allLocIsChec())}}function Xi(t,e){1&t&&f.Yc(0,"TRAVAUX PREPARATOIRES")}function Qi(t,e){1&t&&f.Yc(0,"TRAVAUX D'INVENTAIRE")}function tn(t,e){1&t&&f.Yc(0,"TRAVAUX POST-INVENTAIRE")}function en(t,e){1&t&&f.Yc(0,"SIGNATAIRES")}function nn(t,e){if(1&t){const t=f.bc();f.ac(0,"div",210),f.ac(1,"div",211),f.ac(2,"mat-form-field",27),f.ac(3,"mat-label"),f.Yc(4,"Nom du signataire"),f.Zb(),f.Vb(5,"input",192),f.Zb(),f.Zb(),f.ac(6,"div",211),f.ac(7,"mat-form-field",27),f.ac(8,"mat-label"),f.Yc(9,"Fonction"),f.Zb(),f.Vb(10,"input",212),f.Zb(),f.Zb(),f.ac(11,"mat-icon",213),f.mc("click",(function(){return f.Oc(t),f.qc().addSignataire()})),f.Yc(12," add_circle_outline "),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(5),f.xc("formControl",t.controls.nom),f.Eb(5),f.xc("formControl",t.controls.fonction),f.Eb(1),f.xc("hidden",i!=n.tabSignataires.length-1)}}function cn(t,e){if(1&t){const t=f.bc();f.ac(0,"div",214),f.ac(1,"div",75),f.ac(2,"mat-form-field",59),f.ac(3,"mat-label"),f.Yc(4,"Titre"),f.Zb(),f.Vb(5,"input",192),f.Zb(),f.ac(6,"mat-icon",215),f.mc("click",(function(){return f.Oc(t),f.qc().addDeliberation()})),f.Yc(7,"add_circle_outline "),f.Zb(),f.Zb(),f.ac(8,"div",75),f.ac(9,"mat-form-field",27),f.ac(10,"mat-label"),f.Yc(11),f.Zb(),f.Vb(12,"textarea",216),f.Zb(),f.ac(13,"mat-icon",58),f.Yc(14," info_outline"),f.Zb(),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(5),f.xc("formControl",t.controls.titre),f.Eb(1),f.xc("hidden",i!=n.tabDeliberation.length-1),f.Eb(5),f.ad("D\xc9LIBERATION ",i+1,""),f.Eb(1),f.xc("formControl",t.controls.content),f.Eb(1),f.xc("title",n.getCommentDel(i))}}function an(t,e){if(1&t){const t=f.bc();f.ac(0,"div",217),f.ac(1,"div",218),f.ac(2,"mat-form-field",27),f.ac(3,"mat-label"),f.Yc(4,"Nom du signataire"),f.Zb(),f.Vb(5,"input",192),f.Zb(),f.Zb(),f.ac(6,"div",219),f.ac(7,"mat-form-field",27),f.ac(8,"mat-label"),f.Yc(9,"Fonction"),f.Zb(),f.Vb(10,"input",212),f.Zb(),f.Zb(),f.ac(11,"mat-icon",220),f.mc("click",(function(){return f.Oc(t),f.qc().addSignatairePv()})),f.Yc(12,"add_circle_outline "),f.Zb(),f.Zb()}if(2&t){const t=e.$implicit,i=e.index,n=f.qc();f.Eb(5),f.xc("formControl",t.controls.nom),f.Eb(5),f.xc("formControl",t.controls.fonction),f.Eb(1),f.xc("hidden",i!=n.tabSignatairesPv.length-1)}}ye.a.vfs=ke.a.pdfMake.vfs;let on=(()=>{class t{constructor(t,e,i,n,c,a,o,r){this.fb=t,this._snackBar=e,this.dialog=i,this.adminServ=n,this.sharedService=c,this.securityServ=a,this.modalService=o,this.inventaireServ=r,this.fonctionIns="",this.nomIns="",this.isLinear=!1,this.imgLink="",this.docLink="",this.inventaires=[],this.idCurrentInv=0,this.show=!1,this.idPresiComite=0,this.instructions=[],this.docsPv=[],this.docsDc=[],this.tabComite=new m.d([]),this.tabPresents=new m.d([]),this.tabOtherPresent=new m.d([]),this.presidents=[],this.membresComite=[],this.users=[],this.myId="",this.entreprises=[],this.localites=[],this.idCurrentEse=0,this.showForm=!1,this.tabLoc=[],this.comments=[],this.commentsPv=[],this.invCreer=!1,this.pvCreer=!1,this.tabDeliberation=new m.d([]),this.urlInst="",this.urlPv="",this.locHover=null,this.zoneHover=null,this.szHover=null,this.entreprise=null,this.signatairesPv=[],this.signPvCtrl=new m.f,this.separatorKeysCodes=[s.g,s.c],this.signatairesInst=[],this.signInstCtrl=new m.f,this.signInstFunctionCtrl=new m.f,this.subdivisions=[],this.tabOpen=[],this.openLocalite=null,this.titleAdd="Ajouter un inventaire",this.tabSignataires=new m.d([]),this.tabSignatairesPv=new m.d([]),this.titleAdd=this.securityServ.superviseurAdjoint?"Demandez au superviseur g\xe9n\xe9ral de cr\xe9er l'inventaire":"Ajouter un inventaire",this.imgLink=this.sharedService.baseUrl+"/images/",this.docLink=this.sharedService.baseUrl+"/documents/"}ngOnInit(){this.myId=localStorage.getItem("idUser"),this.securityServ.showLoadingIndicatior.next(!0),this.initForm(),this.initInstrucForm(),this.comments=this.getCommentInst(),this.initPvForm(),this.commentsPv=this.getCommentPv(),this.getOneEntreprise(),this.addFuctionSign=this.fb.group({functionSign:["",[m.x.required]]})}getOneEntreprise(){const t=localStorage.getItem("currentEse");this.adminServ.getOneEntreprise(t).then(t=>{var e,i;let n=t;n&&(this.idCurrentEse=n.id,this.localites=t.localites,this.getUsers(t.users),this.getInventaireByEse(),this.subdivisions=(null==n?void 0:n.subdivisions)?null==n?void 0:n.subdivisions:[],0==(null===(e=this.tabOpen)||void 0===e?void 0:e.length)&&(null===(i=this.subdivisions)||void 0===i||i.forEach(t=>this.tabOpen.push(0)))),this.entreprise=t},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}getInventaireByEse(t=!1){this.inventaireServ.getInventaireByEse(this.idCurrentEse).then(e=>{this.securityServ.showLoadingIndicatior.next(!1);let i=e;i&&i.length>0&&(i=e.reverse(),t&&(this.idCurrentInv=i[0].id)),this.inventaires=i,this.show=!0},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}addNew(){var t;this.showForm=!0,this.idPresiComite=0,this.instructions=[],this.docsPv=[],this.docsDc=[],this.tabComite=new m.d([]),this.tabPresents=new m.d([]),this.tabOtherPresent=new m.d([]),this.tabLoc=[],this.tabDeliberation=new m.d([]),this.pvCreer=!1,this.invCreer=!1,this.signatairesPv=[],this.signatairesInst=[],this.tabOpen=[],null===(t=this.subdivisions)||void 0===t||t.forEach(t=>this.tabOpen.push(0)),this.initForm()}updateOne(t){var e;if(this.showForm=!0,this.idPresiComite=null===(e=t.presiComite)||void 0===e?void 0:e.id,this.instructions=t.instruction,this.docsPv=t.pvReunion,this.docsDc=t.decisionCC,this.tabComite=new m.d([]),t.membresCom.forEach(t=>this.addComMembre(t.id)),0==this.tabComite.length&&this.addComMembre(),this.tabPresents=new m.d([]),t.presentsReunion.forEach(t=>this.addPresentMembre(t.id)),0==this.tabPresents.length&&this.addPresentMembre(),this.tabOtherPresent=new m.d([]),t.presentsReunionOut.forEach(t=>this.addOtherPres(t)),0==this.tabOtherPresent.length&&this.addOtherPres(),this.tabLoc=[],t.localites.forEach(t=>this.tabLoc.push(this.getOneLocById(t.id))),this.invCreer=!1,"creation"==t.localInstructionPv[0]&&(this.invCreer=!0,this.initInstrucForm(t.instruction)),this.pvCreer=!1,"creation"==t.localInstructionPv[1]){this.pvCreer=!0;let e=t.pvReunion;this.tabDeliberation=new m.d([]),e[1].forEach(t=>this.addDeliberation(t[0],t[1])),this.initPvForm([e[0][0],e[0][1],e[0][2],e[0][3]?e[0][3]:[]]),0==this.tabDeliberation.length&&this.addDeliberation()}this.initForm(t)}initForm(t={id:0,dateInv:(new Date).getFullYear()+"-12-31T00:00:00+00:00",debut:"",fin:"",lieuReunion:"",dateReunion:""}){this.editForm=this.fb.group({id:[t.id],dateInv:[t.dateInv],debut:[t.debut],fin:[t.fin],lieuReunion:[t.lieuReunion],dateReunion:[t.dateReunion]},{validator:this.valideDif("debut","fin")}),this.formDirective&&this.formDirective.resetForm()}initInstrucForm(t=[["","",""],["","",""],["","","",""],[]]){var e;this.instForm=this.fb.group({bloc1e1:[t[0][0]],bloc1e2:[t[0][1]],bloc1e3:[t[0][2]],bloc2e1:[t[1][0]],bloc2e2:[t[1][1]],bloc2e3:[t[1][2]],bloc3e1:[t[2][0]],bloc3e2:[t[2][1]],bloc3e3:[t[2][2]],bloc3e4:[t[2][3]]}),console.log(t[3]);const i=(null===(e=t[3])||void 0===e?void 0:e.length)>0?t[3]:["",""];this.tabSignataires=new m.d([]);for(let n=0;n<i.length;n+=2)this.addSignataire(i[n],i[n+1])}detailsLoc(t){var e;this.tabLoc=[],t.localites.forEach(t=>this.tabLoc.push(this.getOneLocById(t.id))),console.log(t.localites),null===(e=this.subdivisions)||void 0===e||e.forEach(t=>this.tabOpen.push(0))}initPvForm(t=["","","",[]]){var e;this.pvForm=this.fb.group({bloc1:[t[0]],bloc2:[t[1]],bloc3:[t[2]]}),this.tabSignatairesPv=new m.d([]);const i=(null===(e=t[3])||void 0===e?void 0:e.length)>0?t[3]:["",""];for(let n=0;n<i.length;n+=2)this.addSignatairePv(i[n],i[n+1]);this.signatairesPv=this.getSignatairePv(t[3])}getSignatairePv(t){return(null==t?void 0:t.length)>0?t:[]}getInstValDef(){return[["La r\xe9union de lancement de l'inventaire sera tenue le 20/12. Les points suivants seront abord\xe9s:\n - la composition des \xe9quipes;\n  - la m\xe9thode de comptage\u2026","ACQUISITIONS\nPour l'acquisition d'immobilisations, une demande d'achat initi\xe9e par le service demandeur. Cette demande est valid\xe9e par le Chef comptable. Ensuite, un Bon de Commande est \xe9tabli et sera sign\xe9 par le DAF et le DG. Apr\xe8s r\xe9ception de l'immobilisation, un code barre est g\xe9n\xe9r\xe9 et appos\xe9 sur l'immobilisation.\n\nCESSIONS\nToutes les sorties doivent faire l'objet d'un bon valid\xe9 par le Chef du magasin, le DAF et le DG.","Il faudra:\n - Editer le fichier des immobilisations\n - Faire une revue des postes  \n - Proc\xe9der aux r\xe9gularisations n\xe9cessaires devant permettre de s'assurer de l'exactitude des mouvements de l'ann\xe9e"],["Le Comit\xe9 d'inventaire est mis en place sera compos\xe9 de:\n- M. Path\xe9 Ndiaye (Pr\xe9sident);\n- Mme Isabelle Diouf (membre);\n- M. Saliou Ba (membre)\n\nIl devra:\n  - mettre en place toute la logistique n\xe9cessaire pour le d\xe9marrage effectif de l'inventaire physique \xe0 la date pr\xe9vue ( constitution et formation des \xe9quipes, mat\xe9riel n\xe9cessaire etc..);\n  - prendre toutes les dispositions pour l'organisation et la supervision de l'inventaire;\n  - valider les r\xe9sultats de l'inventaire et \xe9laborer un rapport d'inventaire.","1. MAGASIN\nLe rangement des magasins avec v\xe9rification des CODES se fera effectu\xe9 avant le 09/10. Le magasin est compos\xe9 de 2 d\xe9p\xf4ts.\n1.1. D\xe9p\xf4t 01\nLe d\xe9p\xf4t 01 sera divis\xe9 en 02 sous-zones de stockage :\n    - Sous-zone A : salle 1 et 2 (Equipe A)\n    - Sous-zone B : Cour ext\xe9rieure (Equipe A).\n1.2. D\xe9p\xf4t 02 \nLe d\xe9p\xf4t 02 sera divis\xe9 en 02 Sous-zones de stockage :\n - Sous-zone A : Showroom (Equipe B)\n    - Sous-zone B : salle des pi\xe8ces de rechange (Equipe B)\n\n2. ENTREPOT\nLe comptage sera effectu\xe9 par l'\xe9quipe C.","ORGANISATION\nLe rangement des magasins sera effectu\xe9 \xe0 partir du Mercredi 09/12.\nIl faudra s\u2019assurer que les \xe9tiquettes \xe0 code barre ont \xe9t\xe9 appos\xe9es sur toutes les immobilisations.\n\nCOMPTAGE\nLe fichier des immobilisations sera remis \xe0 chaque \xe9quipe. Des \xe9tiquettes (gommettes) de couleur bleue et un lecteur de codes seront aussi transmis \xe0 chaque chef d\u2019\xe9quipe. \n\nCONTROLE\nApr\xe8s le comptage, une autre \xe9quipe  passe pour le contr\xf4le en utilisant des \xe9tiquettes (gommettes) de couleur verte.\n\nANOMALIES\nEn cas de d\xe9saccord entre l\u2019\xe9quipe de comptage et de contr\xf4le, un comptage contradictoire sera pilot\xe9 par le comit\xe9 d\u2019inventaire (Etiquettes de couleur rouge)."],["Cette phase consistera \xe0 effectuer un rapprochement entre le fichier des immobilisations et les r\xe9sultats de l'inventaire et afin d'identifier:\n  - les immobilisations inscrites au fichier mais non inventori\xe9es (manquants d'inventaire);\n  - et les immobilisations inventori\xe9es mais non inscrites au fichier (sans num\xe9ro d'immatriculation et/ou sans \xe9tiquettes).\n\nLes \xe9carts constat\xe9s doivent faire l'objet de recherches compl\xe9mentaires, par les \xe9quipes de comptage, en vue de leur r\xe9sorption. S'agissant des articles recens\xe9s au cours de cet inventaire, mais non inscrits au fichier des immobilisations, il conviendra de les r\xe9pertorier sur un tableau s\xe9par\xe9. En outre, des dispositions devront \xeatre prises pour veiller \xe0 leur immatriculation diligente au fichier des immoblisations.","Les anomalies retrac\xe9es devront \xeatre analys\xe9es et corrig\xe9es, au plus le 15 janvier.","L'inventaire sera appouv\xe9 par le comit\xe9 d'inventaire.","Le dossier \xe0 constituer devra comporter les documents ci-apr\xe8s:\n- un proc\xe8s-verbal d'inventaire;\n- les annexes avant et apr\xe8s corrections"]]}getPvValDef(){return["L\u2019AN DEUX MILLE VINGT \nET LE 09 JUILLET A 08 HEURES 10 MINUTES","La r\xe9union de lancement de l'inventaire a \xe9t\xe9 tenue au si\xe8ge social sis \xe0 l'avenue Bourgui pour d\xe9lib\xe9rer sur l\u2019ordre du jour suivant :  \n1.\tInstructions d'inventaire\n2.\tPlanning de l'inventaire\n3.\tQuestions diverses.","Une feuille de pr\xe9sence a \xe9t\xe9 \xe9marg\xe9e en d\xe9but de s\xe9ance par chaque participant. \nEtaient pr\xe9sent : \n-\tM. Path\xe9 Ndiaye (Pr\xe9sident du comit\xe9),\u2026","Les instructions d'inventaire ont \xe9t\xe9 transmises \xe0 tous les intervenants. Ces derniers ont attest\xe9 avoir pris connaissance de celles-ci."]}getCommentInst(){return[["Commentaire :\n - Indiquer la date de r\xe9union\n - Pr\xe9ciser les points qui seront trait\xe9s lors de la r\xe9union\n-  S'assurer de la disponibilit\xe9 du planning des inventaires","Commentaire :\n - Rappeler la proc\xe9dure d'acquisition des immobilisations\n - Rappeler la proc\xe9dure de sorties des immobilisations","Commentaire :\n - D\xe9crire les diff\xe9rentes \xe9tapes li\xe9es \xe0 l'\xe9dition et au contr\xf4le du fichier des immoblisations\n - Identifier les intervenants"],["Commentaire :\n -Indiquer les missions du comit\xe9\n -lister les membres du comit\xe9","Commentaire :\n -Lister zones \xe0 inventorier et les \xe9quipes affect\xe9es \xe0 chaque zone","Commentaire :\n - Lister les biens \xe0 inventorier\n - D\xe9crire la proc\xe9dure de comptage\n- D\xe9crire la proc\xe9dure de controle"],["Commentaire :\n - D\xe9crire la prod\xe9dure de rapprochement","Commentaire :\nD\xe9crire la proc\xe9dure de correction des anomalies","Commentaire :\nIndiquer la proc\xe9dure d'approbation de l'inventaire","Commentaire :\nIndiquer les composants du dossier d'inventaire"]]}getCommentPv(){return["Commentaire :\nMettre la date et l'heure","Commentaire :\nindiquer les points \xe0 l'ordre du jour","Commentaire :\nLister les personnes pr\xe9sentes \xe0 la r\xe9union"]}getCommentDel(t){let e="eme";return 0==t&&(e="er"),"Commentaire :\n"+ ++t+e+" point \xe0 l'ordre du jour"}addDeliberation(t="DELIBERATION "+(this.tabDeliberation.length+1)+" :",e=""){this.tabDeliberation.push(new m.i({titre:new m.f(t),content:new m.f(e)}))}addSignataire(t="",e=""){this.tabSignataires.push(new m.i({nom:new m.f(t),fonction:new m.f(e)}))}addSignatairePv(t="",e=""){this.tabSignatairesPv.push(new m.i({nom:new m.f(t),fonction:new m.f(e)}))}valideDif(t,e){return i=>{const n=i.controls[e];n.errors&&!n.errors.diffDate||(new Date(i.controls[t].value)>new Date(n.value)?setTimeout(()=>n.setErrors({diffDate:!0}),1):n.setErrors(null))}}getUsers(t){t=t.filter(t=>"actif"==t.status),this.presidents=t.filter(t=>t.roles&&"ROLE_PC"==t.roles[0]),this.membresComite=t.filter(t=>t.roles&&"ROLE_MC"==t.roles[0]),this.users=t}getUserById(t){return this.users.find(e=>e.id==t)}onEditSave(t){console.log("form.value => ",t.value),this.securityServ.showLoadingIndicatior.next(!0);let e=this.getAllDataToSend(t);this.inventaireServ.addInventaire(e).then(t=>{this.showNotification("bg-success",t.message,"top","center"),this.getInventaireByEse(0==e.id),this.showForm=!1},t=>{console.log(t),this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-red",t,"top","right")})}getAllDataToSend(t){let e=this.getData(t.value);return e.instructions=this.getOnlyFile(this.instructions),e.instrucCreer=this.getDataInstCreer(),e.decisionCC=this.getOnlyFile(this.docsDc),e.presiComite=this.idPresiComite,e.membresCom=this.tabComite.value,e.presentsReunion=this.tabPresents.value,e.presentsReunionOut=this.tabOtherPresent.value,e.pvReunion=this.getOnlyFile(this.docsPv),e.pvReunionCreer=this.getDataPvCreer(),e.entreprise=this.idCurrentEse,e.localites=this.getOneLyId(this.tabLoc),e.localInstructionPv=[this.invCreer?"creation":"download",this.pvCreer?"creation":"download"],console.log(e),e}getOneLyId(t){let e=[];return t.forEach(t=>e.push(t.id)),e}getDataInstCreer(){var t;let e=this.instForm.value,i=[];return null===(t=this.tabSignataires.value)||void 0===t||t.forEach(t=>i.push([t.nom,t.fonction])),e.signataire=i,e}getDataPvCreer(){var t;let e=this.pvForm.value,i=[];null===(t=this.tabSignatairesPv.value)||void 0===t||t.forEach(t=>i.push([t.nom,t.fonction]));const n=[e.bloc1,e.bloc2,e.bloc3,i];let c=[];return this.tabDeliberation.value.forEach(t=>{let e=t.titre.trim(),i=t.content.trim();""==e&&""==i||c.push({titre:e,content:i})}),[n,c]}getOnlyFile(t){let e=[];return t.forEach(t=>e.push(t[1])),e}handleFileInput(t){for(let e=0;e<t.length;e++)this.instructions.push([t.item(e).name,t.item(e)])}handleFileInputPv(t){for(let e=0;e<t.length;e++)this.docsPv.push([t.item(e).name,t.item(e)])}handleFileInputDc(t){for(let e=0;e<t.length;e++)this.docsDc.push([t.item(e).name,t.item(e)])}addComMembre(t=0){this.tabComite.push(new m.f(t))}addPresentMembre(t=0){this.tabPresents.push(new m.f(t))}addOtherPres(t=""){this.tabOtherPresent.push(new m.f(t))}closeComite(){this.closeComiteModal.nativeElement.click()}closePresent(){this.closePresentModal.nativeElement.click()}closeLoc(){this.closeLocaliteModal.nativeElement.click()}noNull(t){let e=[];return t.forEach(t=>{t&&e.push(t)}),e}openComModal(){0==this.tabComite.length&&this.addComMembre()}openPresModal(){0==this.tabPresents.length&&this.addPresentMembre(parseInt(this.myId)),0==this.tabOtherPresent.length&&this.addOtherPres()}openLocModal(){}inTab(t,e){return e.find(e=>e==t)}deleteInst(t){this.instructions.splice(t,1)}deletePv(t){this.docsPv.splice(t,1)}deleteDc(t){this.docsDc.splice(t,1)}getData(t){return t.dateInv&&(t.dateInv=this.formattedDate(t.dateInv)),t.debut&&(t.debut=this.formattedDate(t.debut)),t.fin&&(t.fin=this.formattedDate(t.fin)),t.dateReunion&&(t.dateReunion=this.formattedDate(t.dateReunion)),t}formattedDate(t=new Date){return[(t=new Date(t)).getFullYear(),t.getMonth()+1,t.getDate()].map(t=>t<10?"0"+t:""+t).join("-")}openSnackBar(t){this._snackBar.open(t,"",{duration:2e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["bg-red"]})}showNotification(t,e,i,n){this._snackBar.open(e,"",{duration:2e3,verticalPosition:i,horizontalPosition:n,panelClass:[t,"color-white"]})}rev(t,e=-1){let i=[];return t&&t.length>0&&(i=t,i=this.sharedService.uniq(i,"id"),this.sharedService.trier(i,"id",e)),i}deletCreationInst(){this.invCreer=!1,this.instructions=[],this.initInstrucForm()}deletCreationPv(){this.pvCreer=!1,this.docsPv=[],this.initPvForm(),this.tabDeliberation=new m.d([])}off(){this.showForm=!1,this.ngOnInit()}createNewInv(){this.invCreer=!0;const t=this.getInstValDef();this.initInstrucForm(t)}createNewPv(){this.pvCreer=!0,this.tabDeliberation=new m.d([]);const t=this.getPvValDef();this.initPvForm([t[0],t[1],t[2],[]]),this.tabDeliberation=new m.d([]),this.addDeliberation("DELIBERATION 1: INSTRUCTIONS D'INVENTAIRE","Les instructions d'inventaire ont \xe9t\xe9 transmises \xe0 tous les intervenants. Ces derniers ont attest\xe9 avoir pris connaissance de celles-ci.")}generatePdf(t,e){let i=[];0==e?i=[this.pageInst(t)]:1==e&&(i=[this.pagePv(t)]);const n={content:i,styles:this.getStyle(),pageMargins:[40,40]};ye.a.createPdf(n).open()}getStyle(){return{fsize:{fontSize:6.5},enTete:{fontSize:6.5,fillColor:"#eeeeee"},enTete2:{fontSize:6.5,bold:!0,fillColor:"#bcbdbc"},gris:{fillColor:"#bcbdbc"},grasGris:{bold:!0,fillColor:"#e6e6e6"},grasGrisF:{bold:!0,fillColor:"#b5b3b3"},gras:{bold:!0},centerGG:{bold:!0,fillColor:"#e6e6e6",alignment:"center"},no_border:{border:!1}}}pageInst(t){const e=t[0][0],i=t[0][1],n=t[0][2],c=t[1][0],a=t[1][1],o=t[1][2],r=t[2][0],s=t[2][1],l=t[2][2],d=t[2][3],u=t[3];return console.log(u),[...this.getImage(),{table:{width:["*"],body:[...this.getEntete(),[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"INSTRUCTIONS D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"1.TRAVAUX PREPARATOIRES",style:"grasGrisF",alignment:"center",fontSize:12}],[{text:"1.1. REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:e,margin:[2,7],fontSize:10}],[{text:"1.2. RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:i,margin:[2,7],fontSize:10}],[{text:"1.3. EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:n,margin:[2,7],fontSize:10}],[{text:"2.TRAVAUX D'INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"2.1. MISE EN PLACE DU COMITE D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:c,margin:[2,7],fontSize:10}],[{text:"2.2. AFFECTATION DES EQUIPES D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:a,margin:[2,7],fontSize:10}],[{text:"2.3. DEROULEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:o,margin:[2,7],fontSize:10}],[{text:"3.TRAVAUX POST-INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"3.1. RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:r,margin:[2,7],fontSize:10}],[{text:"3.2. CORRECTION DES ANOMALIES",style:"grasGris",alignment:"center"}],[{text:s,margin:[2,7],fontSize:10}],[{text:"3.3. APPROBATION D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:l,margin:[2,7],fontSize:10}],[{text:"3.4. TRANSMISSION DU DOSSIER D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:d,margin:[2,7],fontSize:10}]]},margin:[0,10,0,0]},...this.getSignatairePdf(u)]}pagePv(t){const e=t[0][0],i=t[0][1],n=t[0][2],c=t[0][3]?t[0][3]:[];return[...this.getImage(),{table:{width:["*"],body:[...this.getEntete(),[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"PROCES-VERBAL DE REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:e,margin:[2,7],fontSize:10}],[{text:i,margin:[2,7],fontSize:10}],[{text:n,margin:[2,7],fontSize:10}],...this.getPdfDel(t[1])]},margin:[0,10,0,0]},...this.getSignatairePdf(c)]}getImage(){return this.entreprise.image&&this.entreprise.image!=Le.a?[{image:this.entreprise.image,width:75}]:[{}]}getEntete(){const t=this.entreprise;return t.capital&&this.sharedService.numStr(t.capital," "),[[{text:""+t.denomination,border:[!1,!1,!1,!1],margin:[-5,0,0,0]}],[{text:t.republique+"/"+t.ville,border:[!1,!1,!1,!1],margin:[-5,0,0,0]}]]}doEspace(t,e){let i=0,n="";if(t.length>e.length){i=t.length-e.length;for(let t=0;t<2*i;t++)n+="  ";e+=n}else{i=e.length-t.length;for(let t=0;t<i;t++)n+="  ";t+=n}return n}getPdfDel(t){let e=[];return t.forEach(t=>{var i,n;""!=(null===(i=t[0])||void 0===i?void 0:i.trim())&&""!=(null===(n=t[1])||void 0===n?void 0:n.trim())&&e.push([{text:t[0],fontSize:12,style:"grasGris",alignment:"center"}],[{text:t[1],fontSize:10,margin:[2,7]}])}),e}getSignatairePdf(t){return t&&0!=t.length?2==t.length?this.getOneSignatairePdf(t):6==t.length?this.get3SignatairePdf(t):this.getOtherSignatairePdf(t):[{}]}getOneSignatairePdf(t){return[{text:t[0],margin:[0,20,0,0],fontSize:10,decoration:""},{text:this.doEspace(t[0],t[1])+t[1],margin:[10,2,0,0],fontSize:10,decoration:""}]}get3SignatairePdf(t){return[{table:{widths:["*","*"],body:[[{text:this.doEspace(t[0],t[1])[0]+"\n"+this.doEspace(t[0],t[1])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1]},{text:this.doEspace(t[4],t[5])[0]+"\n"+this.doEspace(t[4],t[5])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"right"}],[{text:this.doEspace(t[2],t[3])[0]+"\n"+this.doEspace(t[2],t[3])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"center",colSpan:2},{}]]}}]}getOtherSignatairePdf(t){return[{table:{widths:["*","*"],body:[...this.lignesSignataires(t)]}}]}lignesSignataires(t){let e=[];for(let i=0;i<t.length;i+=4)console.log("this.doEspace => ",this.doEspace(t[i+0],t[i+1]).length),console.log("this.doEspace => ",this.doEspace(t[i+2],t[i+3]).length),e.push([{text:t[i]+"\n"+t[i+1],fontSize:10,margin:[0,20,0,70],border:[!1,!1,!1,!1]},{text:this.doEspace(t[i+2],t[i+3])+t[i+2]+"\n"+this.doEspace(t[i+2],t[i+3])+t[i+3],fontSize:10,margin:[0,20,0,70],alignment:"right",border:[!1,!1,!1,!1]}]);return e}overLoc(t){console.log(t),this.locHover=t}overZone(t){console.log(t),this.zoneHover=t}overSz(t){console.log(t),this.szHover=t}outHoverLZS(){this.locHover=null,this.zoneHover=null,this.szHover=null}longText(t,e){return this.sharedService.longText(t,e)}addSignPv(t){const e=t.input,i=t.value;(i||"").trim()&&this.signatairesPv.push(i.trim()),e&&(e.value=""),this.signPvCtrl.setValue(null)}removeSignPv(t){const e=this.signatairesPv.indexOf(t);e>=0&&this.signatairesPv.splice(e,1)}addSignInst(t){const e=t.input,i=t.value;(i||"").trim()&&this.signatairesInst.push(i.trim()),e&&(e.value=""),this.signInstCtrl.setValue(null)}addSignInstFunction(t){this.modalService.open(t)}addSignInstFunctionChange(){this.openFunctionSigndModal.nativeElement.click()}addFunctionSignSave(t){console.log(t)}addSignInstFunctionClick(){console.log("its click")}removeSignInst(t){const e=this.signatairesInst.indexOf(t);e>=0&&this.signatairesInst.splice(e,1)}firstSub(t){return null==t?void 0:t.filter(t=>{var e;return(null===(e=t.position)||void 0===e?void 0:e.length)>0})}checkLoc(t){if(this.tabLoc.find(e=>e.id==t.id))this.tabLoc=this.tabLoc.filter(e=>e.id!=t.id);else{this.tabLoc.push(t);const e=t.idParent;e&&!this.isChecked(e)&&this.checkLoc(this.getOneLocById(e))}}checkAllLoc(){this.allLocIsChec()?this.tabLoc=[]:this.localites.forEach(t=>{this.isChecked(t.id)||this.checkLoc(t)})}allLocIsChec(){let t=!0;return this.localites.forEach(e=>{t&&(t=this.isChecked(e.id))}),t}openFirst(t){this.openLocalite=t,this.tabOpen[0]=t,this.offUnderSub(1)}getOneLocById(t){var e;return(null===(e=this.localites)||void 0===e?void 0:e.find(e=>e.id==t))||null}getCurrentSubById(t){var e;return(null===(e=this.getOneLocById(t))||void 0===e?void 0:e.subdivisions)||[]}openOther(t,e){this.tabOpen[t]=e,this.offUnderSub(t+1)}offUnderSub(t){for(let e=t;e<this.tabOpen.length;e++)this.tabOpen[e]&&(this.tabOpen[e]=0)}isChecked(t){return this.tabLoc.find(e=>e.id==t)}}return t.\u0275fac=function(e){return new(e||t)(f.Ub(m.e),f.Ub(v.a),f.Ub(Me.b),f.Ub(l.a),f.Ub(u.a),f.Ub(b.a),f.Ub(Pe.a),f.Ub(d.a))},t.\u0275cmp=f.Ob({type:t,selectors:[["app-inventaire"]],viewQuery:function(t,e){var i;1&t&&(f.dd(De,!0),f.dd(Re,!0),f.dd(Ne,!0),f.dd(Ye,!0),f.Uc(Ae,!0),f.dd(Te,!0)),2&t&&(f.Jc(i=f.nc())&&(e.closeComiteModal=i.first),f.Jc(i=f.nc())&&(e.closePresentModal=i.first),f.Jc(i=f.nc())&&(e.closeLocaliteModal=i.first),f.Jc(i=f.nc())&&(e.closeFunctionSigndModal=i.first),f.Jc(i=f.nc())&&(e.openFunctionSigndModal=i.first),f.Jc(i=f.nc())&&(e.formDirective=i.first))},decls:232,vars:32,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[1,"col-xl-3","col-lg-3","col-md-3","col-sm-3","pb-0","pt-2","bolder"],[1,"header-dropdown","m-r--5"],[1,"dropdown"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"title","disabled","click"],[1,"body"],["multi","true"],["class","mb-4","expanded","","hideToggle","",4,"ngIf"],["class","mb-4","hideToggle","",3,"hidden","expanded","opened",4,"ngFor","ngForOf"],["id","comiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeComiteModal",""],[1,"material-icons"],[1,"modal-body",3,"perfectScrollbar"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["name","presi",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"modal-footer","pr-2"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"click"],["id","presentModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["closePresentModal",""],["id","localiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["closeLocaliteModal",""],[1,"modal-body","pl-2","pr-2",3,"perfectScrollbar"],[1,"p-2","mt-1","pb-4","box-loc"],[1,"ml-2"],["aria-label","Fish selection",1,"mt-4"],["class","w-100 color-chips",3,"ngClass",4,"ngFor","ngForOf"],["class","p-2 mt-4 pb-4 box-loc",3,"hidden",4,"ngFor","ngForOf"],["class","row pl-4 pr-0 mt-4",4,"ngIf"],["id","instrucModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","instructionModal","inv"],["role","document",1,"modal-dialog","instruction-modal"],[1,"modal-content",3,"formGroup"],["closeInstrucModal",""],[1,"row","mb-2"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0"],[1,"body","pb-0"],[3,"linear"],["stepper",""],["matStepLabel",""],["color","primary","appearance","outline",1,"example-full-width","pr-0"],["matInput","","rows","3","formControlName","bloc1e1"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",3,"title"],["appearance","outline",1,"example-full-width","pr-0"],["matInput","","rows","8","formControlName","bloc1e2"],["matInput","","rows","5","formControlName","bloc1e3"],["matInput","","rows","10","formControlName","bloc2e1"],["matInput","","rows","16","formControlName","bloc2e2"],["matInput","","rows","15","formControlName","bloc2e3"],["matInput","","rows","11","formControlName","bloc3e1"],["matInput","","rows","1","formControlName","bloc3e2"],["matInput","","rows","1","formControlName","bloc3e3"],["matInput","","rows","3","formControlName","bloc3e4"],["hidden",""],["class","row","style","position: relative;",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-danger","btn-border-radius",3,"click"],["id","pvModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","inv"],["closePvModal",""],[1,"modal-body","pr-1",3,"perfectScrollbar"],[1,"row","col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0"],["matInput","","rows","2","formControlName","bloc1"],["matInput","","rows","4","formControlName","bloc2"],["matInput","","rows","3","formControlName","bloc3"],["class","col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 pr-0 pl-0",4,"ngFor","ngForOf"],["class","row col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2","style","position: relative;",4,"ngFor","ngForOf"],[1,"modal-footer",2,"padding-right","2.2rem"],["expanded","","hideToggle","",1,"mb-4"],[1,"pr-0",2,"background-color","#d8d5d5"],[1,"pl-0","col-11","pt-5","pb-4","mr-0"],[4,"ngIf"],[1,"mt-4",3,"formGroup"],["formDirective","ngForm"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],[1,"col-4","bolder","pt-3"],[1,"col-2"],[1,"example-full-width"],["matInput","","formControlName","dateInv",3,"matDatepicker"],["matSuffix","",3,"for"],["dateI",""],["matInput","","formControlName","debut",3,"matDatepicker"],["picker",""],["matInput","","formControlName","fin",3,"matDatepicker"],["picker2",""],[1,"row","mt-4"],[1,"col-4","pt-3","bolder"],[1,"col-8"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","class","mr-2","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",3,"title",4,"ngFor","ngForOf"],["mat-mini-fab","","title","Ajouter une localit\xe9","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",1,"mr-2",3,"ngClass"],["class","col-8",4,"ngIf"],["type","file","id","docCrea","hidden","","multiple","",3,"change"],["docDec",""],["class","img-circle user-img-circle img-membre pointer mr-3",3,"src","title",4,"ngIf"],["class","img-circle user-img-circle img-membre pointer mr-3",3,"src","title",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#comiteModal",3,"ngClass","disabled","click"],["matInput","","formControlName","lieuReunion"],["matSuffix",""],["matInput","","formControlName","dateReunion",3,"matDatepicker"],["picker3",""],["class","img-circle user-img-circle img-membre pointer mr-3 mb-2",3,"src","title",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#presentModal",3,"ngClass","disabled","click"],["type","file","id","doc2","hidden","","multiple","",3,"change"],["docPv",""],["type","submit",1,"btn","btn-outline-success","btn-border-radius","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger","btn-border-radius","mr-0",3,"click"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",1,"mr-2",3,"title"],["mat-mini-fab","","title","Ajouter des instructions","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#instrucModal",1,"mr-2",3,"click"],["mat-mini-fab","","color","primary","title","Importer des instructions","aria-label","Example icon-button with a heart icon",3,"click"],["type","file","id","doc","hidden","","multiple","",3,"change"],["docInst",""],["class","",4,"ngFor","ngForOf"],[1,""],[2,"font-size","50px","color","#3f51b5",3,"title"],[1,"pointer",2,"color","#f80000",3,"title","click"],["class","addFile","mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",3,"ngClass","click",4,"ngIf"],["mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",1,"addFile",3,"ngClass","click"],["title","Instruction","data-keyboard","false","data-target","#instrucModal",2,"font-size","50px","color","#3f51b5"],["title","Supprimer l'instruction",1,"mr-3","pointer",2,"color","#f80000",3,"click"],["mat-mini-fab","","title","Instruction","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#instrucModal",1,"addFile"],["mat-mini-fab","","color","primary","title","Importer la d\xe9cision de cr\xe9ation","aria-label","Example icon-button with a heart icon",3,"click"],["class","addFile ml-5","mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",3,"click",4,"ngIf"],["mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",1,"addFile","ml-5",3,"click"],[1,"img-circle","user-img-circle","img-membre","pointer","mr-3",3,"src","title"],[1,"img-circle","user-img-circle","img-membre","pointer","mr-3","mb-2",3,"src","title"],["mat-mini-fab","","title","Ajouter un pv","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",1,"mr-2",3,"click"],["mat-mini-fab","","color","primary","title","Importer un pv","aria-label","Example icon-button with a heart icon",3,"click"],["title","Proc\xe8s-verbal","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",2,"font-size","50px","color","#3f51b5"],["title","Supprimer le pv",1,"mr-3","pointer",2,"color","#f80000",3,"click"],["mat-mini-fab","","title","Pv","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",1,"addFile","mr-5"],["hideToggle","",1,"mb-4",3,"hidden","expanded","opened"],[1,"pr-0",2,"background-color","#d8d5d5",3,"click"],["panelHL",""],[1,"pl-0","col-11","pt-5","pb-4","mr-0",3,"click"],[1,"mr-0"],["class","pt-5 pb-4",4,"ngIf"],[1,"mt-4"],[1,"row","mt-3"],[1,"col-4","bolder"],[1,"col-4"],[1,"col-4","bolder",3,"ngClass"],["data-toggle","modal","data-target","#localiteModal","mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","class","mr-2 ",3,"title","click","mouseover","mouseout",4,"ngFor","ngForOf"],[1,"col-8","row"],["class","pl-3",4,"ngIf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2",3,"src","title",4,"ngIf"],["class","p-0 pt-1 ml-3 mb-2 block-user",4,"ngIf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2",3,"src","title",4,"ngFor","ngForOf"],["class","p-0 pt-1 ml-3 mb-2  block-user",4,"ngFor","ngForOf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2 mb-2",3,"src","title",4,"ngFor","ngForOf"],["class","p-0 pt-1 ml-3 mb-2 block-user",4,"ngFor","ngForOf"],[1,"pt-5","pb-4"],["data-toggle","modal",1,"mr-2","icone-loc",3,"click"],[1,"icone-loc"],["data-toggle","modal","data-target","#localiteModal","mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon",1,"mr-2",3,"title","click","mouseover","mouseout"],[4,"ngFor","ngForOf"],[1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"title","click"],["target","_blank","rel","noopener noreferrer","hidden","",3,"href","download"],["openInv",""],["title","Instruction",1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"click"],["openDC",""],[1,"pl-3"],["hidden","",1,"img-circle","user-img-circle","img-membre","pointer","ml-2",3,"src","title"],[1,"p-0","pt-1","ml-3","mb-2","block-user"],["alt","photo",1,"img-circle","user-img-circle","img-membre","pointer","ng-star-inserted",3,"src","title"],[1,"text-primary","titre-membre"],[1,"img-circle","user-img-circle","img-membre","pointer","ng-star-inserted",3,"src","title"],["hidden","",1,"img-circle","user-img-circle","img-membre","pointer","ml-2","mb-2",3,"src","title"],[1,"text-primary","titre-membre",3,"title"],["download","pvReunion[0]","target","_blank","rel","noopener noreferrer","hidden","",3,"href"],["openPv",""],["color","primary","title","Proc\xe8s-verbal",1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"click"],[3,"value"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],[3,"formControl"],[3,"value","hidden",4,"ngFor","ngForOf"],["matSuffix","","title","Ajouter un membre",1,"pointer",3,"hidden","click"],[3,"value","hidden"],["matInput","",3,"formControl"],[1,"w-100","color-chips",3,"ngClass"],[1,"col-11","pl-0"],[1,"example-section","pick-loc"],[1,"example-margin","pt-2",3,"disabled","checked","change"],[1,"col-1"],["title","Afficher",1,"icone-affectation","pointer","text-info",3,"click"],[1,"p-2","mt-4","pb-4","box-loc",3,"hidden"],[1,"mt-3","ml-2"],["aria-label","Fish selection"],[1,"ml-3",2,"font-style","italic"],["class","ml-2 mt-2",4,"ngIf"],[1,"ml-2","mt-2"],[1,"row","pl-4","pr-0","mt-4"],[1,"example-section","all-height","row"],[1,"example-margin",3,"checked","change"],[1,"col-5"],["type","submit",1,"col-2","btn","btn-outline-success","btn-border-radius",3,"click"],[1,"row",2,"position","relative"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","pl-0"],["matInput","","type","text",3,"formControl"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",2,"position","absolute","right","-2px",3,"hidden","click"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0","pl-0"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",3,"hidden","click"],["matInput","","rows","3",3,"formControl"],[1,"row","col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2",2,"position","relative"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","mt-3","pl-0","pr-0"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","mt-3","pl-0","pr-2"],["matSuffix","",1,"pointer","pt-3","text-primary","mt-3","ml-5",2,"position","absolute","right","12px",3,"hidden","click"]],template:function(t,e){if(1&t){const t=f.bc();f.ac(0,"section",0),f.ac(1,"div",1),f.ac(2,"div",2),f.ac(3,"div",3),f.ac(4,"div",4),f.ac(5,"div",5),f.ac(6,"div",2),f.ac(7,"h2",6),f.Yc(8,"Inventaires"),f.Zb(),f.ac(9,"ul",7),f.ac(10,"li",8),f.ac(11,"button",9),f.mc("click",(function(){return e.addNew()})),f.ac(12,"mat-icon"),f.Yc(13,"add"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(14,"div",10),f.ac(15,"mat-accordion",11),f.Wc(16,li,121,37,"mat-expansion-panel",12),f.Wc(17,Ti,82,60,"mat-expansion-panel",13),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(18,"div",14),f.ac(19,"div",15),f.ac(20,"form",16),f.ac(21,"div",17),f.ac(22,"div",18),f.ac(23,"div",19),f.ac(24,"div",20),f.ac(25,"div",21),f.Yc(26,"Comit\xe9"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(27,"button",22,23),f.ac(29,"i",24),f.Yc(30,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(31,"div",25),f.ac(32,"div",2),f.ac(33,"div",26),f.ac(34,"mat-form-field",27),f.ac(35,"mat-label"),f.Yc(36,"Pr\xe9sident"),f.Zb(),f.ac(37,"mat-select",28),f.mc("ngModelChange",(function(t){return e.idPresiComite=t})),f.Vb(38,"mat-option",29),f.Wc(39,Vi,2,2,"mat-option",30),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Wc(40,Wi,10,4,"div",31),f.ac(41,"div",32),f.ac(42,"div",33),f.ac(43,"button",34),f.mc("click",(function(){return e.closeComite()})),f.Yc(44,"Fermer"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(45,"div",35),f.ac(46,"div",15),f.ac(47,"form",16),f.ac(48,"div",17),f.ac(49,"div",18),f.ac(50,"div",19),f.ac(51,"div",20),f.ac(52,"div",21),f.Yc(53,"Pr\xe9sents \xe0 la r\xe9union"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(54,"button",22,36),f.ac(56,"i",24),f.Yc(57,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(58,"div",25),f.Wc(59,Bi,10,4,"div",31),f.Wc(60,zi,10,2,"div",31),f.ac(61,"div",32),f.ac(62,"div",33),f.ac(63,"button",34),f.mc("click",(function(){return e.closePresent()})),f.Yc(64,"Fermer"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(65,"div",37),f.ac(66,"div",15),f.ac(67,"form",16),f.ac(68,"div",17),f.ac(69,"div",18),f.ac(70,"div",19),f.ac(71,"div",20),f.ac(72,"div",21),f.Yc(73,"Localit\xe9s"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(74,"button",22,38),f.ac(76,"i",24),f.Yc(77,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(78,"div",39),f.ac(79,"div",26),f.ac(80,"div",40),f.ac(81,"p",41),f.Yc(82),f.Zb(),f.Vb(83,"hr"),f.ac(84,"mat-chip-list",42),f.Wc(85,$i,8,6,"mat-chip",43),f.Zb(),f.Zb(),f.Wc(86,Hi,9,5,"div",44),f.Zb(),f.Wc(87,Ji,8,1,"div",45),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(88,"div",46),f.ac(89,"div",47),f.ac(90,"form",48),f.ac(91,"div",17),f.ac(92,"div",18),f.ac(93,"div",19),f.ac(94,"div",20),f.ac(95,"div",21),f.Yc(96,"Instructions"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(97,"button",22,49),f.ac(99,"i",24),f.Yc(100,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(101,"div",25),f.ac(102,"div",50),f.ac(103,"div",51),f.ac(104,"div",52),f.ac(105,"mat-vertical-stepper",53,54),f.ac(107,"mat-step"),f.Wc(108,Xi,1,0,"ng-template",55),f.ac(109,"div",2),f.ac(110,"mat-form-field",56),f.ac(111,"mat-label"),f.Yc(112,"REUNION DE LANCEMENT DE L'INVENTAIRE"),f.Zb(),f.Vb(113,"textarea",57),f.Zb(),f.ac(114,"mat-icon",58),f.Yc(115,"info_outline"),f.Zb(),f.Zb(),f.ac(116,"div",2),f.ac(117,"mat-form-field",59),f.ac(118,"mat-label"),f.Yc(119,"RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS"),f.Zb(),f.Vb(120,"textarea",60),f.Zb(),f.ac(121,"mat-icon",58),f.Yc(122,"info_outline"),f.Zb(),f.Zb(),f.ac(123,"div",2),f.ac(124,"mat-form-field",59),f.ac(125,"mat-label"),f.Yc(126,"EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS"),f.Zb(),f.Vb(127,"textarea",61),f.Zb(),f.ac(128,"mat-icon",58),f.Yc(129,"info_outline"),f.Zb(),f.Zb(),f.Zb(),f.ac(130,"mat-step"),f.Wc(131,Qi,1,0,"ng-template",55),f.ac(132,"div",2),f.ac(133,"mat-form-field",59),f.ac(134,"mat-label"),f.Yc(135,"MISE EN PLACE DU COMITE D'INVENTAIRE"),f.Zb(),f.Vb(136,"textarea",62),f.Zb(),f.ac(137,"mat-icon",58),f.Yc(138,"info_outline"),f.Zb(),f.Zb(),f.ac(139,"div",2),f.ac(140,"mat-form-field",59),f.ac(141,"mat-label"),f.Yc(142,"AFFECTATION DES EQUIPES D'INVENTAIRE"),f.Zb(),f.Vb(143,"textarea",63),f.Zb(),f.ac(144,"mat-icon",58),f.Yc(145,"info_outline"),f.Zb(),f.Zb(),f.ac(146,"div",2),f.ac(147,"mat-form-field",59),f.ac(148,"mat-label"),f.Yc(149,"DEROULEMENT DE L'INVENTAIRE"),f.Zb(),f.Vb(150,"textarea",64),f.Zb(),f.ac(151,"mat-icon",58),f.Yc(152,"info_outline"),f.Zb(),f.Zb(),f.Zb(),f.ac(153,"mat-step"),f.Wc(154,tn,1,0,"ng-template",55),f.ac(155,"div",2),f.ac(156,"mat-form-field",59),f.ac(157,"mat-label"),f.Yc(158,"RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE"),f.Zb(),f.Vb(159,"textarea",65),f.Zb(),f.ac(160,"mat-icon",58),f.Yc(161,"info_outline"),f.Zb(),f.Zb(),f.ac(162,"div",2),f.ac(163,"mat-form-field",59),f.ac(164,"mat-label"),f.Yc(165,"CORRECTION DES ANOMALIES"),f.Zb(),f.Vb(166,"textarea",66),f.Zb(),f.ac(167,"mat-icon",58),f.Yc(168,"info_outline"),f.Zb(),f.Zb(),f.ac(169,"div",2),f.ac(170,"mat-form-field",59),f.ac(171,"mat-label"),f.Yc(172,"APPROBATION D'INVENTAIRE"),f.Zb(),f.Vb(173,"textarea",67),f.Zb(),f.ac(174,"mat-icon",58),f.Yc(175,"info_outline"),f.Zb(),f.Zb(),f.ac(176,"div",2),f.ac(177,"mat-form-field",59),f.ac(178,"mat-label"),f.Yc(179,"TRANSMISSION DU DOSSIER D'INVENTAIRE"),f.Zb(),f.Vb(180,"textarea",68),f.Zb(),f.ac(181,"mat-icon",58),f.Yc(182,"info_outline"),f.Zb(),f.Zb(),f.Zb(),f.ac(183,"mat-step",69),f.Wc(184,en,1,0,"ng-template",55),f.Wc(185,nn,13,3,"div",70),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(186,"div",32),f.ac(187,"div",33),f.ac(188,"button",71),f.mc("click",(function(){return f.Oc(t),f.Kc(98).click()})),f.Yc(189,"Fermer"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(190,"div",72),f.ac(191,"div",47),f.ac(192,"form",48),f.ac(193,"div",17),f.ac(194,"div",18),f.ac(195,"div",19),f.ac(196,"div",20),f.ac(197,"div",21),f.Yc(198,"Proc\xe8s-verbal"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.ac(199,"button",22,73),f.ac(201,"i",24),f.Yc(202,"clear"),f.Zb(),f.Zb(),f.Zb(),f.ac(203,"div",74),f.ac(204,"div",50),f.ac(205,"div",75),f.ac(206,"mat-form-field",59),f.ac(207,"mat-label"),f.Yc(208,"Date et heure "),f.Zb(),f.Vb(209,"textarea",76),f.Zb(),f.ac(210,"mat-icon",58),f.Yc(211,"info_outline "),f.Zb(),f.Zb(),f.ac(212,"div",75),f.ac(213,"mat-form-field",59),f.ac(214,"mat-label"),f.Yc(215,"Ordre du jour "),f.Zb(),f.Vb(216,"textarea",77),f.Zb(),f.ac(217,"mat-icon",58),f.Yc(218,"info_outline "),f.Zb(),f.Zb(),f.ac(219,"div",75),f.ac(220,"mat-form-field",59),f.ac(221,"mat-label"),f.Yc(222,"Feuille de pr\xe9sence "),f.Zb(),f.Vb(223,"textarea",78),f.Zb(),f.ac(224,"mat-icon",58),f.Yc(225,"info_outline "),f.Zb(),f.Zb(),f.Wc(226,cn,15,5,"div",79),f.Wc(227,an,13,3,"div",80),f.Zb(),f.ac(228,"div",81),f.ac(229,"div",33),f.ac(230,"button",71),f.mc("click",(function(){return f.Oc(t),f.Kc(200).click()})),f.Yc(231,"Fermer"),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb()}2&t&&(f.Eb(11),f.xc("title",e.titleAdd)("disabled",e.securityServ.superviseurAdjoint),f.Eb(5),f.xc("ngIf",e.showForm),f.Eb(1),f.xc("ngForOf",e.inventaires),f.Eb(20),f.xc("ngModel",e.idPresiComite),f.Eb(2),f.xc("ngForOf",e.presidents),f.Eb(1),f.xc("ngForOf",e.tabComite.controls),f.Eb(19),f.xc("ngForOf",e.tabPresents.controls),f.Eb(1),f.xc("ngForOf",e.tabOtherPresent.controls),f.Eb(22),f.Zc(e.subdivisions[0]),f.Eb(3),f.xc("ngForOf",e.firstSub(e.localites)),f.Eb(1),f.xc("ngForOf",e.tabOpen),f.Eb(1),f.xc("ngIf",e.showForm),f.Eb(3),f.xc("formGroup",e.instForm),f.Eb(15),f.xc("linear",e.isLinear),f.Eb(9),f.xc("title",e.comments[0][0]),f.Eb(7),f.xc("title",e.comments[0][1]),f.Eb(7),f.xc("title",e.comments[0][2]),f.Eb(9),f.xc("title",e.comments[1][0]),f.Eb(7),f.xc("title",e.comments[1][1]),f.Eb(7),f.xc("title",e.comments[1][2]),f.Eb(9),f.xc("title",e.comments[2][0]),f.Eb(7),f.xc("title",e.comments[2][1]),f.Eb(7),f.xc("title",e.comments[2][2]),f.Eb(7),f.xc("title",e.comments[2][3]),f.Eb(4),f.xc("ngForOf",e.tabSignataires.controls),f.Eb(7),f.xc("formGroup",e.pvForm),f.Eb(18),f.xc("title",e.commentsPv[0]),f.Eb(7),f.xc("title",e.commentsPv[1]),f.Eb(7),f.xc("title",e.commentsPv[2]),f.Eb(2),f.xc("ngForOf",e.tabDeliberation.controls),f.Eb(1),f.xc("ngForOf",e.tabSignatairesPv.controls))},directives:[I.b,Z.a,gt.a,n.n,n.m,m.z,m.p,m.q,bt.b,E.c,E.g,ht.a,m.o,m.r,pt.o,C.c,m.j,qe.g,qe.b,qe.c,x.b,m.b,m.h,E.i,gt.c,gt.f,gt.g,gt.e,Fe.b,Fe.d,Fe.a,n.l,gt.d,E.b,m.g,C.a,ft.a],pipes:[n.e],styles:[".img-membre[_ngcontent-%COMP%]{width:40px;height:40px;z-index:1!important}.date-width[_ngcontent-%COMP%]{width:50%}.example-full-width[_ngcontent-%COMP%]{width:95.2%!important}.addFile[_ngcontent-%COMP%]{top:6px}.addFile[_ngcontent-%COMP%], .addInv[_ngcontent-%COMP%]{position:absolute}.addInv[_ngcontent-%COMP%]{top:-21px;left:-46px}.instruction-modal[_ngcontent-%COMP%]{margin-right:40%}.instruction-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:900px}.all-width[_ngcontent-%COMP%]{width:100%!important}.modal-body[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#f102a1!important}.input.mat-input-element[_ngcontent-%COMP%]{color:#fc0d05!important}.block-user[_ngcontent-%COMP%]{border:1px solid rgba(2,2,2,.19);border-radius:10%;background-color:#f5f5f5;height:90px;width:125px}.block-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inherit;margin-left:33%}.block-user[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:inherit;text-align:center}.titre-membre[_ngcontent-%COMP%]{font-size:10px!important}.icone-affectation[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.box-loc[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.14);border-radius:5%;background-color:#f6f6f6;box-shadow:0 0 3px #31414a}"]}),t})();var rn=i("1jcm"),sn=i("jhN1");let ln=(()=>{class t{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}}return t.\u0275fac=function(e){return new(e||t)(f.Ub(sn.b))},t.\u0275pipe=f.Tb({name:"safeUrl",type:t,pure:!0}),t})();function dn(t,e){if(1&t&&(f.ac(0,"span"),f.Yc(1),f.rc(2,"date"),f.Zb()),2&t){const t=f.qc().$implicit;f.Eb(1),f.ad(" au ",f.tc(2,1,t.dateInv,"dd/MM/yyyy"),"")}}function un(t,e){if(1&t&&(f.ac(0,"option",13),f.Yc(1," Inventaire "),f.Wc(2,dn,3,4,"span",12),f.Zb()),2&t){const t=e.$implicit;f.xc("value",t.id),f.Eb(2),f.xc("ngIf",t.dateInv)}}function bn(t,e){if(1&t&&(f.ac(0,"div",4),f.Vb(1,"iframe",19),f.rc(2,"safeUrl"),f.Zb()),2&t){const t=f.qc(3);f.Eb(1),f.xc("src",f.sc(2,1,t.urlInst),f.Qc)}}function mn(t,e){if(1&t&&(f.ac(0,"div",14),f.ac(1,"div",15),f.ac(2,"div",16),f.ac(3,"div",17),f.Wc(4,bn,3,3,"div",18),f.Zb(),f.Zb(),f.Zb(),f.Zb()),2&t){const t=f.qc(2);f.Eb(4),f.xc("ngIf",t.urlInst)}}function pn(t,e){if(1&t&&(f.ac(0,"div",15),f.ac(1,"div",16),f.ac(2,"div",17),f.ac(3,"div",4),f.Vb(4,"iframe",19),f.rc(5,"safeUrl"),f.Zb(),f.Zb(),f.Zb(),f.Zb()),2&t){const t=e.$implicit,i=f.qc(3);f.Eb(4),f.xc("src",f.sc(5,1,i.docLink+t[1]),f.Qc)}}function hn(t,e){if(1&t&&(f.ac(0,"div",14),f.Wc(1,pn,6,3,"div",20),f.Zb()),2&t){const t=f.qc(2);f.Eb(1),f.xc("ngForOf",t.instructions)}}function gn(t,e){if(1&t){const t=f.bc();f.ac(0,"p"),f.ac(1,"strong",21),f.Yc(2,"J'atteste avoir pris connaissance de ces instructions d'inventaire"),f.Zb(),f.ac(3,"mat-slide-toggle",22),f.mc("click",(function(){return f.Oc(t),f.qc(2).approvInstr()})),f.Zb(),f.Zb()}if(2&t){const t=f.qc(2);f.Eb(3),f.xc("color",t.color)("checked",t.checked)("disabled",t.checked)}}function fn(t,e){if(1&t){const t=f.bc();f.ac(0,"section",1),f.ac(1,"div",2),f.ac(2,"div",3),f.ac(3,"div",4),f.ac(4,"div",5),f.ac(5,"ul",6),f.ac(6,"li",7),f.ac(7,"h4",8),f.Yc(8,"Choisir un inventaire"),f.Zb(),f.Zb(),f.ac(9,"li",7),f.ac(10,"select",9),f.mc("ngModelChange",(function(e){return f.Oc(t),f.qc().idCurrentInv=e}))("change",(function(e){return f.Oc(t),f.qc().inventaireChange(e.target.value)})),f.Wc(11,un,3,2,"option",10),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Zb(),f.Wc(12,mn,5,1,"div",11),f.Wc(13,hn,2,1,"div",11),f.Wc(14,gn,4,3,"p",12),f.Zb(),f.Zb()}if(2&t){const t=f.qc();f.Eb(10),f.xc("ngModel",t.idCurrentInv),f.Eb(1),f.xc("ngForOf",t.inventaires),f.Eb(1),f.xc("ngIf",t.creation),f.Eb(1),f.xc("ngIf",!t.creation),f.Eb(1),f.xc("ngIf",t.currentInv)}}ye.a.vfs=ke.a.pdfMake.vfs;const vn=[{path:"zonage",canActivate:[o.a],component:lt},{path:"zonage/:id",canActivate:[o.a],component:lt},{path:"users",canActivate:[a.a],component:Se},{path:"inventaires",canActivate:[a.a],component:on},{path:"instruction",component:(()=>{class t{constructor(t,e,i){this.sharedService=t,this.securityServ=e,this.inventaireServ=i,this.idCurrentEse=null,this.inventaires=[],this.currentInv=null,this.idCurrentInv=null,this.show=!1,this.instructions=[],this.creation=!1,this.entreprise=null,this.urlInst=null,this.color="accent",this.checked=!1,this.docLink=this.sharedService.baseUrl+"/documents/"}ngOnInit(){this.idCurrentEse=localStorage.getItem("currentEse"),this.getInventaireByEse()}getInventaireByEse(){this.inventaireServ.getInventaireByEse(this.idCurrentEse).then(t=>{var e;this.inventaires=t,this.currentInv=t?t[0]:null,this.traitementInst(this.currentInv),this.idCurrentInv=null===(e=this.currentInv)||void 0===e?void 0:e.id,this.getStatusInstr(this.idCurrentInv),this.show=!0},t=>{this.securityServ.showLoadingIndicatior.next(!1),console.log(t)})}getStatusInstr(t){t&&this.inventaireServ.getStatusInstr(t).then(t=>this.checked=0!=t)}approvInstr(){this.idCurrentInv&&this.inventaireServ.approvInstr(this.idCurrentInv).then(t=>this.checked=!0)}traitementInst(t){console.log(t),this.entreprise=null==t?void 0:t.entreprise,this.creation="creation"==(null==t?void 0:t.localInstructionPv[0]),this.instructions=null==t?void 0:t.instruction,this.creation&&this.generatePdf(this.instructions)}inventaireChange(t){this.currentInv=this.inventaires.find(e=>e.id==t),this.traitementInst(this.currentInv)}pageInst(t){const e=t[0][0],i=t[0][1],n=t[0][2],c=t[1][0],a=t[1][1],o=t[1][2],r=t[2][0],s=t[2][1],l=t[2][2],d=t[2][3],u=t[3];return[...this.getImage(),{table:{width:["*"],body:[...this.getEntete(),[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"INSTRUCTIONS D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"1.TRAVAUX PREPARATOIRES",style:"grasGrisF",alignment:"center",fontSize:12}],[{text:"1.1. REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:e,margin:[2,7],fontSize:10}],[{text:"1.2. RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:i,margin:[2,7],fontSize:10}],[{text:"1.3. EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:n,margin:[2,7],fontSize:10}],[{text:"2.TRAVAUX D'INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"2.1. MISE EN PLACE DU COMITE D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:c,margin:[2,7],fontSize:10}],[{text:"2.2. AFFECTATION DES EQUIPES D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:a,margin:[2,7],fontSize:10}],[{text:"2.3. DEROULEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:o,margin:[2,7],fontSize:10}],[{text:"3.TRAVAUX POST-INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"3.1. RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:r,margin:[2,7],fontSize:10}],[{text:"3.2. CORRECTION DES ANOMALIES",style:"grasGris",alignment:"center"}],[{text:s,margin:[2,7],fontSize:10}],[{text:"3.3. APPROBATION D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:l,margin:[2,7],fontSize:10}],[{text:"3.4. TRANSMISSION DU DOSSIER D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:d,margin:[2,7],fontSize:10}]]},margin:[0,10,0,0]},...this.getSignatairePdf(u)]}getImage(){var t,e,i;return(null===(t=this.entreprise)||void 0===t?void 0:t.image)&&(null===(e=this.entreprise)||void 0===e?void 0:e.image)!=Le.a?[{image:null===(i=this.entreprise)||void 0===i?void 0:i.image,width:75}]:[{}]}getEntete(){const t=this.entreprise;return[[{text:""+(null==t?void 0:t.denomination),border:[!1,!1,!1,!1],margin:[-5,0,0,0]}],[{text:(null==t?void 0:t.republique)+"/"+(null==t?void 0:t.ville),border:[!1,!1,!1,!1],margin:[-5,0,0,0]}]]}getSignatairePdf(t){return t&&0!=t.length?2==t.length?this.getOneSignatairePdf(t):6==t.length?this.get3SignatairePdf(t):this.getOtherSignatairePdf(t):[{}]}getOneSignatairePdf(t){return[{text:t[0],margin:[0,20,0,0],fontSize:10,decoration:""},{text:t[1],margin:[10,2,0,0],fontSize:10,decoration:""}]}get3SignatairePdf(t){return[{table:{widths:["*","*"],body:[[{text:t[0]+"\n"+t[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1]},{text:t[4]+"\n"+t[5],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"right"}],[{text:t[2]+"\n"+t[3],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"center",colSpan:2},{}]]}}]}getOtherSignatairePdf(t){return[{table:{widths:["*","*"],body:[...this.lignesSignataires(t)]}}]}lignesSignataires(t){let e=[];for(let i=0;i<t.length;i+=4)e.push([{text:t[i]+"\n"+t[i+1],fontSize:10,margin:[0,20,0,70],border:[!1,!1,!1,!1]},{text:t[i+2]+"\n"+t[i+3],fontSize:10,margin:[0,20,0,70],alignment:"right",border:[!1,!1,!1,!1]}]);return e}generatePdf(t){const e={content:[this.pageInst(t)],styles:this.getStyle(),pageMargins:[40,40]};ye.a.createPdf(e).getBase64(t=>{this.urlInst="data:application/pdf;base64, "+t})}getStyle(){return{fsize:{fontSize:6.5},enTete:{fontSize:6.5,fillColor:"#eeeeee"},enTete2:{fontSize:6.5,bold:!0,fillColor:"#bcbdbc"},gris:{fillColor:"#bcbdbc"},grasGris:{bold:!0,fillColor:"#e6e6e6"},grasGrisF:{bold:!0,fillColor:"#b5b3b3"},gras:{bold:!0},centerGG:{bold:!0,fillColor:"#e6e6e6",alignment:"center"},no_border:{border:!1}}}}return t.\u0275fac=function(e){return new(e||t)(f.Ub(u.a),f.Ub(b.a),f.Ub(d.a))},t.\u0275cmp=f.Ob({type:t,selectors:[["app-instruction"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"select-trie",2,"width","215px !important",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","row clearfix",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],["class","row",4,"ngIf"],["allow","fullscreen","title","Instruction",2,"width","100%","height","75vh",3,"src"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngFor","ngForOf"],[2,"font-size","15px"],[1,"example-margin",3,"color","checked","disabled","click"]],template:function(t,e){1&t&&f.Wc(0,fn,15,5,"section",0),2&t&&f.xc("ngIf",e.show)},directives:[n.n,m.w,m.o,m.r,n.m,m.s,m.y,rn.a],pipes:[n.e,ln],styles:[".select-trie[_ngcontent-%COMP%]{background-color:#ebebee!important;width:153px!important}"]}),t})()}];let En=(()=>{class t{}return t.\u0275mod=f.Sb({type:t}),t.\u0275inj=f.Rb({factory:function(e){return new(e||t)},imports:[[c.h.forChild(vn)],c.h]}),t})();var xn=i("TU8p"),Zn=i("2ChS"),In=i("MutI"),Cn=i("XhcP"),Sn=i("Wp6s"),On=i("Xa2L"),yn=i("bv9b"),wn=i("5RNC"),kn=i("wZkO"),Ln=i("AGJ6"),Mn=i("+0xr"),Pn=i("M9IT"),qn=i("QibW"),Fn=i("Dh3D"),Dn=i("/t3+"),Rn=i("7ZcW"),Nn=i("STbY");let Yn=(()=>{class t{}return t.\u0275mod=f.Sb({type:t}),t.\u0275inj=f.Rb({factory:function(e){return new(e||t)},imports:[[n.c,En,m.k,m.u,bt.c,rn.b,I.c,Z.b,E.e,x.c,xn.b,C.e,mt.b,Zn.b,In.c,Cn.a,v.b,gt.b,Fe.c,Sn.g,On.a,yn.b,wn.a,kn.d,Ln.b,ft.b,n.c,n.c,m.k,m.u,dt.g,v.b,Mn.l,Pn.b,qn.c,ht.b,Me.f,Fn.c,Dn.a,Rn.b,Nn.c,dt.g,qe.d]]}),t})()}}]);