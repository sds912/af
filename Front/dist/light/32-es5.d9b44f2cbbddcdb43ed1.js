function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{qVXu:function(e,t,i){"use strict";i.r(t),i.d(t,"InventaireModule",(function(){return Bn}));var n=i("ofXK"),a=i("tyNb"),c=i("o69J"),r=i("+/Pe"),o=i("mrSG"),l=i("FtGj"),s=i("jiEm"),u=i("hFwF"),d=i("gaWP"),b=i("/8Pk"),m=i("3Pt+"),f=i("PSD3"),p=i.n(f),h=i("EUZL"),v=i("fXoL"),g=i("dNgK"),E=i("kmnG"),x=i("qFsG"),I=i("NFeN"),Z=i("bTqV"),y=i("A5z7"),k=["fruitInput"],C=["closeLocaliteModal"],S=["closeSubdivision"],O=["formDirective1"],w=["formDirective2"],L=["formDirective3"];function P(e,t){if(1&e&&(v.ac(0,"h2",50),v.Yc(1),v.Zb()),2&e){var i=v.qc();v.Eb(1),v.Zc(i.subdivisions[0])}}function M(e,t){1&e&&(v.ac(0,"h2",50),v.Yc(1,"Localit\xe9s"),v.Zb())}function q(e,t){if(1&e){var i=v.bc();v.ac(0,"button",51,52),v.mc("click",(function(){return v.Oc(i),v.qc().initForm()}))("click",(function(){return v.Oc(i),v.qc().update=!1})),v.ac(2,"mat-icon"),v.Yc(3,"add"),v.Zb(),v.Zb()}}function F(e,t){if(1&e&&(v.ac(0,"button",53),v.ac(1,"mat-icon"),v.Yc(2,"add"),v.Zb(),v.Zb()),2&e){var i=v.qc();v.xc("title",i.titleAdd)}}var D=function(e){return{"btn-add-sub":e}};function R(e,t){if(1&e){var i=v.bc();v.ac(0,"button",54,55),v.mc("click",(function(){return v.Oc(i),v.qc().initSub()})),v.ac(2,"mat-icon"),v.Yc(3,"reorder"),v.Zb(),v.Zb()}if(2&e){var n=v.qc();v.xc("ngClass",v.Bc(1,D,!n.securityServ.superviseurGene))}}function A(e,t){if(1&e){var i=v.bc();v.ac(0,"button",56),v.ac(1,"mat-icon",57),v.mc("click",(function(){return v.Oc(i),v.Kc(4).click()})),v.Yc(2," cloud_upload "),v.Zb(),v.ac(3,"input",58,59),v.mc("change",(function(e){return v.Oc(i),v.qc().getAllLocalite(e)})),v.Zb(),v.Zb()}}function N(e,t){if(1&e){var i=v.bc();v.ac(0,"img",65),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().openFirst(e.id)})),v.Zb()}if(2&e){var n=v.qc().$implicit;v.xc("title",n.nom)}}function Y(e,t){if(1&e){var i=v.bc();v.ac(0,"img",66),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().openFirst(e.id)})),v.Zb()}if(2&e){var n=v.qc().$implicit;v.xc("title",n.nom)}}function T(e,t){if(1&e&&v.Vb(0,"img",67),2&e){var i=v.qc().$implicit;v.xc("title",i.nom)}}var _=function(e,t){return{left:e,top:t,width:"10%"}};function V(e,t){if(1&e){var i=v.bc();v.ac(0,"div",60),v.ac(1,"span",61),v.mc("click",(function(){v.Oc(i);var e=t.$implicit;return v.qc().idCurrentLocal=e.id})),v.Yc(2),v.Zb(),v.Wc(3,N,1,1,"img",62),v.Wc(4,Y,1,1,"img",63),v.Wc(5,T,1,1,"img",64),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc();v.xc("ngStyle",v.Cc(5,_,n.position[0],n.position[1])),v.Eb(2),v.Zc(a.longText(n.nom,11)),v.Eb(1),v.xc("ngIf",a.idCurrentLocal!=n.id&&!n.rattacher),v.Eb(1),v.xc("ngIf",a.idCurrentLocal!=n.id&&n.rattacher),v.Eb(1),v.xc("ngIf",a.idCurrentLocal==n.id)}}function W(e,t){if(1&e&&(v.ac(0,"h2",74),v.Yc(1),v.Zb()),2&e){var i,n=v.qc().$implicit,a=v.qc();v.Eb(1),v.Zc(null==(i=a.getOnById(n))?null:i.nom)}}function U(e,t){if(1&e&&(v.ac(0,"h2",75),v.ac(1,"span",76),v.Yc(2,"Cr\xe9\xe9 par : "),v.Zb(),v.Yc(3),v.Zb()),2&e){var i,n=v.qc().$implicit,a=v.qc();v.Eb(3),v.ad(" ",null==(i=a.getOnById(n))||null==i.createur?null:i.createur.nom," ")}}function B(e,t){if(1&e){var i=v.bc();v.ac(0,"li",77),v.ac(1,"button",78),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit,t=v.qc();return t.deleteLoc(t.getOnById(e))})),v.ac(2,"mat-icon"),v.Yc(3,"delete"),v.Zb(),v.Zb(),v.Zb()}}function z(e,t){if(1&e){var i=v.bc();v.ac(0,"li",8),v.ac(1,"button",79),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit,t=v.qc();return t.updateL(t.getOnById(e))}))("click",(function(){return v.Oc(i),v.qc(2),v.Kc(20).click()})),v.ac(2,"mat-icon"),v.Yc(3,"edit"),v.Zb(),v.Zb(),v.Zb()}}function G(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-icon",92),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc(3).updateL(e)}))("click",(function(){return v.Oc(i),v.qc(4),v.Kc(20).click()})),v.Yc(1,"edit"),v.Zb()}}function $(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-icon",93),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc(3).deleteLoc(e)})),v.Yc(1,"delete"),v.Zb()}}var j=function(e,t){return{"col-8":e,"col-11":t}},K=function(e,t){return{"col-4":e,"col-1":t}};function H(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-chip",86),v.ac(1,"span",87),v.Yc(2),v.Zb(),v.ac(3,"span",88),v.ac(4,"mat-icon",89),v.mc("click",(function(e){v.Oc(i);var n=t.$implicit,a=v.qc(2).index;return v.qc().openOther(e,a+1,n.id)})),v.Yc(5,"playlist_add"),v.Zb(),v.Wc(6,G,2,0,"mat-icon",90),v.Wc(7,$,2,0,"mat-icon",91),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc(2).index,c=v.qc();v.Ib("chip-localite-",a+1,""),v.xc("selectable",c.selectable)("removable",!1),v.Eb(1),v.xc("ngClass",v.Cc(11,j,!c.securityServ.superviseurGene,c.securityServ.superviseurGene))("title",n.nom),v.Eb(1),v.Zc(c.longText(n.nom,20)),v.Eb(1),v.xc("ngClass",v.Cc(14,K,!c.securityServ.superviseurGene,c.securityServ.superviseurGene)),v.Eb(3),v.xc("ngIf",!c.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",!c.securityServ.superviseurGene)}}function J(e,t){if(1&e){var i=v.bc();v.ac(0,"input",94,95),v.mc("matChipInputTokenEnd",(function(e){v.Oc(i);var t=v.qc(2),n=t.$implicit,a=t.index;return v.qc().add(e,n,a+1)})),v.Zb()}if(2&e){v.qc();var n=v.Kc(2),a=v.qc().index,c=v.qc();v.xc("placeholder",c.subdivisions[a+1])("matChipInputFor",n)("matChipInputSeparatorKeyCodes",c.separatorKeysCodes)}}function X(e,t){if(1&e){var i=v.bc();v.ac(0,"input",96,95),v.mc("matChipInputTokenEnd",(function(e){v.Oc(i);var t=v.qc(2),n=t.$implicit,a=t.index;return v.qc().add(e,n,a+1)})),v.Zb()}if(2&e){v.qc();var n=v.Kc(2),a=v.qc().index,c=v.qc();v.xc("placeholder",c.subdivisions[a+1])("formControl",c.fruitCtrl)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",c.separatorKeysCodes)}}function Q(e,t){if(1&e&&(v.ac(0,"mat-form-field",80),v.ac(1,"mat-chip-list",81,82),v.Wc(3,H,8,17,"mat-chip",83),v.Wc(4,J,2,3,"input",84),v.Wc(5,X,2,4,"input",85),v.Zb(),v.Zb()),2&e){var i=v.qc().$implicit,n=v.qc();v.Eb(3),v.xc("ngForOf",n.getCurrentSubById(i)),v.Eb(1),v.xc("ngIf",n.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",!n.securityServ.superviseurGene)}}function ee(e,t){1&e&&(v.ac(0,"p"),v.Yc(1,"Veuillez ajouter une nouvelle subdivision"),v.Zb())}function te(e,t){if(1&e&&(v.ac(0,"div",68),v.ac(1,"div",5),v.ac(2,"div",2),v.Wc(3,W,2,1,"h2",69),v.ac(4,"ul",7),v.Wc(5,U,4,1,"h2",70),v.Wc(6,B,4,0,"li",71),v.Wc(7,z,4,0,"li",72),v.Zb(),v.Zb(),v.Zb(),v.ac(8,"div",13),v.Wc(9,Q,6,3,"mat-form-field",73),v.Wc(10,ee,2,0,"p",38),v.Zb(),v.Zb()),2&e){var i=t.$implicit,n=t.index,a=v.qc();v.xc("hidden",!a.idCurrentLocal||!a.getOnById(i)),v.Eb(3),v.xc("ngIf",a.getOnById(i)),v.Eb(2),v.xc("ngIf",a.getOnById(i)&&0==n&&a.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",!a.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",!a.securityServ.superviseurGene),v.Eb(2),v.xc("ngIf",a.subdivisions&&a.subdivisions[n+1]),v.Eb(1),v.xc("ngIf",!a.subdivisions[n+1])}}function ie(e,t){if(1&e&&(v.ac(0,"div",45),v.Yc(1),v.Zb()),2&e){var i=v.qc();v.Eb(1),v.Zc(i.subdivisions[0])}}function ne(e,t){1&e&&(v.ac(0,"div",45),v.Yc(1," Modification"),v.Zb())}function ae(e,t){1&e&&(v.ac(0,"mat-error"),v.Yc(1," Ce champ est requise "),v.Zb())}function ce(e,t){1&e&&(v.ac(0,"mat-label"),v.Yc(1,"Nom de la subdivision"),v.Zb())}function re(e,t){if(1&e&&(v.ac(0,"mat-label"),v.Yc(1),v.Zb()),2&e){var i=v.qc().index,n=v.qc();v.Eb(1),v.ad("Un(e) ",n.lowerCase(n.tabSubdivision.value[i-1])," peut contenir un(e) :")}}function oe(e,t){if(1&e){var i=v.bc();v.ac(0,"div",97),v.ac(1,"mat-form-field",98),v.Wc(2,ce,2,0,"mat-label",38),v.Wc(3,re,2,1,"mat-label",38),v.Vb(4,"input",99),v.ac(5,"mat-icon",37),v.Yc(6,"room"),v.Zb(),v.Zb(),v.ac(7,"mat-icon",100),v.mc("click",(function(){return v.Oc(i),v.qc().addSubdivision()})),v.Yc(8,"add_circle_outline"),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(2),v.xc("ngIf",0==a),v.Eb(1),v.xc("ngIf",a>0),v.Eb(1),v.xc("formControl",n),v.Eb(3),v.xc("hidden",a!=c.tabSubdivision.controls.length-1||!n.value)}}var le,se=function(e){return{background:e}},ue=((le=function(){function e(t,i,n,a,c,r,o,s){_classCallCheck(this,e),this.adminServ=t,this.inventaireServ=i,this.fb=n,this._snackBar=a,this.sharedService=c,this.securityServ=r,this.route=o,this.router=s,this.isValableFileLocalite=!0,this.localiteFile=[],this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[l.g,l.c],this.fruitCtrl=new m.f,this.fruits=["Bureau 1","Bureau 2","Bureau 3","Bureau 4","Bureau 5","Bureau 6","Bureau 8","Bureau 9","Bureau X","Bureau Y","Bureau Z"],this.anelOpenState=!1,this.step=2,this.entreprises=[],this.idCurrentEse="",this.idCurrentLocal=0,this.idCurrentZ=0,this.currentLocal=null,this.localites=[],this.allLoc=[],this.tabSubdivision=new m.d([]),this.subdivisions=[],this.tabOpen=[],this.update=!1,this.currentImage="map3.jpeg",this.myId="",this.titleAdd="",this.idToOpen=0,this.availableColors=[{name:"Primary",color:"primary"},{name:"Accent",color:"accent"},{name:"Warn",color:"warn"}],this.data=[],this.titleAdd=this.securityServ.superviseurAdjoint?"Demandez au superviseur g\xe9n\xe9ral d'ajouter une subdivision":"Ajouter une subdivision"}return _createClass(e,[{key:"ngOnInit",value:function(){this.myId=localStorage.getItem("idUser"),this.carrousel(),this.securityServ.showLoadingIndicatior.next(!0),this.initForm(),this.idCurrentEse=localStorage.getItem("currentEse"),this.getOneEntreprise(),this.addSubdivision("Localit\xe9"),this.route.snapshot.params.id&&(this.idToOpen=this.sharedService.decodId(+this.route.snapshot.params.id)),this.sameComponent()}},{key:"sameComponent",value:function(){var e=this;this.router.events.subscribe((function(t){t instanceof a.b&&e.route.snapshot.params.id&&(e.idToOpen=e.sharedService.decodId(+e.route.snapshot.params.id),e.getOneEntreprise())}))}},{key:"initForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,nom:"",position:[]};this.formDirective1&&this.formDirective1.resetForm(),this.localiteForm=this.fb.group({id:[e.id],nom:[e.nom,[m.x.required]],position:[e.position],level:[]})}},{key:"getOneEntreprise",value:function(){var e=this;this.adminServ.getOneEntreprise(this.idCurrentEse).then((function(t){var i,n;e.allLoc=t.localites,e.localites=t.localites,e.idToOpen&&(e.securityServ.superviseurGene||e.securityServ.superviseur||e.securityServ.superviseurAdjoint&&e.allLoc.find((function(t){var i;return t.id==e.idToOpen&&(null===(i=t.createur)||void 0===i?void 0:i.id)==e.myId})))&&e.openOneById(e.idToOpen),e.securityServ.superviseurAdjoint&&(e.localites=e.allLoc.filter((function(t){var i;return(null===(i=t.createur)||void 0===i?void 0:i.id)==e.myId}))),e.subdivisions=t.subdivisions,0==(null===(i=e.tabOpen)||void 0===i?void 0:i.length)&&(null===(n=e.subdivisions)||void 0===n||n.forEach((function(t){return e.tabOpen.push(0)}))),e.securityServ.showLoadingIndicatior.next(!1)}),(function(e){console.log(e)}))}},{key:"addLocalite",value:function(e){var t=this.allLoc.filter((function(e){var t;return(null===(t=e.position)||void 0===t?void 0:t.length)>0})),i=this.firstSubNameExiste(this.allLoc,e.value);if(t.length<=45&&!i)this.saveValideLoc(e);else if(i){var n=this.firstSubNameExiste(this.localites,e.value),a="";this.securityServ.superviseurAdjoint&&!n&&(a=", veuillez contacter le superviseur g\xe9n\xe9ral"),this.showNotification("bg-info",e.value.nom+" existe d\xe9ja"+a+".","bottom","center",5e3)}else p.a.fire({title:"",text:"Vous avez atteint le nombre limite de localit\xe9.",icon:"info"})}},{key:"saveValideLoc",value:function(e){var t=this,i=e.value;i.entreprise="/api/entreprises/"+this.idCurrentEse,0==i.id&&(i.createur="/api/users/"+this.myId),i.position&&0==i.position.length&&(i.position=this.getPosition()),this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite(i).then((function(e){t.securityServ.showLoadingIndicatior.next(!1),t.closeLocaliteModal.nativeElement.click(),0==i.id?t.localites.push(e):t.getOneEntreprise()}),(function(e){t.securityServ.showLoadingIndicatior.next(!1),console.log(e)}))}},{key:"addSub",value:function(e,t,i){var n=this,a={nom:e,entreprise:"/api/entreprises/"+this.idCurrentEse,parent:"/api/localites/"+t,level:i,createur:"/api/users/"+this.myId};this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite(a).then((function(e){n.securityServ.showLoadingIndicatior.next(!1),n.closeLocaliteModal.nativeElement.click(),n.getOneEntreprise()}),(function(e){n.securityServ.showLoadingIndicatior.next(!1),console.log(e)}))}},{key:"updateOne",value:function(e){var t=this,i=e.value;this.securityServ.showLoadingIndicatior.next(!0),this.inventaireServ.addLocalite({id:i.id,nom:i.nom}).then((function(e){t.update=!1,t.securityServ.showLoadingIndicatior.next(!1),t.closeLocaliteModal.nativeElement.click(),t.getOneEntreprise()}),(function(e){t.securityServ.showLoadingIndicatior.next(!1),console.log(e)}))}},{key:"onSubmit",value:function(e){this.update?this.updateOne(e):(e.controls.level.setValue(0),this.addLocalite(e))}},{key:"firstSubNameExiste",value:function(e,t){var i=t.nom.trim();return null!=e.find((function(e){var n,a;return(null===(n=e.nom)||void 0===n?void 0:n.toLowerCase())==(null==i?void 0:i.toLowerCase())&&e.id!=t.id&&((null===(a=e.position)||void 0===a?void 0:a.length)>0||0==t.id)}))}},{key:"rev",value:function(e){var t=[];return e&&e.length>0&&(t=e,this.sharedService.trier(t,"id",-1)),t}},{key:"add",value:function(e,t,i){var n=e.input,a=e.value,c=this.localites.find((function(e){var i,n;return(null===(i=e.nom)||void 0===i?void 0:i.toLowerCase())==(null===(n=a.trim())||void 0===n?void 0:n.toLowerCase())&&e.idParent==t}));if((a||"").trim()&&!c)a.trim()&&this.addSub(a,t,i);else if(c)return void this.showNotification("bg-info",a.trim()+" existe d\xe9ja.","bottom","center",5e3);n&&(n.value=""),this.fruitCtrl.setValue(null)}},{key:"deleteLoc",value:function(e){e.rattacher?this.showNotification("bg-danger","Impossible de supprimer cet \xe9l\xe9ment car il contient des subdivisions.","bottom","center",5e3):e.linkToUser?this.showNotification("bg-danger","Impossible de supprimer cet \xe9l\xe9ment car des personnes y sont affect\xe9es.","bottom","center",5e3):e.linkToUser||e.rattacher||this.supLocPossible(e)}},{key:"supLocPossible",value:function(e){var t=this;p.a.fire({title:"Confirmation",text:"Voulez-vous confirmer la suppression de cet \xe9l\xe9ment ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then((function(i){i.value&&(t.securityServ.showLoadingIndicatior.next(!0),t.inventaireServ.deleteLoc(e.id).then((function(e){t.securityServ.showLoadingIndicatior.next(!1),t.getOneEntreprise()}),(function(e){t.securityServ.showLoadingIndicatior.next(!1),console.log(e)})))}))}},{key:"showNotification",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3;this._snackBar.open(t,"",{duration:a,verticalPosition:i,horizontalPosition:n,panelClass:[e,"color-white"]})}},{key:"longText",value:function(e,t){return this.sharedService.longText(e,t)}},{key:"getPosition",value:function(){var e=this,t=!1,i=2,n=2;do{t=!1,i=Math.floor(94*Math.random())+2,n=Math.floor(83*Math.random())+2,this.allLoc.forEach((function(a){if(a.position&&a.position.length>0){var c=e.getValPourcentage(a.position[0]),r=e.getValPourcentage(a.position[1]);(c==i&&r==n||i>=c-6&&i<=c+6&&n>=r-16&&n<=r+16)&&(t=!0)}}))}while(t);return[i+"%",n+"%"]}},{key:"getValPourcentage",value:function(e){return parseInt(e.replace("%",""))}},{key:"carrousel",value:function(){var e=this,t=["map4.jpg","map2.jpeg","map3.jpeg"],i=0;window.setInterval((function(){i>=t.length&&(i=0),e.currentImage=t[i],i++}),5e3)}},{key:"addSubdivision",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.tabSubdivision.push(new m.f(e))}},{key:"lowerCase",value:function(e){return e.toLowerCase()}},{key:"capitalize",value:function(e){return this.sharedService.capitalize(e)}},{key:"capitalizeAll",value:function(e){var t=this,i=[];return e.forEach((function(e){e.trim()&&i.push(t.capitalize(e))})),i}},{key:"oneSaveSubdiv",value:function(){var e=this,t={id:this.idCurrentEse,subdivisions:this.capitalizeAll(this.tabSubdivision.value)};this.adminServ.addEntreprise(t).then((function(t){e.subdivisions=t.subdivisions,e.closeSubdivision.nativeElement.click(),e.showNotification("bg-success","Enregistr\xe9","top","center")}),(function(t){return e.showNotification("bg-danger",t,"top","center")}))}},{key:"initSub",value:function(){var e,t=this;this.tabSubdivision=new m.d([]),null===(e=this.subdivisions)||void 0===e||e.forEach((function(e){return t.addSubdivision(e)})),this.subdivisions&&0!=this.subdivisions.length||this.addSubdivision("Localit\xe9")}},{key:"firstSub",value:function(e){return null==e?void 0:e.filter((function(e){var t;return(null===(t=e.position)||void 0===t?void 0:t.length)>0}))}},{key:"getCurrentSubById",value:function(e){var t;return(null===(t=this.getOnById(e))||void 0===t?void 0:t.subdivisions)||[]}},{key:"getOnById",value:function(e){var t;return(null===(t=this.localites)||void 0===t?void 0:t.find((function(t){return t.id==e})))||null}},{key:"openFirst",value:function(e){this.idCurrentLocal=e,this.tabOpen[0]=e,this.offUnderSub(1)}},{key:"openOther",value:function(e,t,i){this.tabOpen[t]=i,this.offUnderSub(t+1),document.querySelectorAll(".chip-localite-"+t).forEach((function(e){e.classList.remove("active")})),e.target.closest(".chip-localite-"+t).classList.add("active")}},{key:"offUnderSub",value:function(e){for(var t=e;t<this.tabOpen.length;t++)this.tabOpen[t]&&(this.tabOpen[t]=0)}},{key:"updateL",value:function(e){this.update=!0,this.initForm(e)}},{key:"openOneById",value:function(e){this.tabOpen.push(e),this.tabOpen=[];var t=null,i=this.allLoc.find((function(t){return t.id==e}));do{t&&this.tabOpen.push(t),t=i?i.idParent:null,i=this.allLoc.find((function(e){return e.id==t}))}while(t);this.tabOpen.sort((function(e,t){return e-t})),this.idCurrentLocal=this.tabOpen[0]}},{key:"getAllLocalite",value:function(e){var t=this,i=e.target;if(1!==i.files.length)throw new Error("Cannot use multiple files");var n=new FileReader;n.onload=function(e){var i,n;return Object(o.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var a,c,r,l,s,u,d,b,m,f,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h.read(e.target.result,{type:"binary"}),c=a.Sheets[a.SheetNames[0]],t.next=3,h.utils.sheet_to_json(c,{header:1,raw:!1});case 3:for(this.data=t.sent,console.log(this.data),r=1;r<this.data.length;r++)this.localiteFile.push(this.data[r]);for(l=0;l<this.localiteFile.length;l++)this.localiteFile[l].length>this.subdivisions.length&&(this.isValableFileLocalite=!1);if(!this.isValableFileLocalite){t.next=51;break}t.prev=9,u=Object(o.a)(this.localiteFile);case 11:return t.next=13,u.next();case 13:if((s=t.sent).done){t.next=32;break}d=s.value,b=0,m=0;case 18:if(!(m<d.length)){t.next=30;break}if(f=d[m],0!=m){t.next=25;break}return t.next=23,this.inventaireServ.addLocalite({nom:f,entreprise:"/api/entreprises/"+this.idCurrentEse,createur:"/api/users/"+this.myId,level:m,position:this.getPosition()}).then((function(e){b=e.id,p.securityServ.showLoadingIndicatior.next(!0),console.log(e)}));case 23:t.next=27;break;case 25:return t.next=27,this.inventaireServ.addLocalite({nom:f,entreprise:"/api/entreprises/"+this.idCurrentEse,createur:"/api/users/"+this.myId,level:m,parent:"/api/localites/"+b}).then((function(e){b=e.id,p.securityServ.showLoadingIndicatior.next(!0),console.log(e)}));case 27:m++,t.next=18;break;case 30:t.next=11;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t.catch(9),i={error:t.t0};case 37:if(t.prev=37,t.prev=38,t.t1=s&&!s.done&&(n=u.return),!t.t1){t.next=43;break}return t.next=43,n.call(u);case 43:if(t.prev=43,!i){t.next=46;break}throw i.error;case 46:return t.finish(43);case 47:return t.finish(37);case 48:this.getOneEntreprise(),this.securityServ.showLoadingIndicatior.next(!1),t.next=52;break;case 51:this.showNotification("bg-red","Fichier uploader pa bon","top","center");case 52:case"end":return t.stop()}}),t,this,[[9,34,37,48],[38,,43,47]])})))},n.readAsBinaryString(i.files[0])}},{key:"verfiIfDeuxLocIsSame",value:function(e,t){return e==t}},{key:"isLastChilTab",value:function(e,t){for(var i=0;i<e.length-1;i++)if(t[i]!=e[i])return i;return 100}}]),e}()).\u0275fac=function(e){return new(e||le)(v.Ub(s.a),v.Ub(u.a),v.Ub(m.e),v.Ub(g.a),v.Ub(d.a),v.Ub(b.a),v.Ub(a.a),v.Ub(a.d))},le.\u0275cmp=v.Ob({type:le,selectors:[["app-zonage"]],viewQuery:function(e,t){var i;1&e&&(v.Uc(k,!0),v.dd(C,!0),v.dd(S,!0),v.dd(O,!0),v.dd(w,!0),v.dd(L,!0)),2&e&&(v.Jc(i=v.nc())&&(t.fruitInput=i.first),v.Jc(i=v.nc())&&(t.closeLocaliteModal=i.first),v.Jc(i=v.nc())&&(t.closeSubdivision=i.first),v.Jc(i=v.nc())&&(t.formDirective1=i.first),v.Jc(i=v.nc())&&(t.formDirective2=i.first),v.Jc(i=v.nc())&&(t.formDirective3=i.first))},decls:77,vars:17,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header",2,"border-bottom","1px solid #00000021"],["class","col-xl-3 col-lg-3 col-md-3 col-sm-3 pb-0 pt-2 bolder",4,"ngIf"],[1,"header-dropdown","m-r--5"],[1,"dropdown"],["class","addInv","data-toggle","modal","data-target","#localiteModal","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter","color","primary","aria-label","Example icon-button with a heart icon",3,"click",4,"ngIf"],["class","addInv","mat-mini-fab","","disabled","","color","primary","aria-label","Example icon-button with a heart icon",3,"title",4,"ngIf"],["class","addInv","data-toggle","modal","data-target","#Subdivision","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter une subdivision","color","primary","aria-label","Example icon-button with a heart icon",3,"ngClass","click",4,"ngIf"],["mat-mini-fab","","class","addLocaliteExcel","style","color: brown;",4,"ngIf"],[1,"body"],[1,"map-localite","mb-2",3,"ngStyle"],["class","pointer-localite pointer",3,"ngStyle",4,"ngFor","ngForOf"],["class","card mb-5 pb-3",3,"hidden",4,"ngFor","ngForOf"],["data-toggle","modal","hidden","","data-target","#localiteModal","data-backdrop","static","data-keyboard","false"],["openLocM",""],["id","localiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-keyboard","false",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"formGroup","ngSubmit"],["formDirective1","ngForm"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],[1,"modal-about"],["class","font-weight-bold p-t-10 font-17",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeLocaliteModal",""],[1,"material-icons"],[1,"modal-body"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","pb-0"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nom"],["matSuffix",""],[4,"ngIf"],[1,"modal-footer","pr-0","pt-0"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger","btn-border-radius","mr-0"],["id","Subdivision","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","data-keyboard","false",1,"modal","fade"],[1,"modal-content"],[1,"font-weight-bold","p-t-10","font-17"],["closeSubdivision",""],["class","col-xl-12 col-lg-12 col-md-12 col-sm-12 pb-0 pr-0",4,"ngFor","ngForOf"],[1,"modal-footer","pr-4","pt-0"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"click"],[1,"col-xl-3","col-lg-3","col-md-3","col-sm-3","pb-0","pt-2","bolder"],["data-toggle","modal","data-target","#localiteModal","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],["openF",""],["mat-mini-fab","","disabled","","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"title"],["data-toggle","modal","data-target","#Subdivision","data-backdrop","static","data-keyboard","false","mat-mini-fab","","title","Ajouter une subdivision","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"ngClass","click"],["subd",""],["mat-mini-fab","",1,"addLocaliteExcel",2,"color","brown"],[2,"color","white",3,"click"],["type","file","hidden","",3,"change"],["openFileUload",""],[1,"pointer-localite","pointer",3,"ngStyle"],[1,"pl-1",3,"click"],["src","assets/images/image-gallery/pointer.png","style","width:50%;",3,"title","click",4,"ngIf"],["src","assets/images/image-gallery/pointer4.png","style","width:40%;",3,"title","click",4,"ngIf"],["src","assets/images/image-gallery/pointer2.png","style","width:50%;",3,"title",4,"ngIf"],["src","assets/images/image-gallery/pointer.png",2,"width","50%",3,"title","click"],["src","assets/images/image-gallery/pointer4.png",2,"width","40%",3,"title","click"],["src","assets/images/image-gallery/pointer2.png",2,"width","50%",3,"title"],[1,"card","mb-5","pb-3",3,"hidden"],["class","col-xl-5 col-lg-5 col-md-5 col-sm-5 pb-0 pt-2 bolder",4,"ngIf"],["class","pb-0 pt-1 pr-3",4,"ngIf"],["class","dropdown","style","left: -50px;",4,"ngIf"],["class","dropdown",4,"ngIf"],["class","example-chip-list example-full-width zonage",4,"ngIf"],[1,"col-xl-5","col-lg-5","col-md-5","col-sm-5","pb-0","pt-2","bolder"],[1,"pb-0","pt-1","pr-3"],[1,"bolder"],[1,"dropdown",2,"left","-50px"],["mat-mini-fab","","title","Supprimer","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],["mat-mini-fab","","title","Modifier","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"click"],[1,"example-chip-list","example-full-width","zonage"],["aria-label","Sous-zones"],["chipList",""],["class","w-25 row pt-1 color-chips","style","min-width: 275px;",3,"selectable","class","removable",4,"ngFor","ngForOf"],["disabled","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd",4,"ngIf"],[3,"placeholder","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd",4,"ngIf"],[1,"w-25","row","pt-1","color-chips",2,"min-width","275px",3,"selectable","removable"],[1,"p-0","pl-1",3,"ngClass","title"],[1,"p-0",3,"ngClass"],["title","Afficher",1,"edit-sousZ","pointer","text-secondary",3,"click"],["class","ml-2 edit-sousZ pointer text-secondary","title","Modifier",3,"click",4,"ngIf"],["matChipRemove","","class","ml-0","title","Supprimer",3,"click",4,"ngIf"],["title","Modifier",1,"ml-2","edit-sousZ","pointer","text-secondary",3,"click"],["matChipRemove","","title","Supprimer",1,"ml-0",3,"click"],["disabled","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["fruitInput",""],[3,"placeholder","formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","pb-0","pr-0"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],["matInput","",3,"formControl"],["matSuffix","","title","Ajouter un membre",1,"pointer",3,"hidden","click"]],template:function(e,t){1&e&&(v.ac(0,"section",0),v.ac(1,"div",1),v.ac(2,"div",2),v.ac(3,"div",3),v.ac(4,"div",4),v.ac(5,"div",5),v.ac(6,"div",2),v.Wc(7,P,2,1,"h2",6),v.Wc(8,M,2,0,"h2",6),v.ac(9,"ul",7),v.ac(10,"li",8),v.Wc(11,q,4,0,"button",9),v.Wc(12,F,3,1,"button",10),v.Wc(13,R,4,3,"button",11),v.Wc(14,A,5,0,"button",12),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(15,"div",13),v.ac(16,"div",14),v.Wc(17,V,6,8,"div",15),v.Zb(),v.Zb(),v.Zb(),v.Wc(18,te,11,7,"div",16),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Vb(19,"em",17,18),v.ac(21,"div",19),v.ac(22,"div",20),v.ac(23,"form",21,22),v.mc("ngSubmit",(function(){return t.onSubmit(t.localiteForm)})),v.ac(25,"div",23),v.ac(26,"div",24),v.ac(27,"div",25),v.ac(28,"div",26),v.Wc(29,ie,2,1,"div",27),v.Wc(30,ne,2,0,"div",27),v.Zb(),v.Zb(),v.Zb(),v.ac(31,"button",28,29),v.ac(33,"i",30),v.Yc(34,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(35,"div",31),v.ac(36,"div"),v.ac(37,"div",2),v.ac(38,"div",32),v.Vb(39,"input",33),v.Zb(),v.ac(40,"div",34),v.ac(41,"mat-form-field",35),v.ac(42,"mat-label"),v.Yc(43,"Nom"),v.Zb(),v.Vb(44,"input",36),v.ac(45,"mat-icon",37),v.Yc(46,"room"),v.Zb(),v.Wc(47,ae,2,0,"mat-error",38),v.Zb(),v.Zb(),v.Zb(),v.ac(48,"div",39),v.ac(49,"div",40),v.ac(50,"button",41),v.Yc(51,"Enregistrer"),v.Zb(),v.ac(52,"button",42),v.Yc(53,"Annuler"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(54,"div",43),v.ac(55,"div",20),v.ac(56,"form",44),v.ac(57,"div",23),v.ac(58,"div",24),v.ac(59,"div",25),v.ac(60,"div",26),v.ac(61,"div",45),v.Yc(62,"Subdivision"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(63,"button",28,46),v.ac(65,"i",30),v.Yc(66,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(67,"div",31),v.ac(68,"div"),v.ac(69,"div",2),v.Wc(70,oe,9,4,"div",47),v.Zb(),v.ac(71,"div",48),v.ac(72,"div",40),v.ac(73,"button",49),v.mc("click",(function(){return t.oneSaveSubdiv()})),v.Yc(74,"Enregistrer"),v.Zb(),v.ac(75,"button",42),v.Yc(76,"Annuler"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()),2&e&&(v.Eb(7),v.xc("ngIf",t.subdivisions&&t.subdivisions[0]),v.Eb(1),v.xc("ngIf",!t.subdivisions||0==t.subdivisions.length),v.Eb(3),v.xc("ngIf",t.subdivisions&&t.subdivisions.length>0&&!t.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",!t.subdivisions||0==t.subdivisions.length),v.Eb(1),v.xc("ngIf",t.securityServ.superviseur||t.securityServ.superviseurGene),v.Eb(1),v.xc("ngIf",t.securityServ.superviseur||t.securityServ.superviseurAdjoint),v.Eb(2),v.xc("ngStyle",v.Bc(15,se,"url(./assets/images/image-gallery/"+t.currentImage+") no-repeat center center")),v.Eb(1),v.xc("ngForOf",t.rev(t.firstSub(t.localites))),v.Eb(1),v.xc("ngForOf",t.tabOpen),v.Eb(5),v.xc("formGroup",t.localiteForm),v.Eb(6),v.xc("ngIf",t.subdivisions&&t.subdivisions[0]&&!t.update),v.Eb(1),v.xc("ngIf",t.update),v.Eb(17),v.xc("ngIf",t.localiteForm.get("nom").hasError("required")),v.Eb(3),v.xc("disabled",t.localiteForm.invalid),v.Eb(20),v.xc("ngForOf",t.tabSubdivision.controls))},directives:[n.n,n.o,n.m,m.z,m.p,m.j,m.b,m.o,m.h,E.c,E.g,x.b,I.a,E.i,m.q,Z.b,n.l,y.c,y.a,y.d,y.b,m.g,E.b],styles:[".icon-localite[_ngcontent-%COMP%]{font-size:13px;padding-top:.4em}.edit-sousZ[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.icone-loc[_ngcontent-%COMP%]{font-size:20px}.map-localite[_ngcontent-%COMP%]{height:400px;border:2px solid #8f9aa8;border-radius:0;position:relative}.pointer-localite[_ngcontent-%COMP%]{position:absolute}.pointer-localite[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inherit;color:#fff;font-weight:bolder}.addInv[_ngcontent-%COMP%]{position:absolute;top:-21px;left:-46px}.btn-add-sub[_ngcontent-%COMP%]{left:-150px}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.icon-opacity[_ngcontent-%COMP%]{opacity:.8}.addLocaliteExcel[_ngcontent-%COMP%]{position:absolute;top:-21px;left:-96px}.mat-chip.active[_ngcontent-%COMP%]{background-color:#ef7711;color:#fff;opacity:1}"]}),le),de=i("lDzL"),be=i("4veq"),me=i("Kdsb"),fe=i("/1cH"),pe=i("FKr1"),he=i("d3UM"),ve=i("7EHt"),ge=i("bSwM"),Ee=["roleTemplate"],xe=["closeEditModal"],Ie=["formDirective"];function Ze(e,t){if(1&e&&(v.ac(0,"option",69),v.Yc(1),v.Zb()),2&e){var i=t.$implicit;v.xc("value",i.id),v.Eb(1),v.Zc(i.denomination)}}function ye(e,t){if(1&e){var i=v.bc();v.ac(0,"li",50),v.ac(1,"select",66),v.mc("ngModelChange",(function(e){return v.Oc(i),v.qc(2).idCurrentEse=e}))("change",(function(e){return v.Oc(i),v.qc(2).entiteChange(e.target.value)})),v.ac(2,"option",67),v.Yc(3,"Toutes les entit\xe9s"),v.Zb(),v.Wc(4,Ze,2,2,"option",68),v.Zb(),v.Zb()}if(2&e){var n=v.qc(2);v.Eb(1),v.xc("ngModel",n.idCurrentEse),v.Eb(3),v.xc("ngForOf",n.entreprises)}}function ke(e,t){if(1&e){var i=v.bc();v.ac(0,"li"),v.ac(1,"div",70),v.ac(2,"button",71),v.mc("click",(function(){return v.Oc(i),v.Kc(6).click()})),v.ac(3,"mat-icon",72),v.Yc(4,"file_upload"),v.Zb(),v.Zb(),v.Zb(),v.ac(5,"input",73,74),v.mc("change",(function(e){return v.Oc(i),v.qc(2).getAllAgents(e)})),v.Zb(),v.Zb()}}function Ce(e,t){if(1&e){var i=v.bc();v.ac(0,"li"),v.ac(1,"div",70),v.ac(2,"button",75),v.mc("click",(function(){return v.Oc(i),v.qc(2).addRow()})),v.ac(3,"mat-icon",72),v.Yc(4,"add"),v.Zb(),v.Zb(),v.Zb(),v.Zb()}}function Se(e,t){if(1&e&&(v.ac(0,"td",76),v.Vb(1,"img",77),v.Zb()),2&e){var i=t.value,n=v.qc(2);v.Eb(1),v.yc("src",n.imgLink+i,v.Rc)}}function Oe(e,t){if(1&e&&(v.ac(0,"td",78),v.Yc(1),v.Zb()),2&e){var i=t.value,n=v.qc(2);v.xc("title",i),v.Eb(1),v.ad(" ",n.longText(i,20)," ")}}function we(e,t){if(1&e&&(v.ac(0,"td",78),v.Yc(1),v.Zb()),2&e){var i=t.value,n=v.qc(2);v.xc("title",i),v.Eb(1),v.ad(" ",n.longText(i,20)," ")}}function Le(e,t){if(1&e&&(v.ac(0,"td",78),v.Yc(1),v.Zb()),2&e){var i=t.value,n=v.qc(2);v.xc("title",n.getRole(i)),v.Eb(1),v.ad(" ",n.longText(n.getRole(i),15)," ")}}function Pe(e,t){if(1&e&&(v.ac(0,"span",81),v.Yc(1),v.Zb()),2&e){var i=v.qc().value,n=v.qc(2);v.xc("title",i[0].denomination),v.Eb(1),v.Zc(n.longText(i[0].denomination,20))}}function Me(e,t){if(1&e&&(v.ac(0,"option"),v.Yc(1),v.Zb()),2&e){var i=t.$implicit;v.Eb(1),v.Zc(i.denomination)}}function qe(e,t){if(1&e&&(v.ac(0,"select",82),v.Wc(1,Me,2,1,"option",83),v.Zb()),2&e){var i=v.qc().value;v.Eb(1),v.xc("ngForOf",i)}}function Fe(e,t){if(1&e&&(v.ac(0,"span",81),v.Yc(1),v.Zb()),2&e){var i,n=v.qc().value,a=v.qc(2);v.xc("title",n[0].denomination),v.Eb(1),v.Zc(null==(i=a.getEntrepriseById())?null:i.denomination)}}function De(e,t){if(1&e&&(v.ac(0,"td",76),v.Wc(1,Pe,2,2,"span",79),v.Wc(2,qe,2,1,"select",80),v.Wc(3,Fe,2,2,"span",79),v.Zb()),2&e){var i=t.value,n=v.qc(2);v.Eb(1),v.xc("ngIf",i&&1==i.length&&n.securityServ.admin),v.Eb(1),v.xc("ngIf",i&&i.length>1&&n.securityServ.admin),v.Eb(1),v.xc("ngIf",!n.securityServ.admin)}}function Re(e,t){1&e&&(v.ac(0,"button",87),v.ac(1,"i",13),v.Yc(2,"room"),v.Zb(),v.Zb())}function Ae(e,t){if(1&e){var i=v.bc();v.ac(0,"span"),v.ac(1,"button",85),v.mc("click",(function(){v.Oc(i);var e=t.row;return v.qc(3).showDetails(e)})),v.ac(2,"i",13),v.Yc(3,"remove_red_eye"),v.Zb(),v.Zb(),v.Wc(4,Re,3,0,"button",86),v.Zb()}if(2&e){var n=t.row;v.Eb(4),v.xc("ngIf",(null==n.localites?null:n.localites.length)>0)}}function Ne(e,t){1&e&&(v.ac(0,"ngx-datatable-column",84),v.Wc(1,Ae,5,1,"ng-template",59),v.Zb()),2&e&&v.xc("width",80)}function Ye(e,t){1&e&&(v.ac(0,"i",13),v.Yc(1,"lock_open"),v.Zb())}function Te(e,t){1&e&&(v.ac(0,"i",13),v.Yc(1,"lock_outline"),v.Zb())}var _e=function(e,t){return{"text-success":e,"text-danger":t}};function Ve(e,t){if(1&e){var i=v.bc();v.ac(0,"span"),v.ac(1,"button",85),v.mc("click",(function(){v.Oc(i);var e=t.row;return v.qc(3).showDetails(e)})),v.ac(2,"i",13),v.Yc(3,"remove_red_eye"),v.Zb(),v.Zb(),v.ac(4,"button",88),v.mc("click",(function(){v.Oc(i);var e=t.row;return v.qc(3).updateUser(e)})),v.ac(5,"i",13),v.Yc(6,"mode_edit"),v.Zb(),v.Zb(),v.ac(7,"button",89),v.mc("click",(function(){v.Oc(i);var e=t.row;return v.qc(3).backupPwd(e)})),v.ac(8,"i",13),v.Yc(9,"refresh"),v.Zb(),v.Zb(),v.ac(10,"button",90),v.mc("click",(function(){v.Oc(i);var e=t.row;return v.qc(3).lockRow(e)})),v.Wc(11,Ye,2,0,"i",91),v.Wc(12,Te,2,0,"i",91),v.Zb(),v.Zb()}if(2&e){var n=t.row;v.Eb(10),v.xc("ngClass",v.Cc(3,_e,"actif"==n.status,"bloque"==n.status)),v.Eb(1),v.xc("ngIf","actif"==n.status),v.Eb(1),v.xc("ngIf","bloque"==n.status)}}function We(e,t){1&e&&(v.ac(0,"ngx-datatable-column",84),v.Wc(1,Ve,13,6,"ng-template",59),v.Zb()),2&e&&v.xc("width",130)}function Ue(e,t){if(1&e&&(v.ac(0,"span"),v.Yc(1),v.Zb()),2&e){var i=v.qc().selectedCount,n=v.qc(2);v.Eb(1),v.bd(" ",i.toLocaleString()," ",n.selectedMessage," / ")}}function Be(e,t){if(1&e){var i=v.bc();v.ac(0,"div",92),v.Wc(1,Ue,2,2,"span",25),v.Yc(2),v.Zb(),v.ac(3,"datatable-pager",93),v.mc("change",(function(e){return v.Oc(i),v.qc(),v.Kc(20).onFooterPage(e)}))("change",(function(e){return v.Oc(i),v.qc(2).look(e)})),v.Zb()}if(2&e){var n=t.rowCount,a=t.pageSize,c=t.curPage,r=v.qc(2);v.Eb(1),v.xc("ngIf",r.selectedMessage),v.Eb(1),v.bd(" ",r.totalMessage," ",n.toLocaleString()," "),v.Eb(1),v.xc("pagerLeftArrowIcon","datatable-icon-left")("pagerRightArrowIcon","datatable-icon-right")("pagerPreviousIcon","datatable-icon-prev")("pagerNextIcon","datatable-icon-skip")("page",c)("size",a)("count",n)("hidden",!(n/a>1))}}function ze(e,t){if(1&e){var i=v.bc();v.ac(0,"section",41),v.ac(1,"div",42),v.ac(2,"div",43),v.ac(3,"div",44),v.ac(4,"div",45),v.ac(5,"div",46),v.ac(6,"div",28),v.ac(7,"div",47),v.ac(8,"div",48),v.ac(9,"ul",49),v.ac(10,"li",50),v.ac(11,"label",51),v.ac(12,"i",52),v.Yc(13,"search"),v.Zb(),v.Zb(),v.ac(14,"input",53),v.mc("keyup",(function(e){return v.Oc(i),v.qc().filterDatatable(e.target.value)}))("ngModelChange",(function(e){return v.Oc(i),v.qc().searchValue=e})),v.Zb(),v.Zb(),v.Wc(15,ye,5,2,"li",54),v.Zb(),v.ac(16,"ul",55),v.Wc(17,ke,7,0,"li",25),v.Wc(18,Ce,5,0,"li",25),v.Zb(),v.Zb(),v.ac(19,"ngx-datatable",56,57),v.ac(21,"ngx-datatable-column",58),v.Wc(22,Se,2,1,"ng-template",59),v.Zb(),v.ac(23,"ngx-datatable-column",60),v.Wc(24,Oe,2,2,"ng-template",59),v.Zb(),v.ac(25,"ngx-datatable-column",61),v.Wc(26,we,2,2,"ng-template",59),v.Zb(),v.ac(27,"ngx-datatable-column",62),v.Wc(28,Le,2,2,"ng-template",59),v.Zb(),v.ac(29,"ngx-datatable-column",63),v.Wc(30,De,4,3,"ng-template",59),v.Zb(),v.Wc(31,Ne,2,1,"ngx-datatable-column",64),v.Wc(32,We,2,1,"ngx-datatable-column",64),v.ac(33,"ngx-datatable-footer"),v.Wc(34,Be,4,11,"ng-template",65),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=v.qc();v.Eb(14),v.xc("ngModel",n.searchValue),v.Eb(1),v.xc("ngIf",n.securityServ.admin),v.Eb(2),v.xc("ngIf",n.entreprises&&n.entreprises.length>0&&n.securityServ.admin),v.Eb(1),v.xc("ngIf",n.entreprises&&n.entreprises.length>0&&n.securityServ.admin),v.Eb(1),v.xc("rows",n.data)("columns",n.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),v.Eb(2),v.xc("width",10),v.Eb(2),v.xc("width",130),v.Eb(2),v.xc("width",130),v.Eb(2),v.xc("width",80),v.Eb(2),v.xc("width",130),v.Eb(2),v.xc("ngIf",!n.securityServ.admin),v.Eb(1),v.xc("ngIf",n.securityServ.admin)}}function Ge(e,t){if(1&e&&v.Vb(0,"img",94),2&e){var i=v.qc();v.xc("src",i.imgLink+(null==i.selectedRowData?null:i.selectedRowData.image),v.Rc)}}function $e(e,t){if(1&e&&v.Vb(0,"img",94),2&e){var i=v.qc();v.xc("src",i.newUserImg,v.Rc)}}function je(e,t){1&e&&(v.ac(0,"div",95),v.Yc(1,"Nouvel utilisateur"),v.Zb())}function Ke(e,t){if(1&e&&(v.ac(0,"div",95),v.Yc(1),v.Zb()),2&e){var i=v.qc();v.Eb(1),v.Zc(i.editForm.get("nom").value)}}function He(e,t){if(1&e&&(v.ac(0,"div",95),v.Yc(1),v.Zb()),2&e){var i=v.qc();v.Eb(1),v.Zc(null==i.selectedRowData?null:i.selectedRowData.nom)}}function Je(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-option",96),v.mc("click",(function(){v.Oc(i);var e=t.$implicit;return v.qc().selectOutUser(e)})),v.Yc(1),v.Zb()}if(2&e){var n=t.$implicit;v.xc("value",n.nom)("title",n.nom+" - "+n.username),v.Eb(1),v.bd(" ",n.nom," - ",n.username," ")}}function Xe(e,t){1&e&&(v.ac(0,"mat-error"),v.Yc(1," Le nom complet est requise "),v.Zb())}function Qe(e,t){1&e&&(v.ac(0,"mat-error"),v.Yc(1," Le login est requis "),v.Zb())}function et(e,t){if(1&e&&(v.ac(0,"div",28),v.ac(1,"div",29),v.ac(2,"mat-form-field",20),v.ac(3,"mat-label"),v.Yc(4,"Login"),v.Zb(),v.Vb(5,"input",97),v.ac(6,"mat-icon",24),v.Yc(7,"assignment_ind"),v.Zb(),v.Wc(8,Qe,2,0,"mat-error",25),v.Zb(),v.Zb(),v.Zb()),2&e){var i=v.qc();v.Eb(8),v.xc("ngIf",i.editForm.get("username").hasError("required"))}}function tt(e,t){if(1&e&&v.Vb(0,"input",98),2&e){var i=v.qc();v.xc("value",i.firstDep)}}function it(e,t){if(1&e&&(v.ac(0,"mat-option",69),v.Yc(1),v.Zb()),2&e){var i=t.$implicit;v.xc("value",i),v.Eb(1),v.Zc(i)}}var nt=function(){return{standalone:!0}};function at(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-select",99),v.mc("ngModelChange",(function(e){return v.Oc(i),v.qc().firstDep=e}))("selectionChange",(function(e){return v.Oc(i),v.qc().depChange(e.value)})),v.Wc(1,it,2,2,"mat-option",68),v.Zb()}if(2&e){var n=v.qc();v.xc("ngModel",n.firstDep)("ngModelOptions",v.Ac(3,nt)),v.Eb(1),v.xc("ngForOf",n.dep)}}function ct(e,t){1&e&&v.Vb(0,"input",100)}function rt(e,t){if(1&e&&(v.ac(0,"mat-option",103),v.Yc(1),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.xc("value",i)("hidden",!n.securityServ.admin&&("Superviseur"==i||"Superviseur g\xe9n\xe9ral"==i||"Superviseur adjoint"==i)),v.Eb(1),v.Zc(i)}}function ot(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-select",101),v.mc("selectionChange",(function(e){return v.Oc(i),v.qc().roleChange(e.value)}))("selectionChange",(function(){return v.Oc(i),v.qc().initByRole()})),v.Wc(1,rt,2,3,"mat-option",102),v.Zb()}if(2&e){var n=v.qc();v.Eb(1),v.xc("ngForOf",n.roles)}}function lt(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-checkbox",113),v.mc("change",(function(){v.Oc(i);var e=t.$implicit,n=v.qc(2).$implicit;return v.qc(2).checksubMenuChange(n.id,e.id)})),v.Yc(1),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc(2).$implicit,c=v.qc(2);v.xc("checked",c.subMenuIsPick(a.id,n.id)),v.Eb(1),v.Zc(n.title)}}function st(e,t){if(1&e&&(v.ac(0,"section",117),v.Wc(1,lt,2,2,"mat-checkbox",118),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.xc("ngForOf",i.submenu)}}function ut(e,t){1&e&&(v.ac(0,"span"),v.Yc(1,"Il n'y a pas de sous-menu"),v.Zb())}var dt=function(e){return{"mt-4":e}};function bt(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-expansion-panel",108),v.ac(1,"mat-expansion-panel-header",109,110),v.mc("click",(function(){return v.Oc(i),v.Kc(2)._toggle()})),v.ac(3,"mat-panel-title",111),v.mc("click",(function(){return v.Oc(i),v.Kc(2)._toggle()})),v.Yc(4),v.Zb(),v.ac(5,"mat-panel-description"),v.ac(6,"section",112),v.ac(7,"mat-checkbox",113),v.mc("change",(function(){v.Oc(i);var e=t.$implicit;return v.qc(2).checkMenuChange(e.id)})),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(8,"div",28),v.ac(9,"div",114),v.ac(10,"div",45),v.ac(11,"div",115),v.Wc(12,st,2,1,"section",116),v.Wc(13,ut,2,0,"span",25),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc(2);v.xc("ngClass",v.Bc(5,dt,0==a)),v.Eb(4),v.Zc(n.title),v.Eb(3),v.xc("checked",c.menuIsPick(n.id)),v.Eb(5),v.xc("ngIf",n.submenu.length>0),v.Eb(1),v.xc("ngIf",0==n.submenu.length)}}function mt(e,t){if(1&e&&(v.ac(0,"div",28),v.ac(1,"div",29),v.ac(2,"mat-expansion-panel",104),v.ac(3,"mat-expansion-panel-header",105),v.ac(4,"mat-panel-title",106),v.Yc(5,"Menu"),v.Zb(),v.Vb(6,"mat-panel-description"),v.Zb(),v.Wc(7,bt,14,7,"mat-expansion-panel",107),v.Zb(),v.Zb(),v.Zb()),2&e){var i=v.qc();v.Eb(7),v.xc("ngForOf",i.sidebarItems)}}function ft(e,t){if(1&e&&v.Vb(0,"input",125),2&e){var i=v.qc().$implicit,n=v.qc();v.xc("value",n.getDenomination(i.value))}}function pt(e,t){1&e&&v.Vb(0,"mat-option",128)}function ht(e,t){if(1&e&&(v.ac(0,"mat-option",103),v.Yc(1),v.Zb()),2&e){var i=t.$implicit,n=v.qc(3);v.xc("value",i.id)("hidden",n.inTabEse(i.id)),v.Eb(1),v.Zc(i.denomination)}}function vt(e,t){if(1&e&&(v.ac(0,"mat-select",126),v.Wc(1,pt,1,0,"mat-option",127),v.Wc(2,ht,2,3,"mat-option",102),v.Zb()),2&e){var i=v.qc(),n=i.$implicit,a=i.index,c=v.qc();v.xc("formControl",n),v.Eb(1),v.xc("ngIf",a>0),v.Eb(1),v.xc("ngForOf",c.entreprises)}}function gt(e,t){if(1&e){var i=v.bc();v.ac(0,"div",119),v.ac(1,"div",120),v.ac(2,"mat-form-field",121),v.ac(3,"mat-label"),v.Yc(4),v.Zb(),v.Wc(5,ft,1,1,"input",122),v.Wc(6,vt,3,3,"mat-select",123),v.Zb(),v.ac(7,"mat-icon",124),v.mc("click",(function(){return v.Oc(i),v.qc().addEntreprise()})),v.Yc(8,"add_circle_outline"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.xc("hidden",!c.securityServ.admin),v.Eb(1),v.xc("hidden",c.entreprises&&c.entreprises.length<2),v.Eb(3),v.ad("Entit\xe9 ",a+1,""),v.Eb(1),v.xc("ngIf",c.details),v.Eb(1),v.xc("ngIf",!c.details),v.Eb(1),v.xc("hidden",a!=c.tabEse.controls.length-1||!n.value||c.details)}}var Et=function(e){return{"mt-3":e}};function xt(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-chip",136),v.ac(1,"span",137),v.ac(2,"section",138),v.ac(3,"mat-checkbox",139),v.mc("change",(function(){v.Oc(i);var e=t.$implicit;return v.qc(2).checkLoc(e)})),v.Yc(4),v.Zb(),v.Zb(),v.Zb(),v.ac(5,"span",140),v.ac(6,"mat-icon",141),v.mc("click",(function(){v.Oc(i);var e=t.$implicit;return v.qc(2).openFirst(e.id)})),v.Yc(7,"remove_red_eye"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc(2);v.xc("ngClass",v.Bc(4,Et,0!=a)),v.Eb(3),v.xc("disabled",c.details||c.securityServ.superviseurGene)("checked",c.inTab(n.id,c.tabLoc)),v.Eb(1),v.Zc(n.nom)}}function It(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-chip",148),v.ac(1,"span",137),v.ac(2,"section",138),v.ac(3,"mat-checkbox",139),v.mc("change",(function(){v.Oc(i);var e=t.$implicit;return v.qc(3).checkLoc(e)})),v.Yc(4),v.Zb(),v.Zb(),v.Zb(),v.ac(5,"span",140),v.ac(6,"mat-icon",141),v.mc("click",(function(){v.Oc(i);var e=t.$implicit,n=v.qc().index;return v.qc(2).openOther(n+1,e.id)})),v.Yc(7,"remove_red_eye"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc().index,c=v.qc(2);v.xc("ngClass",v.Bc(4,Et,0!=a)),v.Eb(3),v.xc("disabled",c.details||c.securityServ.superviseurGene)("checked",c.inTab(n.id,c.tabLoc)),v.Eb(1),v.Zc(n.nom)}}function Zt(e,t){1&e&&(v.ac(0,"p",149),v.Yc(1,"Cette subdivision est vide"),v.Zb())}function yt(e,t){if(1&e&&(v.ac(0,"div",142),v.ac(1,"p",143),v.Yc(2),v.Zb(),v.Vb(3,"hr"),v.ac(4,"mat-chip-list",144),v.ac(5,"small",145),v.Yc(6),v.Zb(),v.Wc(7,It,8,6,"mat-chip",146),v.Zb(),v.Wc(8,Zt,2,0,"p",147),v.Zb()),2&e){var i,n=t.$implicit,a=t.index,c=v.qc(2);v.xc("hidden",!c.openLocalite||!c.getOnById(n)),v.Eb(2),v.Zc(null==(i=c.getOnById(n))?null:i.nom),v.Eb(4),v.Zc(c.subdivisions[a+1]),v.Eb(1),v.xc("ngForOf",c.getCurrentSubById(n)),v.Eb(1),v.xc("ngIf",0==c.getCurrentSubById(n).length)}}function kt(e,t){if(1&e){var i=v.bc();v.ac(0,"div",28),v.ac(1,"div",29),v.ac(2,"mat-expansion-panel",104),v.ac(3,"mat-expansion-panel-header",105),v.ac(4,"mat-panel-title",106),v.Yc(5,"Affectation"),v.Zb(),v.Vb(6,"mat-panel-description"),v.Zb(),v.ac(7,"div",129),v.ac(8,"p",130),v.Yc(9),v.Zb(),v.Vb(10,"hr"),v.ac(11,"mat-chip-list",131),v.Wc(12,xt,8,6,"mat-chip",132),v.Zb(),v.Zb(),v.Wc(13,yt,9,5,"div",133),v.ac(14,"section",134),v.ac(15,"mat-checkbox",135),v.mc("change",(function(){return v.Oc(i),v.qc().checkAllLoc()})),v.Yc(16,"Tous cocher"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=v.qc();v.Eb(9),v.Zc(n.subdivisions[0]),v.Eb(3),v.xc("ngForOf",n.firstSub(n.localites)),v.Eb(1),v.xc("ngForOf",n.tabOpen),v.Eb(1),v.xc("hidden",n.details||n.securityServ.superviseurGene),v.Eb(1),v.xc("checked",n.allLocIsChec())}}var Ct,St=((Ct=function(){function e(t,i,n,a,c){var r=this;_classCallCheck(this,e),this.fb=t,this._snackBar=i,this.adminServ=n,this.sharedService=a,this.securityServ=c,this.rows=[],this.data_dii=[],this.colNmbre=5,this.newUserImg="",this.totalMessage="Total",this.data=[],this.filteredData=[],this.dep=["Direction financi\xe8re","Direction comptable","Direction du patrimoine","Autre (\xe0 pr\xe9ciser)"],this.roles=["Chef d'\xe9quipe de comptage","Membre d'\xe9quipe de comptage","Superviseur","Superviseur g\xe9n\xe9ral","Superviseur adjoint","Pr\xe9sident du comit\xe9","Membre du comit\xe9"],this.show=!1,this.imgLink="",this.defaultImag="exemple.jpg",this.myId="",this.tabEse=new m.d([]),this.autreDep=!1,this.entreprises=[],this.details=!1,this.update=!1,this.firstDep="",this.localites=[],this.separatorKeysCodes=[l.g,l.c],this.fruitCtrl=new m.f,this.tabLoc=[],this.idCurrentEse=0,this.idEseLocalStor="",this.usersTampon=[],this.isMembreEquipe=!1,this.isGuest=!1,this.tabMenu=[],this.searchValue="",this.subdivisions=[],this.tabOpen=[],this.openLocalite=null,this.getEntrepriseById=function(){var e,t;return null===(t=null===(e=r.securityServ.user)||void 0===e?void 0:e.entreprises)||void 0===t?void 0:t.find((function(e){return e.id==r.idEseLocalStor}))},this.editForm=this.fb.group({id:[0],image:[""],username:["",[m.x.required]],nom:["",[m.x.required]],poste:[""],departement:[""],status:["actif"],role:["",[m.x.required]]}),this.imgLink=this.sharedService.baseUrl+"/images/",this.newUserImg=this.imgLink+this.defaultImag}return _createClass(e,[{key:"ngOnInit",value:function(){this.securityServ.showLoadingIndicatior.next(!0),this.myId=localStorage.getItem("idUser"),this.idEseLocalStor=localStorage.getItem("currentEse"),this.getUsers(),this.getEntreprises(),this.securityServ.getUser(),this.sidebarItems=this.useInSideBI(be.a),this.outUsers=[]}},{key:"useInSideBI",value:function(e){var t=[];return e.forEach((function(e){var i=[];(e.roles.indexOf("ROLE_Guest")>-1||e.roles.indexOf("all")>-1)&&(e.submenu.forEach((function(e){(e.roles.indexOf("ROLE_Guest")>-1||e.roles.indexOf("all")>-1)&&i.push({id:e.id,title:e.title,submenu:[]})})),t.push({id:e.id,title:e.title,submenu:i}))})),t}},{key:"checkMenuChange",value:function(e){var t=this.getIndexMenu(e);t>-1?this.tabMenu.splice(t,1):this.tabMenu.push([e,[]])}},{key:"getIndexMenu",value:function(e){var t=-1;if(this.tabMenu)for(var i=0;i<this.tabMenu.length;i++)if(this.tabMenu[i][0]==e){t=i;break}return t}},{key:"menuIsPick",value:function(e){return this.getIndexMenu(e)>-1}},{key:"checksubMenuChange",value:function(e,t){var i=this.getIndexMenu(e);-1==i&&(this.tabMenu.push([e,[]]),i=this.tabMenu.length-1);var n=this.tabMenu[i][1],a=n.indexOf(t);a>-1?n.splice(a,1):n.push(t),this.tabMenu[i][1]=n,n&&0==n.length&&this.tabMenu.splice(i,1)}},{key:"subMenuIsPick",value:function(e,t){var i=this.getIndexMenu(e),n=!1;return i>-1&&(n=this.tabMenu[i][1].indexOf(t)>-1),n}},{key:"roleChange",value:function(e){this.isMembreEquipe=!1,this.isGuest=!1,"Chef d'\xe9quipe"==e||"Chef d'\xe9quipe de comptage"==e||"ROLE_CE"==e||"Membre d'\xe9quipe de comptage"==e||"Membre inventaire"==e||"ROLE_MI"==e?this.isMembreEquipe=!0:"Guest"!=e&&"ROLE_Guest"!=e||(this.isGuest=!0)}},{key:"initByRole",value:function(){this.tabLoc=[],this.tabMenu=[]}},{key:"entiteChange",value:function(e){if(0!=e){this.entreprises.find((function(t){return t.id==e}));var t=this.usersTampon.filter((function(t){return t.entreprises.find((function(t){return t.id==e}))}));this.setTableData(t)}else this.setTableData(this.usersTampon)}},{key:"getUsers",value:function(){var e=this;this.adminServ.getUsers().then((function(t){var i=[];t&&t.length>0&&(i=(i=t.reverse()).filter((function(t){return t.id!=e.myId&&t.roles&&"ROLE_Admin"!=t.roles[0]}))),e.setTableData(i),e.usersTampon=i,e.show=!0,e.securityServ.showLoadingIndicatior.next(!1),e.idCurrentEse=0,e.entiteChange(0),""!=e.searchValue&&e.filterDatatable(e.searchValue)}),(function(t){console.log(t),e.securityServ.showLoadingIndicatior.next(!1)}))}},{key:"setTableData",value:function(e){this.data=e,this.filteredData=e}},{key:"getEntreprises",value:function(){var e=this;this.adminServ.getEntreprise().then((function(t){var i,n;e.entreprises=t,t&&1==t.length&&(e.idCurrentEse=t[0].id);var a=e.idEseLocalStor?e.getEntreprise(e.idEseLocalStor):null;e.localites=null==a?void 0:a.localites,e.securityServ.superviseurAdjoint&&(e.localites=e.localites.filter((function(t){var i;return(null===(i=t.createur)||void 0===i?void 0:i.id)==e.myId}))),e.subdivisions=(null==a?void 0:a.subdivisions)?null==a?void 0:a.subdivisions:[],0==(null===(i=e.tabOpen)||void 0===i?void 0:i.length)&&(null===(n=e.subdivisions)||void 0===n||n.forEach((function(t){return e.tabOpen.push(0)})))}),(function(t){e.securityServ.showLoadingIndicatior.next(!1),console.log(t)}))}},{key:"getEntreprise",value:function(e){var t=null;return this.entreprises&&this.entreprises.length>0&&e&&(t=this.entreprises.find((function(t){return t.id==e}))),t}},{key:"getOneEntreprise",value:function(e){var t=this;this.adminServ.getOneEntreprise(e).then((function(e){t.localites=e.localites}),(function(e){console.log(e)}))}},{key:"addEntreprise",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tabEse.push(new m.f(e))}},{key:"depChange",value:function(e){this.autreDep=!1,this.editForm.get("departement").setValue(""),e!=this.dep[this.dep.length-1]?this.editForm.get("departement").setValue(e):this.autreDep=!0}},{key:"nomChange",value:function(e){if(!this.update){var t=e.replace(/\ /g,"").replace(/\\xe9/g,"e").replace(/\\xe8/g,"e");this.editForm.get("username").setValue(t+"@gestion-immo.com")}}},{key:"keyUpNomChange",value:function(e){var t=this;this.adminServ.getUsers("status=out&nom="+e).then((function(e){t.outUsers=e}))}},{key:"selectOutUser",value:function(e){this.update=!0,this.editRow(e)}},{key:"updateUser",value:function(e){this.details=!1,this.autreDep=!1,this.tabMenu=[],this.dep.includes(e.departement)?this.firstDep=e.departement:(this.firstDep=this.dep[this.dep.length-1],this.autreDep=!0),this.traitementUpdate(e),this.update=!0,this.editRow(e)}},{key:"traitementUpdate",value:function(e){var t,i=this;this.roleChange(e.roles[0]),this.tabEse=new m.d([]),e.menu&&(this.tabMenu=e.menu),e.entreprises.forEach((function(e){return i.addEntreprise(e.id)})),this.tabLoc=[],e.localites.forEach((function(e){return i.checkLoc(e,!0)})),this.tabOpen=[],null===(t=this.subdivisions)||void 0===t||t.forEach((function(e){return i.tabOpen.push(0)}))}},{key:"editRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.formDirective&&this.formDirective.resetForm(),this.editForm=this.fb.group({id:[{value:e.id,disabled:t}],image:[{value:e.image,disabled:t}],username:[{value:e.username,disabled:t},[m.x.required]],nom:[{value:e.nom,disabled:t},[m.x.required]],poste:[{value:e.poste,disabled:t}],departement:[{value:e.departement,disabled:t}],status:["actif"],role:[{value:this.getRole(e.roles),disabled:t},[m.x.required]]}),this.selectedRowData=e}},{key:"lockRow",value:function(e){var t=this,i="d\xe9bloqu\xe9",n="d\xe9blocage";"actif"==e.status&&(i="bloqu\xe9",n="blocage"),p.a.fire({title:"Confirmation",text:"Voulez-vous confirmer le "+n+" de l'utilisateur "+e.nom+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then((function(n){n.value&&(t.securityServ.showLoadingIndicatior.next(!0),t.adminServ.lockUser(e.id).then((function(e){t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-success","Utilisateur "+i,"top","center"),t.getUsers()}),(function(e){t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-red",e,"top","right")})))}))}},{key:"longText",value:function(e,t){return this.sharedService.longText(e,t)}},{key:"addRow",value:function(){var e,t=this;this.firstDep="",this.details=!1,this.autreDep=!1,this.update=!1,this.isGuest=!1,this.isMembreEquipe=!1,this.tabEse=new m.d([]),this.tabLoc=[];var i="";this.tabOpen=[],null===(e=this.subdivisions)||void 0===e||e.forEach((function(e){return t.tabOpen.push(0)})),this.entreprises&&this.entreprises.length>0&&(i=this.entreprises[0].id),this.addEntreprise(i),this.editRow({id:0,username:"",nom:"",poste:"",departement:"",role:"",image:this.defaultImag,status:"actif"})}},{key:"showDetails",value:function(e){this.autreDep=!1,this.traitementUpdate(e),this.dep.includes(e.departement)?this.firstDep=e.departement:(this.firstDep=this.dep[this.dep.length-1],this.autreDep=!0),this.details=!0,this.editRow(e,!0)}},{key:"getDenomination",value:function(e){var t="";return this.entreprises&&this.entreprises.length>0&&e&&(t=this.entreprises.find((function(t){return t.id==e})).denomination),t}},{key:"onEditSave",value:function(e){var t=e.value;t.entreprises=this.getDataEse(t),t.currentEse=1==t.entreprises.length?t.entreprises[0]:null;var i=this.getRole(t.role,!1);t.roles=[i],t.menu=this.getDataMenu(i),t.localites=this.getDataLoc();var n=this.changeSuperviseur(t.role,t.id);n[0]?this.textChangeSup(t.role,n):this.sendData(t)}},{key:"sendData",value:function(e){var t=this;this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.addUser(e).then((function(e){t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-success","Enregistr\xe9","top","center"),t.closeEditModal.nativeElement.click(),t.getUsers(),t.securityServ.admin&&t.getEntreprises()}),(function(e){console.log(e),t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-red",e,"top","right")}))}},{key:"textChangeSup",value:function(e,t){var i="Vous ne pouvez pas cr\xe9e un "+this.sharedService.decapitalize(e)+" car vous avez d\xe9ja un "+t[2]+" dans l'entit\xe9 "+t[1].denomination;this.showNotification("bg-red",i,"top","right",7e3)}},{key:"getDataEse",value:function(e){if(!this.securityServ.admin&&0==e.id)return["/api/entreprises/"+localStorage.getItem("idEse")];var t=[];return this.tabEse.value.forEach((function(e){e&&t.push("/api/entreprises/"+e)})),t}},{key:"getDataMenu",value:function(e){return"ROLE_Guest"!=e?[]:this.tabMenu}},{key:"getDataLoc",value:function(){var e=[];return this.tabLoc.forEach((function(t){t&&e.push("/api/localites/"+t)})),e}},{key:"getRole",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="",n="";return!e||"Superviseur"!=e&&"ROLE_Superviseur"!=e[0]?!e||"Superviseur g\xe9n\xe9ral"!=e&&"ROLE_SuperViseurGene"!=e[0]?!e||"Superviseur adjoint"!=e&&"ROLE_SuperViseurAdjoint"!=e[0]?!e||"Guest"!=e&&"ROLE_Guest"!=e[0]?!e||"Pr\xe9sident du comit\xe9"!=e&&"ROLE_PC"!=e[0]?!e||"Membre du comit\xe9"!=e&&"ROLE_MC"!=e[0]?!e||"Chef d'\xe9quipe"!=e&&"ROLE_CE"!=e[0]&&"Chef d'\xe9quipe de comptage"!=e?!e||"Membre inventaire"!=e&&"ROLE_MI"!=e[0]&&"Membre d'\xe9quipe de comptage"!=e||(i="Membre d'\xe9quipe de comptage",n="ROLE_MI"):(i="Chef d'\xe9quipe de comptage",n="ROLE_CE"):(i="Membre du comit\xe9",n="ROLE_MC"):(i="Pr\xe9sident du comit\xe9",n="ROLE_PC"):(i="Guest",n="ROLE_Guest"):(i="Superviseur adjoint",n="ROLE_SuperViseurAdjoint"):(i="Superviseur g\xe9n\xe9ral",n="ROLE_SuperViseurGene"):(i="Superviseur",n="ROLE_Superviseur"),t?i:n}},{key:"filterDatatable",value:function(e){var t=e.toLowerCase(),i=this.colNmbre,n=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter((function(e){for(var a=0;a<i;a++)if(-1!==e[n[a]].toString().toLowerCase().indexOf(t)||!t)return!0})),this.table.offset=0}},{key:"openSnackBar",value:function(e){this._snackBar.open(e,"",{duration:2e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["bg-red"]})}},{key:"showNotification",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3;this._snackBar.open(t,"",{duration:a,verticalPosition:i,horizontalPosition:n,panelClass:[e,"color-white"]})}},{key:"backupPwd",value:function(e){var t=this;p.a.fire({title:"Confirmation",text:"Voulez-vous confirmer la r\xe9initialisation du mot de passe de l'utilisateur "+e.nom+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui",cancelButtonText:"Non"}).then((function(i){i.value&&(t.securityServ.showLoadingIndicatior.next(!0),t.adminServ.backupPWD(e.id).then((function(e){t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-success","Mot de passe r\xe9initialis\xe9","top","center"),t.getUsers()}),(function(e){t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-red",e,"top","right")})))}))}},{key:"rev",value:function(e){var t=[];return e&&e.length>0&&(t=e,this.sharedService.trier(t,"id",-1)),t}},{key:"inTabEse",value:function(e){return this.tabEse.value.find((function(t){return t==e}))}},{key:"trierSZ",value:function(e){return this.sharedService.trier(e,"id")}},{key:"firstSub",value:function(e){return null==e?void 0:e.filter((function(e){var t;return(null===(t=e.position)||void 0===t?void 0:t.length)>0}))}},{key:"getCurrentSubById",value:function(e){var t;return(null===(t=this.getOnById(e))||void 0===t?void 0:t.subdivisions)||[]}},{key:"getOnById",value:function(e){var t;return(null===(t=this.localites)||void 0===t?void 0:t.find((function(t){return t.id==e})))||null}},{key:"openOther",value:function(e,t){this.tabOpen[e]=t,this.offUnderSub(e+1)}},{key:"offUnderSub",value:function(e){for(var t=e;t<this.tabOpen.length;t++)this.tabOpen[t]&&(this.tabOpen[t]=0)}},{key:"openFirst",value:function(e){this.openLocalite=e,this.tabOpen[0]=e,this.offUnderSub(1)}},{key:"inTab",value:function(e,t){return null==t?void 0:t.find((function(t){return t==e}))}},{key:"checkLoc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.tabLoc.indexOf(e.id);if(i>-1&&!t)this.tabLoc.splice(i,1);else if(i<=-1){this.tabLoc.push(e.id);var n=e.idParent;n&&!this.inTab(n,this.tabLoc)&&this.checkLoc(this.getOnById(n))}}},{key:"checkAllLoc",value:function(){var e=this;this.allLocIsChec()?this.localites.forEach((function(t){e.inTab(t.id,e.tabLoc)&&e.checkLoc(t)})):this.localites.forEach((function(t){e.inTab(t.id,e.tabLoc)||e.checkLoc(t)}))}},{key:"allLocIsChec",value:function(){var e=this,t=!0;return this.localites.forEach((function(i){t&&(t=e.inTab(i.id,e.tabLoc))})),t}},{key:"changeSuperviseur",value:function(e,t){var i=this,n=[!1,null,""];return this.tabEse.value.forEach((function(a){var c=i.entreprises.find((function(e){return e.id==a})),r=(null==c?void 0:c.users)?c.users:[],o=!!r.find((function(e){return"ROLE_Superviseur"==e.roles[0]&&e.id!=t}))&&[!0,"superviseur"],l=!!r.find((function(e){return"ROLE_SuperViseurGene"==e.roles[0]&&e.id!=t}))&&[!0,"superviseur g\xe9n\xe9ral"],s=!!r.find((function(e){return"ROLE_SuperViseurAdjoint"==e.roles[0]&&e.id!=t}))&&[!0,"superviseur adjoint"];if(o[0]&&("Superviseur g\xe9n\xe9ral"==e||"Superviseur adjoint"==e)||(l[0]||s[0])&&"Superviseur"==e){var u=o[0]?o[1]:"";u=s[0]?s[1]:u,n=[!0,c,u=l[0]?l[1]:u]}})),n}},{key:"getAllAgents",value:function(e){var t=this,i=[];console.log();var n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");var a=new FileReader;a.onload=function(e){var n,a;return Object(o.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var c,r,l,s,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c=h.read(e.target.result,{type:"binary"}),this.data_dii=h.utils.sheet_to_json(c.Sheets[c.SheetNames[0]],{header:1,raw:!1}),r=1;r<this.data_dii.length;r++)i.push(this.data_dii[r]);if(0!=this.idCurrentEse){t.next=7;break}this.showNotification("bg-red","Selectionner Une Entit\xe9","top","center"),t.next=33;break;case 7:t.prev=7,s=Object(o.a)(i);case 9:return t.next=11,s.next();case 11:if((l=t.sent).done){t.next=16;break}u=l.value,d={id:0,nom:u[0],entreprises:["api/entreprises/"+this.idCurrentEse],username:u[3],poste:u[1],departement:u[2],password:"azerty",status:"OUT",image:"exemple.jpg"},this.securityServ.showLoadingIndicatior.next(!0),this.adminServ.addUser(d).then((function(e){}));case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),n={error:t.t0};case 21:if(t.prev=21,t.prev=22,t.t1=l&&!l.done&&(a=s.return),!t.t1){t.next=27;break}return t.next=27,a.call(s);case 27:if(t.prev=27,!n){t.next=30;break}throw n.error;case 30:return t.finish(27);case 31:return t.finish(21);case 32:this.securityServ.showLoadingIndicatior.next(!1),this.showNotification("bg-success","Fichier Enregistr\xe9","top","center");case 33:case"end":return t.stop()}}),t,this,[[7,18,21,32],[22,,27,31]])})))},a.readAsBinaryString(n.files[0])}}]),e}()).\u0275fac=function(e){return new(e||Ct)(v.Ub(m.e),v.Ub(g.a),v.Ub(s.a),v.Ub(d.a),v.Ub(b.a))},Ct.\u0275cmp=v.Ob({type:Ct,selectors:[["app-equipe"]],viewQuery:function(e,t){var i;1&e&&(v.Uc(Ee,!0),v.dd(de.e,!0),v.dd(xe,!0),v.dd(Ie,!0)),2&e&&(v.Jc(i=v.nc())&&(t.roleTemplate=i.first),v.Jc(i=v.nc())&&(t.table=i.first),v.Jc(i=v.nc())&&(t.closeEditModal=i.first),v.Jc(i=v.nc())&&(t.formDirective=i.first))},decls:72,vars:21,consts:[["class","content",4,"ngIf"],["id","editModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"formGroup","ngSubmit"],["formDirective","ngForm"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],["alt","avatar",3,"src",4,"ngIf"],[1,"modal-about"],["class","font-weight-bold p-t-10 font-17",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeEditModal",""],[1,"material-icons"],[1,"modal-body",3,"perfectScrollbar"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],["formControlName","status","type","hidden",1,"form-control"],[1,"row","pr-3"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nom",3,"matAutocomplete","keyup","change"],["auto","matAutocomplete"],[3,"value","title","click",4,"ngFor","ngForOf"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","poste"],["class","row",4,"ngIf"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","disabled","true",3,"value",4,"ngIf"],["name","depart",3,"ngModel","ngModelOptions","ngModelChange","selectionChange",4,"ngIf"],[1,"row",3,"hidden"],["matInput","","formControlName","departement"],["matInput","","formControlName","role",4,"ngIf"],["formControlName","role",3,"selectionChange",4,"ngIf"],["class","row mb-2",3,"hidden",4,"ngFor","ngForOf"],[1,"modal-footer",3,"hidden"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-outline-danger","btn-border-radius"],[1,"content"],[1,"container-fluid"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"col-sm-12"],[1,"ngxTableHeader","pl-0","pb-0"],[1,"header-buttons-left","ml-0"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Recherche","type","text","aria-label","Search box",1,"browser-default","search-field","search-team",3,"ngModel","keyup","ngModelChange"],["class","dropdown m-l-20",4,"ngIf"],[1,"header-buttons","m-r-20"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","","sortable","false","prop","image",3,"width"],["ngx-datatable-cell-template",""],["name","Pr\xe9nom et nom","sortable","false","prop","nom",3,"width"],["name","D\xe9partement","sortable","false","prop","departement",3,"width"],["name","R\xf4le","sortable","false","prop","roles",3,"width"],["name","Entit\xe9","sortable","false","prop","entreprises",3,"width"],["name","Actions","sortable","false","class","text-center",3,"width",4,"ngIf"],["ngx-datatable-footer-template",""],["title","Entit\xe9",1,"form-control","select-trie","pl-0","pr-0",3,"ngModel","ngModelChange","change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["type","file","hidden","",3,"change"],["openFileUload",""],["mat-mini-fab","","color","primary","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal",3,"click"],[1,"table-img","padding-0"],["width","40",3,"src"],[1,"table-img","padding-0",3,"title"],[3,"title",4,"ngIf"],["class","form-control no-border pl-0","style","border: none !important;",4,"ngIf"],[3,"title"],[1,"form-control","no-border","pl-0",2,"border","none !important"],[4,"ngFor","ngForOf"],["name","Actions","sortable","false",1,"text-center",3,"width"],["data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal","title","Afficher les detais de l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-info",3,"click"],["class","btn tblActnBtn pointer h-auto text-secondary ml-4","title","Rattacher \xe0 une localit\xe9",4,"ngIf"],["title","Rattacher \xe0 une localit\xe9",1,"btn","tblActnBtn","pointer","h-auto","text-secondary","ml-4"],["data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#editModal","title","Modifier l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-secondary",3,"click"],["title","R\xe9initialiser le mot de passe de l'utilisateur",1,"btn","tblActnBtn","pointer","h-auto","text-primary",3,"click"],["title","Bloquer/D\xe9bloquer un utilisateur",1,"btn","tblActnBtn","pointer","h-auto",3,"ngClass","click"],["class","material-icons",4,"ngIf"],[1,"page-count"],[3,"pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","hidden","change"],["alt","avatar",3,"src"],[1,"font-weight-bold","p-t-10","font-17"],[3,"value","title","click"],["matInput","","formControlName","username"],["matInput","","disabled","true",3,"value"],["name","depart",3,"ngModel","ngModelOptions","ngModelChange","selectionChange"],["matInput","","formControlName","role"],["formControlName","role",3,"selectionChange"],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],[1,"example-full-width","mb-4","pl-0","pr-0"],[2,"background-color","#d8d5d538"],[1,"pl-0","col-10"],["class","example-full-width mb-4 pl-0 pr-0","hideToggle","",3,"ngClass",4,"ngFor","ngForOf"],["hideToggle","",1,"example-full-width","mb-4","pl-0","pr-0",3,"ngClass"],[1,"pr-1",2,"background-color","#eab9b9",3,"click"],["panelH",""],[1,"pl-0","col-11","pt-4","mr-0",3,"click"],[1,"example-section","row"],[1,"example-margin",3,"checked","change"],[1,"col-lg-12","col-md-12","col-sm-12","col-12","mb-0"],[1,"body","pl-0","pr-0"],["class","example-section row all-height",4,"ngIf"],[1,"example-section","row","all-height"],["class","example-margin",3,"checked","change",4,"ngFor","ngForOf"],[1,"row","mb-2",3,"hidden"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0",3,"hidden"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],["matInput","","disabled","",3,"value",4,"ngIf"],[3,"formControl",4,"ngIf"],["matSuffix","","title","Ajouter une entit\xe9",1,"pointer",3,"hidden","click"],["matInput","","disabled","",3,"value"],[3,"formControl"],["value","",4,"ngIf"],["value",""],[1,"p-2","mt-3","pb-4","box-loc"],[1,"ml-2"],["aria-label","Fish selection",1,"mt-4"],["class","w-100 color-chips",3,"ngClass",4,"ngFor","ngForOf"],["class","p-2 mt-4 pb-4 box-loc",3,"hidden",4,"ngFor","ngForOf"],[1,"example-section",3,"hidden"],[1,"example-margin","pt-2",3,"checked","change"],[1,"w-100","color-chips",3,"ngClass"],[1,"col-11","pl-0"],[1,"example-section","pick-loc"],[1,"example-margin","pt-2",3,"disabled","checked","change"],[1,"col-1"],["title","Afficher",1,"icone-affectation","pointer","text-info",3,"click"],[1,"p-2","mt-4","pb-4","box-loc",3,"hidden"],[1,"mt-3","ml-2"],["aria-label","Fish selection"],[1,"ml-3",2,"font-style","italic"],["class","w-100 color-chips","color","primary",3,"ngClass",4,"ngFor","ngForOf"],["class","ml-2 mt-2",4,"ngIf"],["color","primary",1,"w-100","color-chips",3,"ngClass"],[1,"ml-2","mt-2"]],template:function(e,t){if(1&e&&(v.Wc(0,ze,35,19,"section",0),v.ac(1,"div",1),v.ac(2,"div",2),v.ac(3,"form",3,4),v.mc("ngSubmit",(function(){return t.onEditSave(t.editForm)})),v.ac(5,"div",5),v.ac(6,"div",6),v.ac(7,"div",7),v.Wc(8,Ge,1,1,"img",8),v.Wc(9,$e,1,1,"img",8),v.ac(10,"div",9),v.Wc(11,je,2,0,"div",10),v.Wc(12,Ke,2,1,"div",10),v.Wc(13,He,2,1,"div",10),v.Zb(),v.Zb(),v.Zb(),v.ac(14,"button",11,12),v.ac(16,"i",13),v.Yc(17,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(18,"div",14),v.ac(19,"div"),v.ac(20,"div",15),v.Vb(21,"input",16),v.Vb(22,"input",17),v.Zb(),v.ac(23,"div",18),v.ac(24,"div",19),v.ac(25,"mat-form-field",20),v.ac(26,"mat-label"),v.Yc(27,"Pr\xe9nom et nom"),v.Zb(),v.ac(28,"input",21),v.mc("keyup",(function(e){return t.keyUpNomChange(e.target.value)}))("change",(function(e){return t.nomChange(e.target.value)})),v.Zb(),v.ac(29,"mat-autocomplete",null,22),v.Wc(31,Je,2,4,"mat-option",23),v.Zb(),v.ac(32,"mat-icon",24),v.Yc(33,"face"),v.Zb(),v.Wc(34,Xe,2,0,"mat-error",25),v.Zb(),v.Zb(),v.ac(35,"div",19),v.ac(36,"mat-form-field",20),v.ac(37,"mat-label"),v.Yc(38,"Poste"),v.Zb(),v.Vb(39,"input",26),v.ac(40,"mat-icon",24),v.Yc(41,"card_travel"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Wc(42,et,9,1,"div",27),v.ac(43,"div",28),v.ac(44,"div",29),v.ac(45,"mat-form-field",20),v.ac(46,"mat-label"),v.Yc(47,"Direction"),v.Zb(),v.Wc(48,tt,1,1,"input",30),v.Wc(49,at,2,4,"mat-select",31),v.Zb(),v.Zb(),v.Zb(),v.ac(50,"div",32),v.ac(51,"div",29),v.ac(52,"mat-form-field",20),v.ac(53,"mat-label"),v.Yc(54,"Autre direction"),v.Zb(),v.Vb(55,"input",33),v.Zb(),v.Zb(),v.Zb(),v.ac(56,"div",28),v.ac(57,"div",29),v.ac(58,"mat-form-field",20),v.ac(59,"mat-label"),v.Yc(60,"R\xf4le"),v.Zb(),v.Wc(61,ct,1,0,"input",34),v.Wc(62,ot,2,1,"mat-select",35),v.Zb(),v.Zb(),v.Zb(),v.Wc(63,mt,8,1,"div",27),v.Wc(64,gt,9,6,"div",36),v.Wc(65,kt,17,5,"div",27),v.ac(66,"div",37),v.ac(67,"div",38),v.ac(68,"button",39),v.Yc(69,"Enregistrer"),v.Zb(),v.ac(70,"button",40),v.Yc(71,"Annuler"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()),2&e){var i=v.Kc(30);v.xc("ngIf",t.show),v.Eb(3),v.xc("formGroup",t.editForm),v.Eb(5),v.xc("ngIf",null==t.selectedRowData?null:t.selectedRowData.image),v.Eb(1),v.xc("ngIf",!(null!=t.selectedRowData&&t.selectedRowData.image)),v.Eb(2),v.xc("ngIf",!(null!=t.selectedRowData&&t.selectedRowData.nom||t.editForm.get("nom").value)),v.Eb(1),v.xc("ngIf",!(null!=t.selectedRowData&&t.selectedRowData.nom)&&t.editForm.get("nom").value),v.Eb(1),v.xc("ngIf",null==t.selectedRowData?null:t.selectedRowData.nom),v.Eb(15),v.xc("matAutocomplete",i),v.Eb(3),v.xc("ngForOf",t.outUsers),v.Eb(3),v.xc("ngIf",t.editForm.get("nom").hasError("required")),v.Eb(8),v.xc("ngIf",t.securityServ.admin),v.Eb(6),v.xc("ngIf",t.details),v.Eb(1),v.xc("ngIf",!t.details),v.Eb(1),v.xc("hidden",!t.autreDep),v.Eb(11),v.xc("ngIf",t.details),v.Eb(1),v.xc("ngIf",!t.details),v.Eb(1),v.xc("ngIf",t.isGuest),v.Eb(1),v.xc("ngForOf",t.tabEse.controls),v.Eb(1),v.xc("ngIf",t.isMembreEquipe&&!t.securityServ.admin),v.Eb(1),v.xc("hidden",t.details),v.Eb(2),v.xc("disabled",t.editForm.invalid)}},directives:[n.n,m.z,m.p,m.j,me.b,m.b,m.o,m.h,E.c,E.g,x.b,fe.c,fe.a,n.m,I.a,E.i,m.r,de.e,de.b,de.a,de.f,de.c,m.w,m.s,m.y,Z.b,n.l,de.d,pe.o,E.b,he.a,ve.c,ve.f,ve.g,ve.e,ge.a,m.g,y.c,y.a],styles:[".example-full-width[_ngcontent-%COMP%]{width:95.2%!important}.select-trie[_ngcontent-%COMP%]{background-color:#ebebee!important;width:153px!important}.ngxTableHeader[_ngcontent-%COMP%]   .header-buttons-left[_ngcontent-%COMP%]   input.search-field[_ngcontent-%COMP%]{width:200px}.modal-body[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden}.icone-affectation[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.box-loc[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.14);border-radius:5%;background-color:#f6f6f6;box-shadow:0 0 3px #31414a}"]}),Ct),Ot=i("5JmO"),wt=i.n(Ot),Lt=i("TruH"),Pt=i.n(Lt),Mt=i("+GiM"),qt=i("0IaG"),Ft=i("1kSV"),Dt=i("xHqg"),Rt=i("iadO"),At=["closeComiteModal"],Nt=["closePresentModal"],Yt=["closeLocaliteModal"],Tt=["closeFunctionSigndModal"],_t=["openFunctionSigndModal"],Vt=["formDirective"];function Wt(e,t){1&e&&(v.ac(0,"span"),v.Yc(1,"Ajouter "),v.Zb())}function Ut(e,t){1&e&&(v.ac(0,"span"),v.Yc(1,"Modifier "),v.Zb())}function Bt(e,t){1&e&&(v.ac(0,"mat-error"),v.Yc(1,"Ant\xe9rieure \xe0 la date de d\xe9but"),v.Zb())}function zt(e,t){1&e&&(v.ac(0,"button",121),v.ac(1,"mat-icon"),v.Yc(2,"room"),v.Zb(),v.Zb()),2&e&&v.xc("title",t.$implicit.nom)}function Gt(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"button",122),v.mc("click",(function(){return v.Oc(i),v.qc(2).createNewInv()})),v.ac(2,"mat-icon"),v.Yc(3,"create"),v.Zb(),v.Zb(),v.ac(4,"button",123),v.mc("click",(function(){return v.Oc(i),v.Kc(8).click()})),v.ac(5,"mat-icon"),v.Yc(6,"file_upload"),v.Zb(),v.Zb(),v.ac(7,"input",124,125),v.mc("change",(function(e){return v.Oc(i),v.qc(2).handleFileInput(e.target.files)})),v.Zb(),v.Zb()}}var $t=function(e){return{"ml-5":e}};function jt(e,t){if(1&e){var i=v.bc();v.ac(0,"button",131),v.mc("click",(function(){return v.Oc(i),v.qc(2),v.Kc(3).click()})),v.ac(1,"mat-icon"),v.Yc(2,"add"),v.Zb(),v.Zb()}if(2&e){var n=v.qc(4);v.xc("ngClass",v.Bc(1,$t,(null==n.instructions?null:n.instructions.length)>0))}}function Kt(e,t){if(1&e){var i=v.bc();v.ac(0,"span",127),v.ac(1,"mat-icon",128),v.Yc(2,"insert_drive_file"),v.Zb(),v.ac(3,"mat-icon",129),v.mc("click",(function(){v.Oc(i);var e=t.index;return v.qc(3).deleteInst(e)})),v.Yc(4,"cancel"),v.Zb(),v.Wc(5,jt,3,3,"button",130),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("title","Supprimer "+n[0]),v.Eb(2),v.xc("ngIf",a==c.instructions.length-1)}}function Ht(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.Wc(1,Kt,6,3,"span",126),v.ac(2,"input",124,125),v.mc("change",(function(e){return v.Oc(i),v.qc(2).handleFileInput(e.target.files)})),v.Zb(),v.Zb()}if(2&e){var n=v.qc(2);v.Eb(1),v.xc("ngForOf",n.instructions)}}function Jt(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"span",127),v.ac(2,"mat-icon",132),v.Yc(3,"assignment "),v.Zb(),v.ac(4,"mat-icon",133),v.mc("click",(function(){return v.Oc(i),v.qc(2).deletCreationInst()})),v.Yc(5,"cancel "),v.Zb(),v.ac(6,"button",134),v.ac(7,"mat-icon"),v.Yc(8,"create"),v.Zb(),v.Zb(),v.Zb(),v.Zb()}}function Xt(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"button",135),v.mc("click",(function(){return v.Oc(i),v.qc(),v.Kc(67).click()})),v.ac(2,"mat-icon"),v.Yc(3,"file_upload"),v.Zb(),v.Zb(),v.Zb()}}function Qt(e,t){if(1&e){var i=v.bc();v.ac(0,"button",137),v.mc("click",(function(){return v.Oc(i),v.qc(3),v.Kc(67).click()})),v.ac(1,"mat-icon"),v.Yc(2,"add"),v.Zb(),v.Zb()}}function ei(e,t){if(1&e){var i=v.bc();v.ac(0,"span",127),v.ac(1,"mat-icon",128),v.Yc(2," insert_drive_file"),v.Zb(),v.ac(3,"mat-icon",129),v.mc("click",(function(){v.Oc(i);var e=t.index;return v.qc(3).deleteDc(e)})),v.Yc(4,"cancel"),v.Zb(),v.Wc(5,Qt,3,0,"button",136),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("title","Supprimer "+n[0]),v.Eb(2),v.xc("ngIf",a==c.docsDc.length-1)}}function ti(e,t){if(1&e&&(v.ac(0,"span",102),v.Wc(1,ei,6,3,"span",126),v.Zb()),2&e){var i=v.qc(2);v.Eb(1),v.xc("ngForOf",i.docsDc)}}function ii(e,t){if(1&e&&v.Vb(0,"img",138),2&e){var i=v.qc(2);v.xc("src",i.imgLink+i.getUserById(i.idPresiComite).image,v.Rc)("title","Pr\xe9sident du comit\xe9 : "+i.getUserById(i.idPresiComite).nom)}}function ni(e,t){if(1&e&&v.Vb(0,"img",138),2&e){var i,n,a=t.$implicit,c=v.qc(2),r=c.imgLink+(null==(i=c.getUserById(a))?null:i.image),o="Membre du comit\xe9 : "+(null==(n=c.getUserById(a))?null:n.nom);v.xc("src",r,v.Rc)("title",o)}}function ai(e,t){if(1&e&&v.Vb(0,"img",139),2&e){var i,n,a=t.$implicit,c=v.qc(2),r=c.imgLink+(null==(i=c.getUserById(a))?null:i.image),o=null==(n=c.getUserById(a))?null:n.nom;v.xc("src",r,v.Rc)("title",o)}}function ci(e,t){if(1&e&&v.Vb(0,"img",139),2&e){var i=t.$implicit,n=v.qc(2);v.xc("src",n.imgLink+"exemple.jpg",v.Rc)("title",i)}}function ri(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"button",140),v.mc("click",(function(){return v.Oc(i),v.qc(2).createNewPv()})),v.ac(2,"mat-icon"),v.Yc(3,"create"),v.Zb(),v.Zb(),v.ac(4,"button",141),v.mc("click",(function(){return v.Oc(i),v.qc(),v.Kc(114).click()})),v.ac(5,"mat-icon"),v.Yc(6,"file_upload"),v.Zb(),v.Zb(),v.Zb()}}function oi(e,t){if(1&e){var i=v.bc();v.ac(0,"button",137),v.mc("click",(function(){return v.Oc(i),v.qc(3),v.Kc(114).click()})),v.ac(1,"mat-icon"),v.Yc(2,"add"),v.Zb(),v.Zb()}}function li(e,t){if(1&e){var i=v.bc();v.ac(0,"span",127),v.ac(1,"mat-icon",128),v.Yc(2," insert_drive_file"),v.Zb(),v.ac(3,"mat-icon",129),v.mc("click",(function(){v.Oc(i);var e=t.index;return v.qc(3).deletePv(e)})),v.Yc(4,"cancel"),v.Zb(),v.Wc(5,oi,3,0,"button",136),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("title","Supprimer "+n[0]),v.Eb(2),v.xc("ngIf",a==c.docsPv.length-1)}}function si(e,t){if(1&e&&(v.ac(0,"span",102),v.Wc(1,li,6,3,"span",126),v.Zb()),2&e){var i=v.qc(2);v.Eb(1),v.xc("ngForOf",i.docsPv)}}function ui(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"span",127),v.ac(2,"mat-icon",142),v.Yc(3,"assignment"),v.Zb(),v.ac(4,"mat-icon",143),v.mc("click",(function(){return v.Oc(i),v.qc(2).deletCreationPv()})),v.Yc(5,"cancel "),v.Zb(),v.ac(6,"button",144),v.ac(7,"mat-icon"),v.Yc(8,"create"),v.Zb(),v.Zb(),v.Zb(),v.Zb()}}function di(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-expansion-panel",82),v.ac(1,"mat-expansion-panel-header",83),v.ac(2,"mat-panel-title",84),v.ac(3,"p"),v.Wc(4,Wt,2,0,"span",85),v.Wc(5,Ut,2,0,"span",85),v.Yc(6," inventaire "),v.Zb(),v.Zb(),v.Vb(7,"mat-panel-description"),v.Zb(),v.ac(8,"form",86,87),v.ac(10,"div",88),v.Vb(11,"input",89),v.Zb(),v.ac(12,"p",2),v.ac(13,"span",90),v.Yc(14,"DATE D'INVENTAIRE"),v.Zb(),v.ac(15,"span",91),v.ac(16,"mat-form-field",92),v.ac(17,"mat-label"),v.Yc(18,"Date"),v.Zb(),v.Vb(19,"input",93),v.Vb(20,"mat-datepicker-toggle",94),v.Vb(21,"mat-datepicker",null,95),v.Zb(),v.Zb(),v.Zb(),v.Vb(23,"hr"),v.ac(24,"p",2),v.ac(25,"span",90),v.Yc(26,"PERIODE DE COMPTAGE"),v.Zb(),v.ac(27,"span",91),v.ac(28,"mat-form-field",92),v.ac(29,"mat-label"),v.Yc(30,"D\xe9but"),v.Zb(),v.Vb(31,"input",96),v.Vb(32,"mat-datepicker-toggle",94),v.Vb(33,"mat-datepicker",null,97),v.Zb(),v.Zb(),v.ac(35,"span",91),v.ac(36,"mat-form-field",92),v.ac(37,"mat-label"),v.Yc(38,"Fin"),v.Zb(),v.Vb(39,"input",98),v.Vb(40,"mat-datepicker-toggle",94),v.Vb(41,"mat-datepicker",null,99),v.Wc(43,Bt,2,0,"mat-error",85),v.Zb(),v.Zb(),v.Zb(),v.Vb(44,"hr"),v.ac(45,"p",100),v.ac(46,"span",101),v.Yc(47,"LOCALITES"),v.Zb(),v.ac(48,"span",102),v.Wc(49,zt,3,1,"button",103),v.ac(50,"button",104),v.ac(51,"mat-icon"),v.Yc(52,"add"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Vb(53,"hr"),v.ac(54,"p",100),v.ac(55,"span",101),v.Yc(56,"INSTRUCTIONS D'INVENTAIRE"),v.Zb(),v.Wc(57,Gt,9,0,"span",105),v.Wc(58,Ht,4,1,"span",105),v.Wc(59,Jt,9,0,"span",105),v.Zb(),v.Vb(60,"hr"),v.ac(61,"p",100),v.ac(62,"span",101),v.Yc(63,"DECISION DE CREATION DU COMITE"),v.Zb(),v.Wc(64,Xt,4,0,"span",105),v.Wc(65,ti,2,1,"span",105),v.ac(66,"input",106,107),v.mc("change",(function(e){return v.Oc(i),v.qc().handleFileInputDc(e.target.files)})),v.Zb(),v.Zb(),v.Vb(68,"hr"),v.ac(69,"p",100),v.ac(70,"span",101),v.Yc(71,"COMITE D'INVENTAIRE"),v.Zb(),v.ac(72,"span",102),v.Wc(73,ii,1,2,"img",108),v.Wc(74,ni,1,2,"img",109),v.ac(75,"button",110),v.mc("click",(function(){return v.Oc(i),v.qc().openComModal()})),v.ac(76,"mat-icon"),v.Yc(77,"add"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Vb(78,"hr"),v.ac(79,"p",100),v.ac(80,"span",101),v.Yc(81,"REUNION DE LANCEMENT"),v.Zb(),v.ac(82,"span",91),v.ac(83,"mat-form-field",92),v.ac(84,"mat-label"),v.Yc(85,"Lieu"),v.Zb(),v.Vb(86,"input",111),v.ac(87,"mat-icon",112),v.Yc(88,"room"),v.Zb(),v.Zb(),v.Zb(),v.ac(89,"span",91),v.ac(90,"mat-form-field",92),v.ac(91,"mat-label"),v.Yc(92,"Date"),v.Zb(),v.Vb(93,"input",113),v.Vb(94,"mat-datepicker-toggle",94),v.Vb(95,"mat-datepicker",null,114),v.Zb(),v.Zb(),v.Zb(),v.Vb(97,"hr"),v.ac(98,"div",100),v.ac(99,"span",101),v.Yc(100,"PRESENTS A LA REUNION"),v.Zb(),v.ac(101,"span",102),v.Wc(102,ai,1,2,"img",115),v.Wc(103,ci,1,2,"img",115),v.ac(104,"button",116),v.mc("click",(function(){return v.Oc(i),v.qc().openPresModal()})),v.ac(105,"mat-icon"),v.Yc(106,"add"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Vb(107,"hr"),v.ac(108,"p",100),v.ac(109,"span",101),v.Yc(110,"PV DE LA REUNION"),v.Zb(),v.Wc(111,ri,7,0,"span",105),v.Wc(112,si,2,1,"span",105),v.ac(113,"input",117,118),v.mc("change",(function(e){return v.Oc(i),v.qc().handleFileInputPv(e.target.files)})),v.Zb(),v.Wc(115,ui,9,0,"span",105),v.Zb(),v.Zb(),v.ac(116,"mat-action-row"),v.ac(117,"button",119),v.mc("click",(function(){v.Oc(i);var e=v.qc();return e.onEditSave(e.editForm)})),v.Yc(118,"Enregistrer"),v.Zb(),v.ac(119,"button",120),v.mc("click",(function(){return v.Oc(i),v.qc().off()})),v.Yc(120,"Annuler"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n,a,c,r=v.Kc(22),o=v.Kc(34),l=v.Kc(42),s=v.Kc(96),u=v.qc(),d=v.Bc(31,$t,(null==(n=u.noNull(u.tabLoc))?null:n.length)>0),b=v.Bc(33,$t,(null==(a=u.noNull(u.tabComite.value))?null:a.length)>0),m=v.Bc(35,$t,(null==(c=u.noNull(u.tabOtherPresent.value))?null:c.length)>0);v.Eb(4),v.xc("ngIf",0==u.editForm.get("id").value),v.Eb(1),v.xc("ngIf",0!=u.editForm.get("id").value),v.Eb(3),v.xc("formGroup",u.editForm),v.Eb(11),v.xc("matDatepicker",r),v.Eb(1),v.xc("for",r),v.Eb(11),v.xc("matDatepicker",o),v.Eb(1),v.xc("for",o),v.Eb(7),v.xc("matDatepicker",l),v.Eb(1),v.xc("for",l),v.Eb(3),v.xc("ngIf",u.editForm.get("fin").hasError("diffDate")),v.Eb(6),v.xc("ngForOf",u.firstSub(u.noNull(u.tabLoc))),v.Eb(1),v.xc("ngClass",d),v.Eb(7),v.xc("ngIf",!(u.invCreer||u.instructions&&0!=u.instructions.length)),v.Eb(1),v.xc("ngIf",u.instructions&&u.instructions.length>0&&!u.invCreer),v.Eb(1),v.xc("ngIf",u.invCreer),v.Eb(5),v.xc("ngIf",!u.docsDc||0==u.docsDc.length),v.Eb(1),v.xc("ngIf",u.docsDc&&u.docsDc.length>0),v.Eb(8),v.xc("ngIf",u.getUserById(u.idPresiComite)),v.Eb(1),v.xc("ngForOf",u.noNull(u.tabComite.value)),v.Eb(1),v.xc("ngClass",b)("disabled",0==u.users.length),v.Eb(18),v.xc("matDatepicker",s),v.Eb(1),v.xc("for",s),v.Eb(8),v.xc("ngForOf",u.noNull(u.tabPresents.value)),v.Eb(1),v.xc("ngForOf",u.noNull(u.tabOtherPresent.value)),v.Eb(1),v.xc("ngClass",m)("disabled",0==u.users.length),v.Eb(7),v.xc("ngIf",!(u.pvCreer||u.docsPv&&0!=u.docsPv.length)),v.Eb(1),v.xc("ngIf",!u.pvCreer&&u.docsPv&&u.docsPv.length>0),v.Eb(3),v.xc("ngIf",u.pvCreer),v.Eb(2),v.xc("disabled",u.editForm.invalid)}}function bi(e,t){if(1&e&&(v.ac(0,"span"),v.Yc(1),v.rc(2,"date"),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.ad(" au ",v.tc(2,1,i.dateInv,"dd/MM/yyyy")," ")}}function mi(e,t){if(1&e){var i=v.bc();v.ac(0,"div",165),v.ac(1,"mat-icon",166),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().updateOne(e)})),v.Yc(2,"edit"),v.Zb(),v.ac(3,"mat-icon",167),v.Yc(4,"delete"),v.Zb(),v.Zb()}}function fi(e,t){1&e&&(v.ac(0,"span"),v.Yc(1,"Aucune localit\xe9 n'a \xe9t\xe9 ajout\xe9e"),v.Zb())}function pi(e,t){if(1&e){var i=v.bc();v.ac(0,"button",168),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().detailsLoc(e)}))("mouseover",(function(){v.Oc(i);var e=t.$implicit;return v.qc(2).overLoc(e)}))("mouseout",(function(){return v.Oc(i),v.qc(2).outHoverLZS()})),v.ac(1,"mat-icon"),v.Yc(2,"room"),v.Zb(),v.Zb()}2&e&&v.xc("title",t.$implicit.nom)}function hi(e,t){1&e&&(v.ac(0,"span",102),v.Yc(1,"Aucune instruction n'a \xe9t\xe9 ajout\xe9e"),v.Zb())}function vi(e,t){if(1&e){var i=v.bc();v.ac(0,"span"),v.ac(1,"mat-icon",170),v.mc("click",(function(){return v.Oc(i),v.Kc(4).click()})),v.Yc(2," insert_drive_file"),v.Zb(),v.ac(3,"a",171,172),v.Yc(5,"open"),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("href",a.docLink+n[1],v.Rc)("download",n[0])}}function gi(e,t){if(1&e&&(v.ac(0,"span",102),v.Wc(1,vi,6,3,"span",169),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.xc("ngForOf",i.instruction)}}function Ei(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"span"),v.ac(2,"mat-icon",173),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().generatePdf(e.instruction,0)})),v.Yc(3,"assignment "),v.Zb(),v.Zb(),v.Zb()}}function xi(e,t){1&e&&(v.ac(0,"span",102),v.Yc(1,"Aucune d\xe9cision n'a \xe9t\xe9 ajout\xe9e"),v.Zb())}function Ii(e,t){if(1&e){var i=v.bc();v.ac(0,"span"),v.ac(1,"mat-icon",170),v.mc("click",(function(){return v.Oc(i),v.Kc(4).click()})),v.Yc(2," insert_drive_file"),v.Zb(),v.ac(3,"a",171,174),v.Yc(5,"open"),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("href",a.docLink+n[1],v.Rc)("download",n[0])}}function Zi(e,t){if(1&e&&(v.ac(0,"span",102),v.Wc(1,Ii,6,3,"span",169),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.xc("ngForOf",i.decisionCC)}}function yi(e,t){1&e&&(v.ac(0,"span",175),v.Yc(1,"Membres du comit\xe9 non d\xe9finis"),v.Zb())}function ki(e,t){if(1&e&&v.Vb(0,"img",176),2&e){var i=v.qc().$implicit,n=v.qc();v.xc("src",n.imgLink+i.presiComite.image,v.Rc)("title","Pr\xe9sident du comit\xe9 : "+i.presiComite.nom)}}function Ci(e,t){if(1&e&&(v.ac(0,"span",177),v.Vb(1,"img",178),v.ac(2,"small"),v.Yc(3),v.Zb(),v.ac(4,"small",179),v.Yc(5,"Pr\xe9sident"),v.Zb(),v.Zb()),2&e){var i=v.qc().$implicit,n=v.qc();v.Eb(1),v.xc("src",n.imgLink+i.presiComite.image,v.Rc)("title","Pr\xe9sident du comit\xe9 : "+i.presiComite.nom),v.Eb(2),v.Zc(n.longText(i.presiComite.nom,18))}}function Si(e,t){if(1&e&&v.Vb(0,"img",176),2&e){var i=t.$implicit,n=v.qc(2);v.xc("src",n.imgLink+i.image,v.Rc)("title","Membre du comit\xe9 : "+i.nom)}}function Oi(e,t){if(1&e&&(v.ac(0,"span",177),v.Vb(1,"img",180),v.ac(2,"small"),v.Yc(3),v.Zb(),v.ac(4,"small",179),v.Yc(5,"Membre"),v.Zb(),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.Eb(1),v.xc("src",n.imgLink+i.image,v.Rc)("title","Membre du comit\xe9 : "+i.nom),v.Eb(2),v.Zc(n.longText(i.nom,18))}}function wi(e,t){1&e&&(v.ac(0,"span",175),v.Yc(1,"Membres pr\xe9sents \xe0 la r\xe9union de lancement non d\xe9finis"),v.Zb())}function Li(e,t){if(1&e&&v.Vb(0,"img",181),2&e){var i=t.$implicit,n=v.qc(2);v.xc("src",n.imgLink+i.image,v.Rc)("title",i.nom)}}function Pi(e,t){if(1&e&&(v.ac(0,"span",177),v.Vb(1,"img",180),v.ac(2,"small"),v.Yc(3),v.Zb(),v.ac(4,"small",182),v.Yc(5),v.Zb(),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.Eb(1),v.xc("src",n.imgLink+i.image,v.Rc)("title",i.nom),v.Eb(2),v.Zc(n.longText(i.nom,18)),v.Eb(1),v.xc("title",i.poste),v.Eb(1),v.Zc(n.longText(i.poste,18))}}function Mi(e,t){if(1&e&&v.Vb(0,"img",181),2&e){var i=t.$implicit,n=v.qc(2);v.xc("src",n.imgLink+"exemple.jpg",v.Rc)("title",i)}}function qi(e,t){if(1&e&&(v.ac(0,"span",177),v.Vb(1,"img",180),v.ac(2,"small"),v.Yc(3),v.Zb(),v.ac(4,"small",179),v.Yc(5,"Autre participant"),v.Zb(),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.Eb(1),v.xc("src",n.imgLink+"exemple.jpg",v.Rc)("title",i),v.Eb(2),v.Zc(n.longText(i,18))}}function Fi(e,t){1&e&&(v.ac(0,"span",102),v.Yc(1,"Aucun pv n'a \xe9t\xe9 ajout\xe9"),v.Zb())}function Di(e,t){if(1&e){var i=v.bc();v.ac(0,"span"),v.ac(1,"mat-icon",170),v.mc("click",(function(){return v.Oc(i),v.Kc(4).click()})),v.Yc(2,"insert_drive_file "),v.Zb(),v.ac(3,"a",183,184),v.Yc(5,"open"),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc(3);v.Eb(1),v.xc("title",n[0]),v.Eb(2),v.xc("href",a.docLink+n[1],v.Rc)}}function Ri(e,t){if(1&e&&(v.ac(0,"span",102),v.Wc(1,Di,6,2,"span",169),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.xc("ngForOf",i.pvReunion)}}function Ai(e,t){if(1&e){var i=v.bc();v.ac(0,"span",102),v.ac(1,"span"),v.ac(2,"mat-icon",185),v.mc("click",(function(){v.Oc(i);var e=v.qc().$implicit;return v.qc().generatePdf(e.pvReunion,1)})),v.Yc(3,"assignment"),v.Zb(),v.Zb(),v.Zb()}}var Ni=function(e){return{"pt-3":e}},Yi=function(e){return{"pt-4":e}},Ti=function(e){return{"pt-5":e}},_i=function(e,t){return{"pt-5":e,"pt-1":t}};function Vi(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-expansion-panel",145),v.mc("opened",(function(){v.Oc(i);var e=t.$implicit;return v.qc().idCurrentInv=e.id})),v.ac(1,"mat-expansion-panel-header",146,147),v.mc("click",(function(){return v.Oc(i),v.Kc(2)._toggle()})),v.ac(3,"mat-panel-title",148),v.mc("click",(function(){return v.Oc(i),v.Kc(2)._toggle()})),v.ac(4,"p"),v.Yc(5," Inventaire "),v.Wc(6,bi,3,4,"span",85),v.Zb(),v.Zb(),v.ac(7,"mat-panel-description",149),v.Wc(8,mi,5,0,"div",150),v.Zb(),v.Zb(),v.ac(9,"div",151),v.ac(10,"p",152),v.ac(11,"span",153),v.Yc(12,"DATE D'INVENTAIRE"),v.Zb(),v.ac(13,"span",154),v.Yc(14),v.rc(15,"date"),v.Zb(),v.Zb(),v.Vb(16,"hr"),v.ac(17,"p",152),v.ac(18,"span",153),v.Yc(19,"PERIODE DE COMPTAGE"),v.Zb(),v.ac(20,"span",154),v.Yc(21),v.rc(22,"date"),v.Zb(),v.ac(23,"span",154),v.Yc(24),v.rc(25,"date"),v.Zb(),v.Zb(),v.Vb(26,"hr"),v.ac(27,"p",100),v.ac(28,"span",155),v.Yc(29,"LOCALITES"),v.Zb(),v.ac(30,"span",102),v.Wc(31,fi,2,0,"span",85),v.Wc(32,pi,3,1,"button",156),v.Zb(),v.Zb(),v.Vb(33,"hr"),v.ac(34,"p",100),v.ac(35,"span",155),v.Yc(36,"INSTRUCTIONS D'INVENTAIRE"),v.Zb(),v.Wc(37,hi,2,0,"span",105),v.Wc(38,gi,2,1,"span",105),v.Wc(39,Ei,4,0,"span",105),v.Zb(),v.Vb(40,"hr"),v.ac(41,"p",100),v.ac(42,"span",155),v.Yc(43,"DECISION DE CREATION DU COMITE"),v.Zb(),v.Wc(44,xi,2,0,"span",105),v.Wc(45,Zi,2,1,"span",105),v.Zb(),v.Vb(46,"hr"),v.ac(47,"p",100),v.ac(48,"span",155),v.Yc(49,"COMITE D'INVENTAIRE"),v.Zb(),v.ac(50,"span",157),v.Wc(51,yi,2,0,"span",158),v.Wc(52,ki,1,2,"img",159),v.Wc(53,Ci,6,3,"span",160),v.Wc(54,Si,1,2,"img",161),v.Wc(55,Oi,6,3,"span",162),v.Zb(),v.Zb(),v.Vb(56,"hr"),v.ac(57,"p",100),v.ac(58,"span",153),v.Yc(59,"REUNION DE LANCEMENT"),v.Zb(),v.ac(60,"span",154),v.Yc(61),v.Zb(),v.ac(62,"span",154),v.Yc(63),v.rc(64,"date"),v.Zb(),v.Zb(),v.Vb(65,"hr"),v.ac(66,"div",100),v.ac(67,"span",155),v.Yc(68,"PRESENTS A LA REUNION"),v.Zb(),v.ac(69,"span",157),v.Wc(70,wi,2,0,"span",158),v.Wc(71,Li,1,2,"img",163),v.Wc(72,Pi,6,5,"span",164),v.Wc(73,Mi,1,2,"img",163),v.Wc(74,qi,6,3,"span",164),v.Zb(),v.Zb(),v.Vb(75,"hr"),v.ac(76,"p",100),v.ac(77,"span",155),v.Yc(78,"PV DE LA REUNION"),v.Zb(),v.Wc(79,Fi,2,0,"span",105),v.Wc(80,Ri,2,1,"span",105),v.Wc(81,Ai,4,0,"span",105),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.xc("hidden",c.showForm)("expanded",n.id===c.idCurrentInv||0==c.idCurrentInv&&0==a),v.Eb(6),v.xc("ngIf",n.dateInv),v.Eb(2),v.xc("ngIf",!c.securityServ.superviseurAdjoint),v.Eb(6),v.ad("",v.tc(15,35,n.dateInv,"dd/MM/yyyy")," "),v.Eb(7),v.ad("Du : ",v.tc(22,38,n.debut,"dd/MM/yyyy")," "),v.Eb(3),v.ad("Au : ",v.tc(25,41,n.fin,"dd/MM/yyyy"),""),v.Eb(4),v.xc("ngClass",v.Bc(47,Ni,n.localites&&n.localites.length>0)),v.Eb(3),v.xc("ngIf",!n.localites||n.localites&&0==n.localites.length),v.Eb(1),v.xc("ngForOf",c.firstSub(n.localites)),v.Eb(3),v.xc("ngClass",v.Bc(49,Yi,n.instruction&&n.instruction.length>0)),v.Eb(2),v.xc("ngIf",!n.instruction||0==n.instruction.length),v.Eb(1),v.xc("ngIf",n.instruction&&n.instruction.length>0&&"creation"!=n.localInstructionPv[0]),v.Eb(1),v.xc("ngIf",n.instruction&&n.instruction.length>0&&"creation"==n.localInstructionPv[0]),v.Eb(3),v.xc("ngClass",v.Bc(51,Ni,n.decisionCC&&n.decisionCC.length>0)),v.Eb(2),v.xc("ngIf",!n.decisionCC||0==n.decisionCC.length),v.Eb(1),v.xc("ngIf",n.decisionCC&&n.decisionCC.length>0),v.Eb(3),v.xc("ngClass",v.Bc(53,Ti,n.presiComite||n.membresCom.length>0)),v.Eb(3),v.xc("ngIf",!n.presiComite&&0==n.membresCom.length),v.Eb(1),v.xc("ngIf",n.presiComite),v.Eb(1),v.xc("ngIf",n.presiComite),v.Eb(1),v.xc("ngForOf",n.membresCom),v.Eb(1),v.xc("ngForOf",n.membresCom),v.Eb(6),v.ad("Lieu : ",n.lieuReunion,""),v.Eb(2),v.ad("Date : ",v.tc(64,44,n.dateReunion,"dd/MM/yyyy"),""),v.Eb(4),v.xc("ngClass",v.Cc(55,_i,n.presentsReunionOut.length>0||n.presentsReunion.length>0,0==n.presentsReunionOut.length&&0==n.presentsReunion.length)),v.Eb(3),v.xc("ngIf",0==n.presentsReunionOut.length&&0==n.presentsReunion.length),v.Eb(1),v.xc("ngForOf",n.presentsReunion),v.Eb(1),v.xc("ngForOf",n.presentsReunion),v.Eb(1),v.xc("ngForOf",n.presentsReunionOut),v.Eb(1),v.xc("ngForOf",n.presentsReunionOut),v.Eb(3),v.xc("ngClass",v.Bc(58,Yi,n.pvReunion&&n.pvReunion.length>0)),v.Eb(2),v.xc("ngIf",!n.pvReunion||n.pvReunion&&0==n.pvReunion.length),v.Eb(1),v.xc("ngIf",n.pvReunion&&n.pvReunion.length>0&&"creation"!=n.localInstructionPv[1]),v.Eb(1),v.xc("ngIf",n.pvReunion&&n.pvReunion.length>0&&"creation"==n.localInstructionPv[1])}}function Wi(e,t){if(1&e&&(v.ac(0,"mat-option",186),v.Yc(1),v.Zb()),2&e){var i=t.$implicit;v.xc("value",i.id),v.Eb(1),v.ad(" ",i.nom,"")}}function Ui(e,t){if(1&e&&(v.ac(0,"mat-option",191),v.Yc(1),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.xc("value",i.id)("hidden",n.inTab(i.id,n.tabComite.value)),v.Eb(1),v.Zc(i.nom)}}function Bi(e,t){if(1&e){var i=v.bc();v.ac(0,"div",50),v.ac(1,"div",51),v.ac(2,"mat-form-field",187),v.ac(3,"mat-label"),v.Yc(4),v.Zb(),v.ac(5,"mat-select",188),v.Vb(6,"mat-option",29),v.Wc(7,Ui,2,3,"mat-option",189),v.Zb(),v.Zb(),v.ac(8,"mat-icon",190),v.mc("click",(function(){return v.Oc(i),v.qc().addComMembre()})),v.Yc(9,"add_circle_outline "),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(4),v.ad("Membre ",a+1,""),v.Eb(1),v.xc("formControl",n),v.Eb(2),v.xc("ngForOf",c.users),v.Eb(1),v.xc("hidden",a!=c.tabComite.controls.length-1||!n.value)}}function zi(e,t){if(1&e&&(v.ac(0,"mat-option",191),v.Yc(1),v.Zb()),2&e){var i=t.$implicit,n=v.qc(2);v.xc("value",i.id)("hidden",n.inTab(i.id,n.tabPresents.value)),v.Eb(1),v.Zc(i.nom)}}function Gi(e,t){if(1&e){var i=v.bc();v.ac(0,"div",50),v.ac(1,"div",51),v.ac(2,"mat-form-field",187),v.ac(3,"mat-label"),v.Yc(4),v.Zb(),v.ac(5,"mat-select",188),v.Vb(6,"mat-option",29),v.Wc(7,zi,2,3,"mat-option",189),v.Zb(),v.Zb(),v.ac(8,"mat-icon",190),v.mc("click",(function(){return v.Oc(i),v.qc().addPresentMembre()})),v.Yc(9,"add_circle_outline "),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(4),v.ad("Participant ",a+1,""),v.Eb(1),v.xc("formControl",n),v.Eb(2),v.xc("ngForOf",c.users),v.Eb(1),v.xc("hidden",a!=c.tabPresents.controls.length-1||!n.value)}}function $i(e,t){if(1&e){var i=v.bc();v.ac(0,"div",50),v.ac(1,"div",51),v.ac(2,"mat-form-field",187),v.ac(3,"mat-label"),v.Yc(4,"Autre participant"),v.Zb(),v.Vb(5,"input",192),v.ac(6,"mat-icon",112),v.Yc(7,"face"),v.Zb(),v.Zb(),v.ac(8,"mat-icon",190),v.mc("click",(function(){return v.Oc(i),v.qc().addOtherPres()})),v.Yc(9,"add_circle_outline "),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(5),v.xc("formControl",n),v.Eb(3),v.xc("hidden",a!=c.tabOtherPresent.controls.length-1||!n.value)}}var ji=function(e){return{"mt-3":e}};function Ki(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-chip",193),v.ac(1,"span",194),v.ac(2,"section",195),v.ac(3,"mat-checkbox",196),v.mc("change",(function(){v.Oc(i);var e=t.$implicit;return v.qc().checkLoc(e)})),v.Yc(4),v.Zb(),v.Zb(),v.Zb(),v.ac(5,"span",197),v.ac(6,"mat-icon",198),v.mc("click",(function(){v.Oc(i);var e=t.$implicit;return v.qc().openFirst(e.id)})),v.Yc(7,"remove_red_eye"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.xc("ngClass",v.Bc(4,ji,0!=a)),v.Eb(3),v.xc("disabled",!c.showForm)("checked",c.isChecked(n.id)),v.Eb(1),v.ad(" ",n.nom,"")}}function Hi(e,t){if(1&e){var i=v.bc();v.ac(0,"mat-chip",193),v.ac(1,"span",194),v.ac(2,"section",195),v.ac(3,"mat-checkbox",196),v.mc("change",(function(){v.Oc(i);var e=t.$implicit;return v.qc(2).checkLoc(e)})),v.Yc(4),v.Zb(),v.Zb(),v.Zb(),v.ac(5,"span",197),v.ac(6,"mat-icon",198),v.mc("click",(function(){v.Oc(i);var e=t.$implicit,n=v.qc().index;return v.qc().openOther(n+1,e.id)})),v.Yc(7,"remove_red_eye"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=v.qc().index,c=v.qc();v.xc("ngClass",v.Bc(4,ji,0!=a)),v.Eb(3),v.xc("disabled",!c.showForm)("checked",c.isChecked(n.id)),v.Eb(1),v.ad("",n.nom," ")}}function Ji(e,t){1&e&&(v.ac(0,"p",204),v.Yc(1,"Cette subdivision est vide "),v.Zb())}function Xi(e,t){if(1&e&&(v.ac(0,"div",199),v.ac(1,"p",200),v.Yc(2),v.Zb(),v.Vb(3,"hr"),v.ac(4,"mat-chip-list",201),v.ac(5,"small",202),v.Yc(6),v.Zb(),v.Wc(7,Hi,8,6,"mat-chip",43),v.Zb(),v.Wc(8,Ji,2,0,"p",203),v.Zb()),2&e){var i,n=t.$implicit,a=t.index,c=v.qc();v.xc("hidden",!c.openLocalite||!c.getOneLocById(n)),v.Eb(2),v.Zc(null==(i=c.getOneLocById(n))?null:i.nom),v.Eb(4),v.Zc(c.subdivisions[a+1]),v.Eb(1),v.xc("ngForOf",c.getCurrentSubById(n)),v.Eb(1),v.xc("ngIf",0==c.getCurrentSubById(n).length)}}function Qi(e,t){if(1&e){var i=v.bc();v.ac(0,"div",205),v.ac(1,"div",154),v.ac(2,"section",206),v.ac(3,"mat-checkbox",207),v.mc("change",(function(){return v.Oc(i),v.qc().checkAllLoc()})),v.Yc(4," Toutes les localit\xe9s"),v.Zb(),v.Zb(),v.Zb(),v.Vb(5,"div",208),v.ac(6,"button",209),v.mc("click",(function(){return v.Oc(i),v.qc().closeLoc()})),v.Yc(7,"Fermer"),v.Zb(),v.Zb()}if(2&e){var n=v.qc();v.Eb(3),v.xc("checked",n.allLocIsChec())}}function en(e,t){1&e&&v.Yc(0,"TRAVAUX PREPARATOIRES")}function tn(e,t){1&e&&v.Yc(0,"TRAVAUX D'INVENTAIRE")}function nn(e,t){1&e&&v.Yc(0,"TRAVAUX POST-INVENTAIRE")}function an(e,t){1&e&&v.Yc(0,"SIGNATAIRES")}function cn(e,t){if(1&e){var i=v.bc();v.ac(0,"div",210),v.ac(1,"div",211),v.ac(2,"mat-form-field",27),v.ac(3,"mat-label"),v.Yc(4,"Nom du signataire"),v.Zb(),v.Vb(5,"input",192),v.Zb(),v.Zb(),v.ac(6,"div",211),v.ac(7,"mat-form-field",27),v.ac(8,"mat-label"),v.Yc(9,"Fonction"),v.Zb(),v.Vb(10,"input",212),v.Zb(),v.Zb(),v.ac(11,"mat-icon",213),v.mc("click",(function(){return v.Oc(i),v.qc().addSignataire()})),v.Yc(12," add_circle_outline "),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(5),v.xc("formControl",n.controls.nom),v.Eb(5),v.xc("formControl",n.controls.fonction),v.Eb(1),v.xc("hidden",a!=c.tabSignataires.length-1)}}function rn(e,t){if(1&e){var i=v.bc();v.ac(0,"div",214),v.ac(1,"div",75),v.ac(2,"mat-form-field",59),v.ac(3,"mat-label"),v.Yc(4,"Titre"),v.Zb(),v.Vb(5,"input",192),v.Zb(),v.ac(6,"mat-icon",215),v.mc("click",(function(){return v.Oc(i),v.qc().addDeliberation()})),v.Yc(7,"add_circle_outline "),v.Zb(),v.Zb(),v.ac(8,"div",75),v.ac(9,"mat-form-field",27),v.ac(10,"mat-label"),v.Yc(11),v.Zb(),v.Vb(12,"textarea",216),v.Zb(),v.ac(13,"mat-icon",58),v.Yc(14," info_outline"),v.Zb(),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(5),v.xc("formControl",n.controls.titre),v.Eb(1),v.xc("hidden",a!=c.tabDeliberation.length-1),v.Eb(5),v.ad("D\xc9LIBERATION ",a+1,""),v.Eb(1),v.xc("formControl",n.controls.content),v.Eb(1),v.xc("title",c.getCommentDel(a))}}function on(e,t){if(1&e){var i=v.bc();v.ac(0,"div",217),v.ac(1,"div",218),v.ac(2,"mat-form-field",27),v.ac(3,"mat-label"),v.Yc(4,"Nom du signataire"),v.Zb(),v.Vb(5,"input",192),v.Zb(),v.Zb(),v.ac(6,"div",219),v.ac(7,"mat-form-field",27),v.ac(8,"mat-label"),v.Yc(9,"Fonction"),v.Zb(),v.Vb(10,"input",212),v.Zb(),v.Zb(),v.ac(11,"mat-icon",220),v.mc("click",(function(){return v.Oc(i),v.qc().addSignatairePv()})),v.Yc(12,"add_circle_outline "),v.Zb(),v.Zb()}if(2&e){var n=t.$implicit,a=t.index,c=v.qc();v.Eb(5),v.xc("formControl",n.controls.nom),v.Eb(5),v.xc("formControl",n.controls.fonction),v.Eb(1),v.xc("hidden",a!=c.tabSignatairesPv.length-1)}}wt.a.vfs=Pt.a.pdfMake.vfs;var ln,sn,un=((ln=function(){function e(t,i,n,a,c,r,o,s){_classCallCheck(this,e),this.fb=t,this._snackBar=i,this.dialog=n,this.adminServ=a,this.sharedService=c,this.securityServ=r,this.modalService=o,this.inventaireServ=s,this.fonctionIns="",this.nomIns="",this.isLinear=!1,this.imgLink="",this.docLink="",this.inventaires=[],this.idCurrentInv=0,this.show=!1,this.idPresiComite=0,this.instructions=[],this.docsPv=[],this.docsDc=[],this.tabComite=new m.d([]),this.tabPresents=new m.d([]),this.tabOtherPresent=new m.d([]),this.presidents=[],this.membresComite=[],this.users=[],this.myId="",this.entreprises=[],this.localites=[],this.idCurrentEse=0,this.showForm=!1,this.tabLoc=[],this.comments=[],this.commentsPv=[],this.invCreer=!1,this.pvCreer=!1,this.tabDeliberation=new m.d([]),this.urlInst="",this.urlPv="",this.locHover=null,this.zoneHover=null,this.szHover=null,this.entreprise=null,this.signatairesPv=[],this.signPvCtrl=new m.f,this.separatorKeysCodes=[l.g,l.c],this.signatairesInst=[],this.signInstCtrl=new m.f,this.signInstFunctionCtrl=new m.f,this.subdivisions=[],this.tabOpen=[],this.openLocalite=null,this.titleAdd="Ajouter un inventaire",this.tabSignataires=new m.d([]),this.tabSignatairesPv=new m.d([]),this.titleAdd=this.securityServ.superviseurAdjoint?"Demandez au superviseur g\xe9n\xe9ral de cr\xe9er l'inventaire":"Ajouter un inventaire",this.imgLink=this.sharedService.baseUrl+"/images/",this.docLink=this.sharedService.baseUrl+"/documents/"}return _createClass(e,[{key:"ngOnInit",value:function(){this.myId=localStorage.getItem("idUser"),this.securityServ.showLoadingIndicatior.next(!0),this.initForm(),this.initInstrucForm(),this.comments=this.getCommentInst(),this.initPvForm(),this.commentsPv=this.getCommentPv(),this.getOneEntreprise(),this.addFuctionSign=this.fb.group({functionSign:["",[m.x.required]]})}},{key:"getOneEntreprise",value:function(){var e=this,t=localStorage.getItem("currentEse");this.adminServ.getOneEntreprise(t).then((function(t){var i,n,a=t;a&&(e.idCurrentEse=a.id,e.localites=t.localites,e.getUsers(t.users),e.getInventaireByEse(),e.subdivisions=(null==a?void 0:a.subdivisions)?null==a?void 0:a.subdivisions:[],0==(null===(i=e.tabOpen)||void 0===i?void 0:i.length)&&(null===(n=e.subdivisions)||void 0===n||n.forEach((function(t){return e.tabOpen.push(0)})))),e.entreprise=t}),(function(t){e.securityServ.showLoadingIndicatior.next(!1),console.log(t)}))}},{key:"getInventaireByEse",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inventaireServ.getInventaireByEse(this.idCurrentEse).then((function(i){e.securityServ.showLoadingIndicatior.next(!1);var n=i;n&&n.length>0&&(n=i.reverse(),t&&(e.idCurrentInv=n[0].id)),e.inventaires=n,e.show=!0}),(function(t){e.securityServ.showLoadingIndicatior.next(!1),console.log(t)}))}},{key:"addNew",value:function(){var e,t=this;this.showForm=!0,this.idPresiComite=0,this.instructions=[],this.docsPv=[],this.docsDc=[],this.tabComite=new m.d([]),this.tabPresents=new m.d([]),this.tabOtherPresent=new m.d([]),this.tabLoc=[],this.tabDeliberation=new m.d([]),this.pvCreer=!1,this.invCreer=!1,this.signatairesPv=[],this.signatairesInst=[],this.tabOpen=[],null===(e=this.subdivisions)||void 0===e||e.forEach((function(e){return t.tabOpen.push(0)})),this.initForm()}},{key:"updateOne",value:function(e){var t,i=this;if(this.showForm=!0,this.idPresiComite=null===(t=e.presiComite)||void 0===t?void 0:t.id,this.instructions=e.instruction,this.docsPv=e.pvReunion,this.docsDc=e.decisionCC,this.tabComite=new m.d([]),e.membresCom.forEach((function(e){return i.addComMembre(e.id)})),0==this.tabComite.length&&this.addComMembre(),this.tabPresents=new m.d([]),e.presentsReunion.forEach((function(e){return i.addPresentMembre(e.id)})),0==this.tabPresents.length&&this.addPresentMembre(),this.tabOtherPresent=new m.d([]),e.presentsReunionOut.forEach((function(e){return i.addOtherPres(e)})),0==this.tabOtherPresent.length&&this.addOtherPres(),this.tabLoc=[],e.localites.forEach((function(e){return i.tabLoc.push(i.getOneLocById(e.id))})),this.invCreer=!1,"creation"==e.localInstructionPv[0]&&(this.invCreer=!0,this.initInstrucForm(e.instruction)),this.pvCreer=!1,"creation"==e.localInstructionPv[1]){this.pvCreer=!0;var n=e.pvReunion;this.tabDeliberation=new m.d([]),n[1].forEach((function(e){return i.addDeliberation(e[0],e[1])})),this.initPvForm([n[0][0],n[0][1],n[0][2],n[0][3]?n[0][3]:[]]),0==this.tabDeliberation.length&&this.addDeliberation()}this.initForm(e)}},{key:"initForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,dateInv:(new Date).getFullYear()+"-12-31T00:00:00+00:00",debut:"",fin:"",lieuReunion:"",dateReunion:""};this.editForm=this.fb.group({id:[e.id],dateInv:[e.dateInv],debut:[e.debut],fin:[e.fin],lieuReunion:[e.lieuReunion],dateReunion:[e.dateReunion]},{validator:this.valideDif("debut","fin")}),this.formDirective&&this.formDirective.resetForm()}},{key:"initInstrucForm",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[["","",""],["","",""],["","","",""],[]];this.instForm=this.fb.group({bloc1e1:[t[0][0]],bloc1e2:[t[0][1]],bloc1e3:[t[0][2]],bloc2e1:[t[1][0]],bloc2e2:[t[1][1]],bloc2e3:[t[1][2]],bloc3e1:[t[2][0]],bloc3e2:[t[2][1]],bloc3e3:[t[2][2]],bloc3e4:[t[2][3]]}),console.log(t[3]);var i=(null===(e=t[3])||void 0===e?void 0:e.length)>0?t[3]:["",""];this.tabSignataires=new m.d([]);for(var n=0;n<i.length;n+=2)this.addSignataire(i[n],i[n+1])}},{key:"detailsLoc",value:function(e){var t,i=this;this.tabLoc=[],e.localites.forEach((function(e){return i.tabLoc.push(i.getOneLocById(e.id))})),console.log(e.localites),null===(t=this.subdivisions)||void 0===t||t.forEach((function(e){return i.tabOpen.push(0)}))}},{key:"initPvForm",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["","","",[]];this.pvForm=this.fb.group({bloc1:[t[0]],bloc2:[t[1]],bloc3:[t[2]]}),this.tabSignatairesPv=new m.d([]);for(var i=(null===(e=t[3])||void 0===e?void 0:e.length)>0?t[3]:["",""],n=0;n<i.length;n+=2)this.addSignatairePv(i[n],i[n+1]);this.signatairesPv=this.getSignatairePv(t[3])}},{key:"getSignatairePv",value:function(e){return(null==e?void 0:e.length)>0?e:[]}},{key:"getInstValDef",value:function(){return[["La r\xe9union de lancement de l'inventaire sera tenue le 20/12. Les points suivants seront abord\xe9s:\n - la composition des \xe9quipes;\n  - la m\xe9thode de comptage\u2026","ACQUISITIONS\nPour l'acquisition d'immobilisations, une demande d'achat initi\xe9e par le service demandeur. Cette demande est valid\xe9e par le Chef comptable. Ensuite, un Bon de Commande est \xe9tabli et sera sign\xe9 par le DAF et le DG. Apr\xe8s r\xe9ception de l'immobilisation, un code barre est g\xe9n\xe9r\xe9 et appos\xe9 sur l'immobilisation.\n\nCESSIONS\nToutes les sorties doivent faire l'objet d'un bon valid\xe9 par le Chef du magasin, le DAF et le DG.","Il faudra:\n - Editer le fichier des immobilisations\n - Faire une revue des postes  \n - Proc\xe9der aux r\xe9gularisations n\xe9cessaires devant permettre de s'assurer de l'exactitude des mouvements de l'ann\xe9e"],["Le Comit\xe9 d'inventaire est mis en place sera compos\xe9 de:\n- M. Path\xe9 Ndiaye (Pr\xe9sident);\n- Mme Isabelle Diouf (membre);\n- M. Saliou Ba (membre)\n\nIl devra:\n  - mettre en place toute la logistique n\xe9cessaire pour le d\xe9marrage effectif de l'inventaire physique \xe0 la date pr\xe9vue ( constitution et formation des \xe9quipes, mat\xe9riel n\xe9cessaire etc..);\n  - prendre toutes les dispositions pour l'organisation et la supervision de l'inventaire;\n  - valider les r\xe9sultats de l'inventaire et \xe9laborer un rapport d'inventaire.","1. MAGASIN\nLe rangement des magasins avec v\xe9rification des CODES se fera effectu\xe9 avant le 09/10. Le magasin est compos\xe9 de 2 d\xe9p\xf4ts.\n1.1. D\xe9p\xf4t 01\nLe d\xe9p\xf4t 01 sera divis\xe9 en 02 sous-zones de stockage :\n    - Sous-zone A : salle 1 et 2 (Equipe A)\n    - Sous-zone B : Cour ext\xe9rieure (Equipe A).\n1.2. D\xe9p\xf4t 02 \nLe d\xe9p\xf4t 02 sera divis\xe9 en 02 Sous-zones de stockage :\n - Sous-zone A : Showroom (Equipe B)\n    - Sous-zone B : salle des pi\xe8ces de rechange (Equipe B)\n\n2. ENTREPOT\nLe comptage sera effectu\xe9 par l'\xe9quipe C.","ORGANISATION\nLe rangement des magasins sera effectu\xe9 \xe0 partir du Mercredi 09/12.\nIl faudra s\u2019assurer que les \xe9tiquettes \xe0 code barre ont \xe9t\xe9 appos\xe9es sur toutes les immobilisations.\n\nCOMPTAGE\nLe fichier des immobilisations sera remis \xe0 chaque \xe9quipe. Des \xe9tiquettes (gommettes) de couleur bleue et un lecteur de codes seront aussi transmis \xe0 chaque chef d\u2019\xe9quipe. \n\nCONTROLE\nApr\xe8s le comptage, une autre \xe9quipe  passe pour le contr\xf4le en utilisant des \xe9tiquettes (gommettes) de couleur verte.\n\nANOMALIES\nEn cas de d\xe9saccord entre l\u2019\xe9quipe de comptage et de contr\xf4le, un comptage contradictoire sera pilot\xe9 par le comit\xe9 d\u2019inventaire (Etiquettes de couleur rouge)."],["Cette phase consistera \xe0 effectuer un rapprochement entre le fichier des immobilisations et les r\xe9sultats de l'inventaire et afin d'identifier:\n  - les immobilisations inscrites au fichier mais non inventori\xe9es (manquants d'inventaire);\n  - et les immobilisations inventori\xe9es mais non inscrites au fichier (sans num\xe9ro d'immatriculation et/ou sans \xe9tiquettes).\n\nLes \xe9carts constat\xe9s doivent faire l'objet de recherches compl\xe9mentaires, par les \xe9quipes de comptage, en vue de leur r\xe9sorption. S'agissant des articles recens\xe9s au cours de cet inventaire, mais non inscrits au fichier des immobilisations, il conviendra de les r\xe9pertorier sur un tableau s\xe9par\xe9. En outre, des dispositions devront \xeatre prises pour veiller \xe0 leur immatriculation diligente au fichier des immoblisations.","Les anomalies retrac\xe9es devront \xeatre analys\xe9es et corrig\xe9es, au plus le 15 janvier.","L'inventaire sera appouv\xe9 par le comit\xe9 d'inventaire.","Le dossier \xe0 constituer devra comporter les documents ci-apr\xe8s:\n- un proc\xe8s-verbal d'inventaire;\n- les annexes avant et apr\xe8s corrections"]]}},{key:"getPvValDef",value:function(){return["L\u2019AN DEUX MILLE VINGT \nET LE 09 JUILLET A 08 HEURES 10 MINUTES","La r\xe9union de lancement de l'inventaire a \xe9t\xe9 tenue au si\xe8ge social sis \xe0 l'avenue Bourgui pour d\xe9lib\xe9rer sur l\u2019ordre du jour suivant :  \n1.\tInstructions d'inventaire\n2.\tPlanning de l'inventaire\n3.\tQuestions diverses.","Une feuille de pr\xe9sence a \xe9t\xe9 \xe9marg\xe9e en d\xe9but de s\xe9ance par chaque participant. \nEtaient pr\xe9sent : \n-\tM. Path\xe9 Ndiaye (Pr\xe9sident du comit\xe9),\u2026","Les instructions d'inventaire ont \xe9t\xe9 transmises \xe0 tous les intervenants. Ces derniers ont attest\xe9 avoir pris connaissance de celles-ci."]}},{key:"getCommentInst",value:function(){return[["Commentaire :\n - Indiquer la date de r\xe9union\n - Pr\xe9ciser les points qui seront trait\xe9s lors de la r\xe9union\n-  S'assurer de la disponibilit\xe9 du planning des inventaires","Commentaire :\n - Rappeler la proc\xe9dure d'acquisition des immobilisations\n - Rappeler la proc\xe9dure de sorties des immobilisations","Commentaire :\n - D\xe9crire les diff\xe9rentes \xe9tapes li\xe9es \xe0 l'\xe9dition et au contr\xf4le du fichier des immoblisations\n - Identifier les intervenants"],["Commentaire :\n -Indiquer les missions du comit\xe9\n -lister les membres du comit\xe9","Commentaire :\n -Lister zones \xe0 inventorier et les \xe9quipes affect\xe9es \xe0 chaque zone","Commentaire :\n - Lister les biens \xe0 inventorier\n - D\xe9crire la proc\xe9dure de comptage\n- D\xe9crire la proc\xe9dure de controle"],["Commentaire :\n - D\xe9crire la prod\xe9dure de rapprochement","Commentaire :\nD\xe9crire la proc\xe9dure de correction des anomalies","Commentaire :\nIndiquer la proc\xe9dure d'approbation de l'inventaire","Commentaire :\nIndiquer les composants du dossier d'inventaire"]]}},{key:"getCommentPv",value:function(){return["Commentaire :\nMettre la date et l'heure","Commentaire :\nindiquer les points \xe0 l'ordre du jour","Commentaire :\nLister les personnes pr\xe9sentes \xe0 la r\xe9union"]}},{key:"getCommentDel",value:function(e){var t="eme";return 0==e&&(t="er"),"Commentaire :\n"+ ++e+t+" point \xe0 l'ordre du jour"}},{key:"addDeliberation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DELIBERATION "+(this.tabDeliberation.length+1)+" :",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.tabDeliberation.push(new m.i({titre:new m.f(e),content:new m.f(t)}))}},{key:"addSignataire",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.tabSignataires.push(new m.i({nom:new m.f(e),fonction:new m.f(t)}))}},{key:"addSignatairePv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.tabSignatairesPv.push(new m.i({nom:new m.f(e),fonction:new m.f(t)}))}},{key:"valideDif",value:function(e,t){return function(i){var n=i.controls[t];n.errors&&!n.errors.diffDate||(new Date(i.controls[e].value)>new Date(n.value)?setTimeout((function(){return n.setErrors({diffDate:!0})}),1):n.setErrors(null))}}},{key:"getUsers",value:function(e){e=e.filter((function(e){return"actif"==e.status})),this.presidents=e.filter((function(e){return e.roles&&"ROLE_PC"==e.roles[0]})),this.membresComite=e.filter((function(e){return e.roles&&"ROLE_MC"==e.roles[0]})),this.users=e}},{key:"getUserById",value:function(e){return this.users.find((function(t){return t.id==e}))}},{key:"onEditSave",value:function(e){var t=this;console.log("form.value => ",e.value),this.securityServ.showLoadingIndicatior.next(!0);var i=this.getAllDataToSend(e);this.inventaireServ.addInventaire(i).then((function(e){t.showNotification("bg-success",e.message,"top","center"),t.getInventaireByEse(0==i.id),t.showForm=!1}),(function(e){console.log(e),t.securityServ.showLoadingIndicatior.next(!1),t.showNotification("bg-red",e,"top","right")}))}},{key:"getAllDataToSend",value:function(e){var t=this.getData(e.value);return t.instructions=this.getOnlyFile(this.instructions),t.instrucCreer=this.getDataInstCreer(),t.decisionCC=this.getOnlyFile(this.docsDc),t.presiComite=this.idPresiComite,t.membresCom=this.tabComite.value,t.presentsReunion=this.tabPresents.value,t.presentsReunionOut=this.tabOtherPresent.value,t.pvReunion=this.getOnlyFile(this.docsPv),t.pvReunionCreer=this.getDataPvCreer(),t.entreprise=this.idCurrentEse,t.localites=this.getOneLyId(this.tabLoc),t.localInstructionPv=[this.invCreer?"creation":"download",this.pvCreer?"creation":"download"],console.log(t),t}},{key:"getOneLyId",value:function(e){var t=[];return e.forEach((function(e){return t.push(e.id)})),t}},{key:"getDataInstCreer",value:function(){var e,t=this.instForm.value,i=[];return null===(e=this.tabSignataires.value)||void 0===e||e.forEach((function(e){return i.push([e.nom,e.fonction])})),t.signataire=i,t}},{key:"getDataPvCreer",value:function(){var e,t=this.pvForm.value,i=[];null===(e=this.tabSignatairesPv.value)||void 0===e||e.forEach((function(e){return i.push([e.nom,e.fonction])}));var n=[t.bloc1,t.bloc2,t.bloc3,i],a=[];return this.tabDeliberation.value.forEach((function(e){var t=e.titre.trim(),i=e.content.trim();""==t&&""==i||a.push({titre:t,content:i})})),[n,a]}},{key:"getOnlyFile",value:function(e){var t=[];return e.forEach((function(e){return t.push(e[1])})),t}},{key:"handleFileInput",value:function(e){for(var t=0;t<e.length;t++)this.instructions.push([e.item(t).name,e.item(t)])}},{key:"handleFileInputPv",value:function(e){for(var t=0;t<e.length;t++)this.docsPv.push([e.item(t).name,e.item(t)])}},{key:"handleFileInputDc",value:function(e){for(var t=0;t<e.length;t++)this.docsDc.push([e.item(t).name,e.item(t)])}},{key:"addComMembre",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.tabComite.push(new m.f(e))}},{key:"addPresentMembre",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.tabPresents.push(new m.f(e))}},{key:"addOtherPres",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.tabOtherPresent.push(new m.f(e))}},{key:"closeComite",value:function(){this.closeComiteModal.nativeElement.click()}},{key:"closePresent",value:function(){this.closePresentModal.nativeElement.click()}},{key:"closeLoc",value:function(){this.closeLocaliteModal.nativeElement.click()}},{key:"noNull",value:function(e){var t=[];return e.forEach((function(e){e&&t.push(e)})),t}},{key:"openComModal",value:function(){0==this.tabComite.length&&this.addComMembre()}},{key:"openPresModal",value:function(){0==this.tabPresents.length&&this.addPresentMembre(parseInt(this.myId)),0==this.tabOtherPresent.length&&this.addOtherPres()}},{key:"openLocModal",value:function(){}},{key:"inTab",value:function(e,t){return t.find((function(t){return t==e}))}},{key:"deleteInst",value:function(e){this.instructions.splice(e,1)}},{key:"deletePv",value:function(e){this.docsPv.splice(e,1)}},{key:"deleteDc",value:function(e){this.docsDc.splice(e,1)}},{key:"getData",value:function(e){return e.dateInv&&(e.dateInv=this.formattedDate(e.dateInv)),e.debut&&(e.debut=this.formattedDate(e.debut)),e.fin&&(e.fin=this.formattedDate(e.fin)),e.dateReunion&&(e.dateReunion=this.formattedDate(e.dateReunion)),e}},{key:"formattedDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[(e=new Date(e)).getFullYear(),e.getMonth()+1,e.getDate()].map((function(e){return e<10?"0"+e:""+e})).join("-")}},{key:"openSnackBar",value:function(e){this._snackBar.open(e,"",{duration:2e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["bg-red"]})}},{key:"showNotification",value:function(e,t,i,n){this._snackBar.open(t,"",{duration:2e3,verticalPosition:i,horizontalPosition:n,panelClass:[e,"color-white"]})}},{key:"rev",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=[];return e&&e.length>0&&(i=e,i=this.sharedService.uniq(i,"id"),this.sharedService.trier(i,"id",t)),i}},{key:"deletCreationInst",value:function(){this.invCreer=!1,this.instructions=[],this.initInstrucForm()}},{key:"deletCreationPv",value:function(){this.pvCreer=!1,this.docsPv=[],this.initPvForm(),this.tabDeliberation=new m.d([])}},{key:"off",value:function(){this.showForm=!1,this.ngOnInit()}},{key:"createNewInv",value:function(){this.invCreer=!0;var e=this.getInstValDef();this.initInstrucForm(e)}},{key:"createNewPv",value:function(){this.pvCreer=!0,this.tabDeliberation=new m.d([]);var e=this.getPvValDef();this.initPvForm([e[0],e[1],e[2],[]]),this.tabDeliberation=new m.d([]),this.addDeliberation("DELIBERATION 1: INSTRUCTIONS D'INVENTAIRE","Les instructions d'inventaire ont \xe9t\xe9 transmises \xe0 tous les intervenants. Ces derniers ont attest\xe9 avoir pris connaissance de celles-ci.")}},{key:"generatePdf",value:function(e,t){var i=[];0==t?i=[this.pageInst(e)]:1==t&&(i=[this.pagePv(e)]);var n={content:i,styles:this.getStyle(),pageMargins:[40,40]};wt.a.createPdf(n).open()}},{key:"getStyle",value:function(){return{fsize:{fontSize:6.5},enTete:{fontSize:6.5,fillColor:"#eeeeee"},enTete2:{fontSize:6.5,bold:!0,fillColor:"#bcbdbc"},gris:{fillColor:"#bcbdbc"},grasGris:{bold:!0,fillColor:"#e6e6e6"},grasGrisF:{bold:!0,fillColor:"#b5b3b3"},gras:{bold:!0},centerGG:{bold:!0,fillColor:"#e6e6e6",alignment:"center"},no_border:{border:!1}}}},{key:"pageInst",value:function(e){var t=e[0][0],i=e[0][1],n=e[0][2],a=e[1][0],c=e[1][1],r=e[1][2],o=e[2][0],l=e[2][1],s=e[2][2],u=e[2][3],d=e[3];return console.log(d),[].concat(_toConsumableArray(this.getImage()),[{table:{width:["*"],body:[].concat(_toConsumableArray(this.getEntete()),[[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"INSTRUCTIONS D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"1.TRAVAUX PREPARATOIRES",style:"grasGrisF",alignment:"center",fontSize:12}],[{text:"1.1. REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:t,margin:[2,7],fontSize:10}],[{text:"1.2. RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:i,margin:[2,7],fontSize:10}],[{text:"1.3. EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:n,margin:[2,7],fontSize:10}],[{text:"2.TRAVAUX D'INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"2.1. MISE EN PLACE DU COMITE D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:a,margin:[2,7],fontSize:10}],[{text:"2.2. AFFECTATION DES EQUIPES D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:c,margin:[2,7],fontSize:10}],[{text:"2.3. DEROULEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:r,margin:[2,7],fontSize:10}],[{text:"3.TRAVAUX POST-INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"3.1. RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:o,margin:[2,7],fontSize:10}],[{text:"3.2. CORRECTION DES ANOMALIES",style:"grasGris",alignment:"center"}],[{text:l,margin:[2,7],fontSize:10}],[{text:"3.3. APPROBATION D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:s,margin:[2,7],fontSize:10}],[{text:"3.4. TRANSMISSION DU DOSSIER D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:u,margin:[2,7],fontSize:10}]])},margin:[0,10,0,0]}],_toConsumableArray(this.getSignatairePdf(d)))}},{key:"pagePv",value:function(e){var t=e[0][0],i=e[0][1],n=e[0][2],a=e[0][3]?e[0][3]:[];return[].concat(_toConsumableArray(this.getImage()),[{table:{width:["*"],body:[].concat(_toConsumableArray(this.getEntete()),[[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"PROCES-VERBAL DE REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:t,margin:[2,7],fontSize:10}],[{text:i,margin:[2,7],fontSize:10}],[{text:n,margin:[2,7],fontSize:10}]],_toConsumableArray(this.getPdfDel(e[1])))},margin:[0,10,0,0]}],_toConsumableArray(this.getSignatairePdf(a)))}},{key:"getImage",value:function(){return this.entreprise.image&&this.entreprise.image!=Mt.a?[{image:this.entreprise.image,width:75}]:[{}]}},{key:"getEntete",value:function(){var e=this.entreprise;return e.capital&&this.sharedService.numStr(e.capital," "),[[{text:""+e.denomination,border:[!1,!1,!1,!1],margin:[-5,0,0,0]}],[{text:e.republique+"/"+e.ville,border:[!1,!1,!1,!1],margin:[-5,0,0,0]}]]}},{key:"doEspace",value:function(e,t){var i=0,n="";if(e.length>t.length){i=e.length-t.length;for(var a=0;a<2*i;a++)n+="  ";t+=n}else{i=t.length-e.length;for(var c=0;c<i;c++)n+="  ";e+=n}return n}},{key:"getPdfDel",value:function(e){var t=[];return e.forEach((function(e){var i,n;""!=(null===(i=e[0])||void 0===i?void 0:i.trim())&&""!=(null===(n=e[1])||void 0===n?void 0:n.trim())&&t.push([{text:e[0],fontSize:12,style:"grasGris",alignment:"center"}],[{text:e[1],fontSize:10,margin:[2,7]}])})),t}},{key:"getSignatairePdf",value:function(e){return e&&0!=e.length?2==e.length?this.getOneSignatairePdf(e):6==e.length?this.get3SignatairePdf(e):this.getOtherSignatairePdf(e):[{}]}},{key:"getOneSignatairePdf",value:function(e){return[{text:e[0],margin:[0,20,0,0],fontSize:10,decoration:""},{text:this.doEspace(e[0],e[1])+e[1],margin:[10,2,0,0],fontSize:10,decoration:""}]}},{key:"get3SignatairePdf",value:function(e){return[{table:{widths:["*","*"],body:[[{text:this.doEspace(e[0],e[1])[0]+"\n"+this.doEspace(e[0],e[1])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1]},{text:this.doEspace(e[4],e[5])[0]+"\n"+this.doEspace(e[4],e[5])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"right"}],[{text:this.doEspace(e[2],e[3])[0]+"\n"+this.doEspace(e[2],e[3])[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"center",colSpan:2},{}]]}}]}},{key:"getOtherSignatairePdf",value:function(e){return[{table:{widths:["*","*"],body:_toConsumableArray(this.lignesSignataires(e))}}]}},{key:"lignesSignataires",value:function(e){for(var t=[],i=0;i<e.length;i+=4)console.log("this.doEspace => ",this.doEspace(e[i+0],e[i+1]).length),console.log("this.doEspace => ",this.doEspace(e[i+2],e[i+3]).length),t.push([{text:e[i]+"\n"+e[i+1],fontSize:10,margin:[0,20,0,70],border:[!1,!1,!1,!1]},{text:this.doEspace(e[i+2],e[i+3])+e[i+2]+"\n"+this.doEspace(e[i+2],e[i+3])+e[i+3],fontSize:10,margin:[0,20,0,70],alignment:"right",border:[!1,!1,!1,!1]}]);return t}},{key:"overLoc",value:function(e){console.log(e),this.locHover=e}},{key:"overZone",value:function(e){console.log(e),this.zoneHover=e}},{key:"overSz",value:function(e){console.log(e),this.szHover=e}},{key:"outHoverLZS",value:function(){this.locHover=null,this.zoneHover=null,this.szHover=null}},{key:"longText",value:function(e,t){return this.sharedService.longText(e,t)}},{key:"addSignPv",value:function(e){var t=e.input,i=e.value;(i||"").trim()&&this.signatairesPv.push(i.trim()),t&&(t.value=""),this.signPvCtrl.setValue(null)}},{key:"removeSignPv",value:function(e){var t=this.signatairesPv.indexOf(e);t>=0&&this.signatairesPv.splice(t,1)}},{key:"addSignInst",value:function(e){var t=e.input,i=e.value;(i||"").trim()&&this.signatairesInst.push(i.trim()),t&&(t.value=""),this.signInstCtrl.setValue(null)}},{key:"addSignInstFunction",value:function(e){this.modalService.open(e)}},{key:"addSignInstFunctionChange",value:function(){this.openFunctionSigndModal.nativeElement.click()}},{key:"addFunctionSignSave",value:function(e){console.log(e)}},{key:"addSignInstFunctionClick",value:function(){console.log("its click")}},{key:"removeSignInst",value:function(e){var t=this.signatairesInst.indexOf(e);t>=0&&this.signatairesInst.splice(t,1)}},{key:"firstSub",value:function(e){return null==e?void 0:e.filter((function(e){var t;return(null===(t=e.position)||void 0===t?void 0:t.length)>0}))}},{key:"checkLoc",value:function(e){if(this.tabLoc.find((function(t){return t.id==e.id})))this.tabLoc=this.tabLoc.filter((function(t){return t.id!=e.id}));else{this.tabLoc.push(e);var t=e.idParent;t&&!this.isChecked(t)&&this.checkLoc(this.getOneLocById(t))}}},{key:"checkAllLoc",value:function(){var e=this;this.allLocIsChec()?this.tabLoc=[]:this.localites.forEach((function(t){e.isChecked(t.id)||e.checkLoc(t)}))}},{key:"allLocIsChec",value:function(){var e=this,t=!0;return this.localites.forEach((function(i){t&&(t=e.isChecked(i.id))})),t}},{key:"openFirst",value:function(e){this.openLocalite=e,this.tabOpen[0]=e,this.offUnderSub(1)}},{key:"getOneLocById",value:function(e){var t;return(null===(t=this.localites)||void 0===t?void 0:t.find((function(t){return t.id==e})))||null}},{key:"getCurrentSubById",value:function(e){var t;return(null===(t=this.getOneLocById(e))||void 0===t?void 0:t.subdivisions)||[]}},{key:"openOther",value:function(e,t){this.tabOpen[e]=t,this.offUnderSub(e+1)}},{key:"offUnderSub",value:function(e){for(var t=e;t<this.tabOpen.length;t++)this.tabOpen[t]&&(this.tabOpen[t]=0)}},{key:"isChecked",value:function(e){return this.tabLoc.find((function(t){return t.id==e}))}}]),e}()).\u0275fac=function(e){return new(e||ln)(v.Ub(m.e),v.Ub(g.a),v.Ub(qt.b),v.Ub(s.a),v.Ub(d.a),v.Ub(b.a),v.Ub(Ft.a),v.Ub(u.a))},ln.\u0275cmp=v.Ob({type:ln,selectors:[["app-inventaire"]],viewQuery:function(e,t){var i;1&e&&(v.dd(At,!0),v.dd(Nt,!0),v.dd(Yt,!0),v.dd(Tt,!0),v.Uc(_t,!0),v.dd(Vt,!0)),2&e&&(v.Jc(i=v.nc())&&(t.closeComiteModal=i.first),v.Jc(i=v.nc())&&(t.closePresentModal=i.first),v.Jc(i=v.nc())&&(t.closeLocaliteModal=i.first),v.Jc(i=v.nc())&&(t.closeFunctionSigndModal=i.first),v.Jc(i=v.nc())&&(t.openFunctionSigndModal=i.first),v.Jc(i=v.nc())&&(t.formDirective=i.first))},decls:232,vars:32,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[1,"col-xl-3","col-lg-3","col-md-3","col-sm-3","pb-0","pt-2","bolder"],[1,"header-dropdown","m-r--5"],[1,"dropdown"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon",1,"addInv",3,"title","disabled","click"],[1,"body"],["multi","true"],["class","mb-4","expanded","","hideToggle","",4,"ngIf"],["class","mb-4","hideToggle","",3,"hidden","expanded","opened",4,"ngFor","ngForOf"],["id","comiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"editRowModal"],[1,"modal-header","clearfix"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","p-t-10","modal-close-button"],["closeComiteModal",""],[1,"material-icons"],[1,"modal-body",3,"perfectScrollbar"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["name","presi",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"modal-footer","pr-2"],[1,"button-demo"],["type","submit",1,"btn","btn-outline-success","btn-border-radius",3,"click"],["id","presentModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["closePresentModal",""],["id","localiteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["closeLocaliteModal",""],[1,"modal-body","pl-2","pr-2",3,"perfectScrollbar"],[1,"p-2","mt-1","pb-4","box-loc"],[1,"ml-2"],["aria-label","Fish selection",1,"mt-4"],["class","w-100 color-chips",3,"ngClass",4,"ngFor","ngForOf"],["class","p-2 mt-4 pb-4 box-loc",3,"hidden",4,"ngFor","ngForOf"],["class","row pl-4 pr-0 mt-4",4,"ngIf"],["id","instrucModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","instructionModal","inv"],["role","document",1,"modal-dialog","instruction-modal"],[1,"modal-content",3,"formGroup"],["closeInstrucModal",""],[1,"row","mb-2"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0"],[1,"body","pb-0"],[3,"linear"],["stepper",""],["matStepLabel",""],["color","primary","appearance","outline",1,"example-full-width","pr-0"],["matInput","","rows","3","formControlName","bloc1e1"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",3,"title"],["appearance","outline",1,"example-full-width","pr-0"],["matInput","","rows","8","formControlName","bloc1e2"],["matInput","","rows","5","formControlName","bloc1e3"],["matInput","","rows","10","formControlName","bloc2e1"],["matInput","","rows","16","formControlName","bloc2e2"],["matInput","","rows","15","formControlName","bloc2e3"],["matInput","","rows","11","formControlName","bloc3e1"],["matInput","","rows","1","formControlName","bloc3e2"],["matInput","","rows","1","formControlName","bloc3e3"],["matInput","","rows","3","formControlName","bloc3e4"],["hidden",""],["class","row","style","position: relative;",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-danger","btn-border-radius",3,"click"],["id","pvModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","inv"],["closePvModal",""],[1,"modal-body","pr-1",3,"perfectScrollbar"],[1,"row","col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0"],["matInput","","rows","2","formControlName","bloc1"],["matInput","","rows","4","formControlName","bloc2"],["matInput","","rows","3","formControlName","bloc3"],["class","col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 pr-0 pl-0",4,"ngFor","ngForOf"],["class","row col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2","style","position: relative;",4,"ngFor","ngForOf"],[1,"modal-footer",2,"padding-right","2.2rem"],["expanded","","hideToggle","",1,"mb-4"],[1,"pr-0",2,"background-color","#d8d5d5"],[1,"pl-0","col-11","pt-5","pb-4","mr-0"],[4,"ngIf"],[1,"mt-4",3,"formGroup"],["formDirective","ngForm"],[1,"input-field","col","s12","d-none"],["formControlName","id","type","hidden",1,"form-control"],[1,"col-4","bolder","pt-3"],[1,"col-2"],[1,"example-full-width"],["matInput","","formControlName","dateInv",3,"matDatepicker"],["matSuffix","",3,"for"],["dateI",""],["matInput","","formControlName","debut",3,"matDatepicker"],["picker",""],["matInput","","formControlName","fin",3,"matDatepicker"],["picker2",""],[1,"row","mt-4"],[1,"col-4","pt-3","bolder"],[1,"col-8"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","class","mr-2","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",3,"title",4,"ngFor","ngForOf"],["mat-mini-fab","","title","Ajouter une localit\xe9","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",1,"mr-2",3,"ngClass"],["class","col-8",4,"ngIf"],["type","file","id","docCrea","hidden","","multiple","",3,"change"],["docDec",""],["class","img-circle user-img-circle img-membre pointer mr-3",3,"src","title",4,"ngIf"],["class","img-circle user-img-circle img-membre pointer mr-3",3,"src","title",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#comiteModal",3,"ngClass","disabled","click"],["matInput","","formControlName","lieuReunion"],["matSuffix",""],["matInput","","formControlName","dateReunion",3,"matDatepicker"],["picker3",""],["class","img-circle user-img-circle img-membre pointer mr-3 mb-2",3,"src","title",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#presentModal",3,"ngClass","disabled","click"],["type","file","id","doc2","hidden","","multiple","",3,"change"],["docPv",""],["type","submit",1,"btn","btn-outline-success","btn-border-radius","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger","btn-border-radius","mr-0",3,"click"],["mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#localiteModal",1,"mr-2",3,"title"],["mat-mini-fab","","title","Ajouter des instructions","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#instrucModal",1,"mr-2",3,"click"],["mat-mini-fab","","color","primary","title","Importer des instructions","aria-label","Example icon-button with a heart icon",3,"click"],["type","file","id","doc","hidden","","multiple","",3,"change"],["docInst",""],["class","",4,"ngFor","ngForOf"],[1,""],[2,"font-size","50px","color","#3f51b5",3,"title"],[1,"pointer",2,"color","#f80000",3,"title","click"],["class","addFile","mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",3,"ngClass","click",4,"ngIf"],["mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",1,"addFile",3,"ngClass","click"],["title","Instruction","data-keyboard","false","data-target","#instrucModal",2,"font-size","50px","color","#3f51b5"],["title","Supprimer l'instruction",1,"mr-3","pointer",2,"color","#f80000",3,"click"],["mat-mini-fab","","title","Instruction","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#instrucModal",1,"addFile"],["mat-mini-fab","","color","primary","title","Importer la d\xe9cision de cr\xe9ation","aria-label","Example icon-button with a heart icon",3,"click"],["class","addFile ml-5","mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",3,"click",4,"ngIf"],["mat-mini-fab","","title","Ajouter un nouveau document","color","primary","aria-label","Example icon-button with a heart icon",1,"addFile","ml-5",3,"click"],[1,"img-circle","user-img-circle","img-membre","pointer","mr-3",3,"src","title"],[1,"img-circle","user-img-circle","img-membre","pointer","mr-3","mb-2",3,"src","title"],["mat-mini-fab","","title","Ajouter un pv","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",1,"mr-2",3,"click"],["mat-mini-fab","","color","primary","title","Importer un pv","aria-label","Example icon-button with a heart icon",3,"click"],["title","Proc\xe8s-verbal","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",2,"font-size","50px","color","#3f51b5"],["title","Supprimer le pv",1,"mr-3","pointer",2,"color","#f80000",3,"click"],["mat-mini-fab","","title","Pv","color","primary","aria-label","Example icon-button with a heart icon","data-toggle","modal","data-backdrop","static","data-keyboard","false","data-target","#pvModal",1,"addFile","mr-5"],["hideToggle","",1,"mb-4",3,"hidden","expanded","opened"],[1,"pr-0",2,"background-color","#d8d5d5",3,"click"],["panelHL",""],[1,"pl-0","col-11","pt-5","pb-4","mr-0",3,"click"],[1,"mr-0"],["class","pt-5 pb-4",4,"ngIf"],[1,"mt-4"],[1,"row","mt-3"],[1,"col-4","bolder"],[1,"col-4"],[1,"col-4","bolder",3,"ngClass"],["data-toggle","modal","data-target","#localiteModal","mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon","class","mr-2 ",3,"title","click","mouseover","mouseout",4,"ngFor","ngForOf"],[1,"col-8","row"],["class","pl-3",4,"ngIf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2",3,"src","title",4,"ngIf"],["class","p-0 pt-1 ml-3 mb-2 block-user",4,"ngIf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2",3,"src","title",4,"ngFor","ngForOf"],["class","p-0 pt-1 ml-3 mb-2  block-user",4,"ngFor","ngForOf"],["hidden","","class","img-circle user-img-circle img-membre pointer ml-2 mb-2",3,"src","title",4,"ngFor","ngForOf"],["class","p-0 pt-1 ml-3 mb-2 block-user",4,"ngFor","ngForOf"],[1,"pt-5","pb-4"],["data-toggle","modal",1,"mr-2","icone-loc",3,"click"],[1,"icone-loc"],["data-toggle","modal","data-target","#localiteModal","mat-mini-fab","","color","primary","aria-label","Example icon-button with a heart icon",1,"mr-2",3,"title","click","mouseover","mouseout"],[4,"ngFor","ngForOf"],[1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"title","click"],["target","_blank","rel","noopener noreferrer","hidden","",3,"href","download"],["openInv",""],["title","Instruction",1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"click"],["openDC",""],[1,"pl-3"],["hidden","",1,"img-circle","user-img-circle","img-membre","pointer","ml-2",3,"src","title"],[1,"p-0","pt-1","ml-3","mb-2","block-user"],["alt","photo",1,"img-circle","user-img-circle","img-membre","pointer","ng-star-inserted",3,"src","title"],[1,"text-primary","titre-membre"],[1,"img-circle","user-img-circle","img-membre","pointer","ng-star-inserted",3,"src","title"],["hidden","",1,"img-circle","user-img-circle","img-membre","pointer","ml-2","mb-2",3,"src","title"],[1,"text-primary","titre-membre",3,"title"],["download","pvReunion[0]","target","_blank","rel","noopener noreferrer","hidden","",3,"href"],["openPv",""],["color","primary","title","Proc\xe8s-verbal",1,"mr-4","pointer",2,"font-size","50px","color","#3f51b5",3,"click"],[3,"value"],["appearance","outline",1,"example-full-width","mr-2",2,"width","92% !important"],[3,"formControl"],[3,"value","hidden",4,"ngFor","ngForOf"],["matSuffix","","title","Ajouter un membre",1,"pointer",3,"hidden","click"],[3,"value","hidden"],["matInput","",3,"formControl"],[1,"w-100","color-chips",3,"ngClass"],[1,"col-11","pl-0"],[1,"example-section","pick-loc"],[1,"example-margin","pt-2",3,"disabled","checked","change"],[1,"col-1"],["title","Afficher",1,"icone-affectation","pointer","text-info",3,"click"],[1,"p-2","mt-4","pb-4","box-loc",3,"hidden"],[1,"mt-3","ml-2"],["aria-label","Fish selection"],[1,"ml-3",2,"font-style","italic"],["class","ml-2 mt-2",4,"ngIf"],[1,"ml-2","mt-2"],[1,"row","pl-4","pr-0","mt-4"],[1,"example-section","all-height","row"],[1,"example-margin",3,"checked","change"],[1,"col-5"],["type","submit",1,"col-2","btn","btn-outline-success","btn-border-radius",3,"click"],[1,"row",2,"position","relative"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","pl-0"],["matInput","","type","text",3,"formControl"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",2,"position","absolute","right","-2px",3,"hidden","click"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2","pr-0","pl-0"],["matSuffix","",1,"pointer","pl-2","pt-3","text-primary",3,"hidden","click"],["matInput","","rows","3",3,"formControl"],[1,"row","col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2",2,"position","relative"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","mt-3","pl-0","pr-0"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2","mt-3","pl-0","pr-2"],["matSuffix","",1,"pointer","pt-3","text-primary","mt-3","ml-5",2,"position","absolute","right","12px",3,"hidden","click"]],template:function(e,t){if(1&e){var i=v.bc();v.ac(0,"section",0),v.ac(1,"div",1),v.ac(2,"div",2),v.ac(3,"div",3),v.ac(4,"div",4),v.ac(5,"div",5),v.ac(6,"div",2),v.ac(7,"h2",6),v.Yc(8,"Inventaires"),v.Zb(),v.ac(9,"ul",7),v.ac(10,"li",8),v.ac(11,"button",9),v.mc("click",(function(){return t.addNew()})),v.ac(12,"mat-icon"),v.Yc(13,"add"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(14,"div",10),v.ac(15,"mat-accordion",11),v.Wc(16,di,121,37,"mat-expansion-panel",12),v.Wc(17,Vi,82,60,"mat-expansion-panel",13),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(18,"div",14),v.ac(19,"div",15),v.ac(20,"form",16),v.ac(21,"div",17),v.ac(22,"div",18),v.ac(23,"div",19),v.ac(24,"div",20),v.ac(25,"div",21),v.Yc(26,"Comit\xe9"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(27,"button",22,23),v.ac(29,"i",24),v.Yc(30,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(31,"div",25),v.ac(32,"div",2),v.ac(33,"div",26),v.ac(34,"mat-form-field",27),v.ac(35,"mat-label"),v.Yc(36,"Pr\xe9sident"),v.Zb(),v.ac(37,"mat-select",28),v.mc("ngModelChange",(function(e){return t.idPresiComite=e})),v.Vb(38,"mat-option",29),v.Wc(39,Wi,2,2,"mat-option",30),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Wc(40,Bi,10,4,"div",31),v.ac(41,"div",32),v.ac(42,"div",33),v.ac(43,"button",34),v.mc("click",(function(){return t.closeComite()})),v.Yc(44,"Fermer"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(45,"div",35),v.ac(46,"div",15),v.ac(47,"form",16),v.ac(48,"div",17),v.ac(49,"div",18),v.ac(50,"div",19),v.ac(51,"div",20),v.ac(52,"div",21),v.Yc(53,"Pr\xe9sents \xe0 la r\xe9union"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(54,"button",22,36),v.ac(56,"i",24),v.Yc(57,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(58,"div",25),v.Wc(59,Gi,10,4,"div",31),v.Wc(60,$i,10,2,"div",31),v.ac(61,"div",32),v.ac(62,"div",33),v.ac(63,"button",34),v.mc("click",(function(){return t.closePresent()})),v.Yc(64,"Fermer"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(65,"div",37),v.ac(66,"div",15),v.ac(67,"form",16),v.ac(68,"div",17),v.ac(69,"div",18),v.ac(70,"div",19),v.ac(71,"div",20),v.ac(72,"div",21),v.Yc(73,"Localit\xe9s"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(74,"button",22,38),v.ac(76,"i",24),v.Yc(77,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(78,"div",39),v.ac(79,"div",26),v.ac(80,"div",40),v.ac(81,"p",41),v.Yc(82),v.Zb(),v.Vb(83,"hr"),v.ac(84,"mat-chip-list",42),v.Wc(85,Ki,8,6,"mat-chip",43),v.Zb(),v.Zb(),v.Wc(86,Xi,9,5,"div",44),v.Zb(),v.Wc(87,Qi,8,1,"div",45),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(88,"div",46),v.ac(89,"div",47),v.ac(90,"form",48),v.ac(91,"div",17),v.ac(92,"div",18),v.ac(93,"div",19),v.ac(94,"div",20),v.ac(95,"div",21),v.Yc(96,"Instructions"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(97,"button",22,49),v.ac(99,"i",24),v.Yc(100,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(101,"div",25),v.ac(102,"div",50),v.ac(103,"div",51),v.ac(104,"div",52),v.ac(105,"mat-vertical-stepper",53,54),v.ac(107,"mat-step"),v.Wc(108,en,1,0,"ng-template",55),v.ac(109,"div",2),v.ac(110,"mat-form-field",56),v.ac(111,"mat-label"),v.Yc(112,"REUNION DE LANCEMENT DE L'INVENTAIRE"),v.Zb(),v.Vb(113,"textarea",57),v.Zb(),v.ac(114,"mat-icon",58),v.Yc(115,"info_outline"),v.Zb(),v.Zb(),v.ac(116,"div",2),v.ac(117,"mat-form-field",59),v.ac(118,"mat-label"),v.Yc(119,"RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS"),v.Zb(),v.Vb(120,"textarea",60),v.Zb(),v.ac(121,"mat-icon",58),v.Yc(122,"info_outline"),v.Zb(),v.Zb(),v.ac(123,"div",2),v.ac(124,"mat-form-field",59),v.ac(125,"mat-label"),v.Yc(126,"EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS"),v.Zb(),v.Vb(127,"textarea",61),v.Zb(),v.ac(128,"mat-icon",58),v.Yc(129,"info_outline"),v.Zb(),v.Zb(),v.Zb(),v.ac(130,"mat-step"),v.Wc(131,tn,1,0,"ng-template",55),v.ac(132,"div",2),v.ac(133,"mat-form-field",59),v.ac(134,"mat-label"),v.Yc(135,"MISE EN PLACE DU COMITE D'INVENTAIRE"),v.Zb(),v.Vb(136,"textarea",62),v.Zb(),v.ac(137,"mat-icon",58),v.Yc(138,"info_outline"),v.Zb(),v.Zb(),v.ac(139,"div",2),v.ac(140,"mat-form-field",59),v.ac(141,"mat-label"),v.Yc(142,"AFFECTATION DES EQUIPES D'INVENTAIRE"),v.Zb(),v.Vb(143,"textarea",63),v.Zb(),v.ac(144,"mat-icon",58),v.Yc(145,"info_outline"),v.Zb(),v.Zb(),v.ac(146,"div",2),v.ac(147,"mat-form-field",59),v.ac(148,"mat-label"),v.Yc(149,"DEROULEMENT DE L'INVENTAIRE"),v.Zb(),v.Vb(150,"textarea",64),v.Zb(),v.ac(151,"mat-icon",58),v.Yc(152,"info_outline"),v.Zb(),v.Zb(),v.Zb(),v.ac(153,"mat-step"),v.Wc(154,nn,1,0,"ng-template",55),v.ac(155,"div",2),v.ac(156,"mat-form-field",59),v.ac(157,"mat-label"),v.Yc(158,"RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE"),v.Zb(),v.Vb(159,"textarea",65),v.Zb(),v.ac(160,"mat-icon",58),v.Yc(161,"info_outline"),v.Zb(),v.Zb(),v.ac(162,"div",2),v.ac(163,"mat-form-field",59),v.ac(164,"mat-label"),v.Yc(165,"CORRECTION DES ANOMALIES"),v.Zb(),v.Vb(166,"textarea",66),v.Zb(),v.ac(167,"mat-icon",58),v.Yc(168,"info_outline"),v.Zb(),v.Zb(),v.ac(169,"div",2),v.ac(170,"mat-form-field",59),v.ac(171,"mat-label"),v.Yc(172,"APPROBATION D'INVENTAIRE"),v.Zb(),v.Vb(173,"textarea",67),v.Zb(),v.ac(174,"mat-icon",58),v.Yc(175,"info_outline"),v.Zb(),v.Zb(),v.ac(176,"div",2),v.ac(177,"mat-form-field",59),v.ac(178,"mat-label"),v.Yc(179,"TRANSMISSION DU DOSSIER D'INVENTAIRE"),v.Zb(),v.Vb(180,"textarea",68),v.Zb(),v.ac(181,"mat-icon",58),v.Yc(182,"info_outline"),v.Zb(),v.Zb(),v.Zb(),v.ac(183,"mat-step",69),v.Wc(184,an,1,0,"ng-template",55),v.Wc(185,cn,13,3,"div",70),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(186,"div",32),v.ac(187,"div",33),v.ac(188,"button",71),v.mc("click",(function(){return v.Oc(i),v.Kc(98).click()})),v.Yc(189,"Fermer"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(190,"div",72),v.ac(191,"div",47),v.ac(192,"form",48),v.ac(193,"div",17),v.ac(194,"div",18),v.ac(195,"div",19),v.ac(196,"div",20),v.ac(197,"div",21),v.Yc(198,"Proc\xe8s-verbal"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.ac(199,"button",22,73),v.ac(201,"i",24),v.Yc(202,"clear"),v.Zb(),v.Zb(),v.Zb(),v.ac(203,"div",74),v.ac(204,"div",50),v.ac(205,"div",75),v.ac(206,"mat-form-field",59),v.ac(207,"mat-label"),v.Yc(208,"Date et heure "),v.Zb(),v.Vb(209,"textarea",76),v.Zb(),v.ac(210,"mat-icon",58),v.Yc(211,"info_outline "),v.Zb(),v.Zb(),v.ac(212,"div",75),v.ac(213,"mat-form-field",59),v.ac(214,"mat-label"),v.Yc(215,"Ordre du jour "),v.Zb(),v.Vb(216,"textarea",77),v.Zb(),v.ac(217,"mat-icon",58),v.Yc(218,"info_outline "),v.Zb(),v.Zb(),v.ac(219,"div",75),v.ac(220,"mat-form-field",59),v.ac(221,"mat-label"),v.Yc(222,"Feuille de pr\xe9sence "),v.Zb(),v.Vb(223,"textarea",78),v.Zb(),v.ac(224,"mat-icon",58),v.Yc(225,"info_outline "),v.Zb(),v.Zb(),v.Wc(226,rn,15,5,"div",79),v.Wc(227,on,13,3,"div",80),v.Zb(),v.ac(228,"div",81),v.ac(229,"div",33),v.ac(230,"button",71),v.mc("click",(function(){return v.Oc(i),v.Kc(200).click()})),v.Yc(231,"Fermer"),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb()}2&e&&(v.Eb(11),v.xc("title",t.titleAdd)("disabled",t.securityServ.superviseurAdjoint),v.Eb(5),v.xc("ngIf",t.showForm),v.Eb(1),v.xc("ngForOf",t.inventaires),v.Eb(20),v.xc("ngModel",t.idPresiComite),v.Eb(2),v.xc("ngForOf",t.presidents),v.Eb(1),v.xc("ngForOf",t.tabComite.controls),v.Eb(19),v.xc("ngForOf",t.tabPresents.controls),v.Eb(1),v.xc("ngForOf",t.tabOtherPresent.controls),v.Eb(22),v.Zc(t.subdivisions[0]),v.Eb(3),v.xc("ngForOf",t.firstSub(t.localites)),v.Eb(1),v.xc("ngForOf",t.tabOpen),v.Eb(1),v.xc("ngIf",t.showForm),v.Eb(3),v.xc("formGroup",t.instForm),v.Eb(15),v.xc("linear",t.isLinear),v.Eb(9),v.xc("title",t.comments[0][0]),v.Eb(7),v.xc("title",t.comments[0][1]),v.Eb(7),v.xc("title",t.comments[0][2]),v.Eb(9),v.xc("title",t.comments[1][0]),v.Eb(7),v.xc("title",t.comments[1][1]),v.Eb(7),v.xc("title",t.comments[1][2]),v.Eb(9),v.xc("title",t.comments[2][0]),v.Eb(7),v.xc("title",t.comments[2][1]),v.Eb(7),v.xc("title",t.comments[2][2]),v.Eb(7),v.xc("title",t.comments[2][3]),v.Eb(4),v.xc("ngForOf",t.tabSignataires.controls),v.Eb(7),v.xc("formGroup",t.pvForm),v.Eb(18),v.xc("title",t.commentsPv[0]),v.Eb(7),v.xc("title",t.commentsPv[1]),v.Eb(7),v.xc("title",t.commentsPv[2]),v.Eb(2),v.xc("ngForOf",t.tabDeliberation.controls),v.Eb(1),v.xc("ngForOf",t.tabSignatairesPv.controls))},directives:[Z.b,I.a,ve.a,n.n,n.m,m.z,m.p,m.q,me.b,E.c,E.g,he.a,m.o,m.r,pe.o,y.c,m.j,Dt.g,Dt.b,Dt.c,x.b,m.b,m.h,E.i,ve.c,ve.f,ve.g,ve.e,Rt.b,Rt.d,Rt.a,n.l,ve.d,E.b,m.g,y.a,ge.a],pipes:[n.e],styles:[".img-membre[_ngcontent-%COMP%]{width:40px;height:40px;z-index:1!important}.date-width[_ngcontent-%COMP%]{width:50%}.example-full-width[_ngcontent-%COMP%]{width:95.2%!important}.addFile[_ngcontent-%COMP%]{top:6px}.addFile[_ngcontent-%COMP%], .addInv[_ngcontent-%COMP%]{position:absolute}.addInv[_ngcontent-%COMP%]{top:-21px;left:-46px}.instruction-modal[_ngcontent-%COMP%]{margin-right:40%}.instruction-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:900px}.all-width[_ngcontent-%COMP%]{width:100%!important}.modal-body[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#f102a1!important}.input.mat-input-element[_ngcontent-%COMP%]{color:#fc0d05!important}.block-user[_ngcontent-%COMP%]{border:1px solid rgba(2,2,2,.19);border-radius:10%;background-color:#f5f5f5;height:90px;width:125px}.block-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inherit;margin-left:33%}.block-user[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:inherit;text-align:center}.titre-membre[_ngcontent-%COMP%]{font-size:10px!important}.icone-affectation[_ngcontent-%COMP%]{font-size:16px;padding-top:.3em}.color-chips[_ngcontent-%COMP%]{background-color:rgba(0,123,255,.18)}.box-loc[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.14);border-radius:5%;background-color:#f6f6f6;box-shadow:0 0 3px #31414a}"]}),ln),dn=i("1jcm"),bn=i("jhN1"),mn=((sn=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t}return _createClass(e,[{key:"transform",value:function(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}]),e}()).\u0275fac=function(e){return new(e||sn)(v.Ub(bn.b))},sn.\u0275pipe=v.Tb({name:"safeUrl",type:sn,pure:!0}),sn);function fn(e,t){if(1&e&&(v.ac(0,"span"),v.Yc(1),v.rc(2,"date"),v.Zb()),2&e){var i=v.qc().$implicit;v.Eb(1),v.ad(" au ",v.tc(2,1,i.dateInv,"dd/MM/yyyy"),"")}}function pn(e,t){if(1&e&&(v.ac(0,"option",13),v.Yc(1," Inventaire "),v.Wc(2,fn,3,4,"span",12),v.Zb()),2&e){var i=t.$implicit;v.xc("value",i.id),v.Eb(2),v.xc("ngIf",i.dateInv)}}function hn(e,t){if(1&e&&(v.ac(0,"div",4),v.Vb(1,"iframe",19),v.rc(2,"safeUrl"),v.Zb()),2&e){var i=v.qc(3);v.Eb(1),v.xc("src",v.sc(2,1,i.urlInst),v.Qc)}}function vn(e,t){if(1&e&&(v.ac(0,"div",14),v.ac(1,"div",15),v.ac(2,"div",16),v.ac(3,"div",17),v.Wc(4,hn,3,3,"div",18),v.Zb(),v.Zb(),v.Zb(),v.Zb()),2&e){var i=v.qc(2);v.Eb(4),v.xc("ngIf",i.urlInst)}}function gn(e,t){if(1&e&&(v.ac(0,"div",15),v.ac(1,"div",16),v.ac(2,"div",17),v.ac(3,"div",4),v.Vb(4,"iframe",19),v.rc(5,"safeUrl"),v.Zb(),v.Zb(),v.Zb(),v.Zb()),2&e){var i=t.$implicit,n=v.qc(3);v.Eb(4),v.xc("src",v.sc(5,1,n.docLink+i[1]),v.Qc)}}function En(e,t){if(1&e&&(v.ac(0,"div",14),v.Wc(1,gn,6,3,"div",20),v.Zb()),2&e){var i=v.qc(2);v.Eb(1),v.xc("ngForOf",i.instructions)}}function xn(e,t){if(1&e){var i=v.bc();v.ac(0,"p"),v.ac(1,"strong",21),v.Yc(2,"J'atteste avoir pris connaissance de ces instructions d'inventaire"),v.Zb(),v.ac(3,"mat-slide-toggle",22),v.mc("click",(function(){return v.Oc(i),v.qc(2).approvInstr()})),v.Zb(),v.Zb()}if(2&e){var n=v.qc(2);v.Eb(3),v.xc("color",n.color)("checked",n.checked)("disabled",n.checked)}}function In(e,t){if(1&e){var i=v.bc();v.ac(0,"section",1),v.ac(1,"div",2),v.ac(2,"div",3),v.ac(3,"div",4),v.ac(4,"div",5),v.ac(5,"ul",6),v.ac(6,"li",7),v.ac(7,"h4",8),v.Yc(8,"Choisir un inventaire"),v.Zb(),v.Zb(),v.ac(9,"li",7),v.ac(10,"select",9),v.mc("ngModelChange",(function(e){return v.Oc(i),v.qc().idCurrentInv=e}))("change",(function(e){return v.Oc(i),v.qc().inventaireChange(e.target.value)})),v.Wc(11,pn,3,2,"option",10),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Zb(),v.Wc(12,vn,5,1,"div",11),v.Wc(13,En,2,1,"div",11),v.Wc(14,xn,4,3,"p",12),v.Zb(),v.Zb()}if(2&e){var n=v.qc();v.Eb(10),v.xc("ngModel",n.idCurrentInv),v.Eb(1),v.xc("ngForOf",n.inventaires),v.Eb(1),v.xc("ngIf",n.creation),v.Eb(1),v.xc("ngIf",!n.creation),v.Eb(1),v.xc("ngIf",n.currentInv)}}wt.a.vfs=Pt.a.pdfMake.vfs;var Zn,yn,kn,Cn=[{path:"zonage",canActivate:[r.a],component:ue},{path:"zonage/:id",canActivate:[r.a],component:ue},{path:"users",canActivate:[c.a],component:St},{path:"inventaires",canActivate:[c.a],component:un},{path:"instruction",component:(Zn=function(){function e(t,i,n){_classCallCheck(this,e),this.sharedService=t,this.securityServ=i,this.inventaireServ=n,this.idCurrentEse=null,this.inventaires=[],this.currentInv=null,this.idCurrentInv=null,this.show=!1,this.instructions=[],this.creation=!1,this.entreprise=null,this.urlInst=null,this.color="accent",this.checked=!1,this.docLink=this.sharedService.baseUrl+"/documents/"}return _createClass(e,[{key:"ngOnInit",value:function(){this.idCurrentEse=localStorage.getItem("currentEse"),this.getInventaireByEse()}},{key:"getInventaireByEse",value:function(){var e=this;this.inventaireServ.getInventaireByEse(this.idCurrentEse).then((function(t){var i;e.inventaires=t,e.currentInv=t?t[0]:null,e.traitementInst(e.currentInv),e.idCurrentInv=null===(i=e.currentInv)||void 0===i?void 0:i.id,e.getStatusInstr(e.idCurrentInv),e.show=!0}),(function(t){e.securityServ.showLoadingIndicatior.next(!1),console.log(t)}))}},{key:"getStatusInstr",value:function(e){var t=this;e&&this.inventaireServ.getStatusInstr(e).then((function(e){return t.checked=0!=e}))}},{key:"approvInstr",value:function(){var e=this;this.idCurrentInv&&this.inventaireServ.approvInstr(this.idCurrentInv).then((function(t){return e.checked=!0}))}},{key:"traitementInst",value:function(e){console.log(e),this.entreprise=null==e?void 0:e.entreprise,this.creation="creation"==(null==e?void 0:e.localInstructionPv[0]),this.instructions=null==e?void 0:e.instruction,this.creation&&this.generatePdf(this.instructions)}},{key:"inventaireChange",value:function(e){this.currentInv=this.inventaires.find((function(t){return t.id==e})),this.traitementInst(this.currentInv)}},{key:"pageInst",value:function(e){var t=e[0][0],i=e[0][1],n=e[0][2],a=e[1][0],c=e[1][1],r=e[1][2],o=e[2][0],l=e[2][1],s=e[2][2],u=e[2][3],d=e[3];return[].concat(_toConsumableArray(this.getImage()),[{table:{width:["*"],body:[].concat(_toConsumableArray(this.getEntete()),[[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"INSTRUCTIONS D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:"",margin:[2,7],border:[!1,!1,!1,!1]}],[{text:"1.TRAVAUX PREPARATOIRES",style:"grasGrisF",alignment:"center",fontSize:12}],[{text:"1.1. REUNION DE LANCEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:t,margin:[2,7],fontSize:10}],[{text:"1.2. RAPPEL DE LA PROCEDURES SUR LES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:i,margin:[2,7],fontSize:10}],[{text:"1.3. EDITION ET CONTR\xd4LE DU FICHIER DES IMMOBILISATIONS",style:"grasGris",alignment:"center"}],[{text:n,margin:[2,7],fontSize:10}],[{text:"2.TRAVAUX D'INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"2.1. MISE EN PLACE DU COMITE D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:a,margin:[2,7],fontSize:10}],[{text:"2.2. AFFECTATION DES EQUIPES D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:c,margin:[2,7],fontSize:10}],[{text:"2.3. DEROULEMENT DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:r,margin:[2,7],fontSize:10}],[{text:"3.TRAVAUX POST-INVENTAIRE",style:"grasGrisF",alignment:"center"}],[{text:"3.1. RAPPROCHEMENT FICHIER D'IMMOBILISATIONS ET RESULTATS DE L'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:o,margin:[2,7],fontSize:10}],[{text:"3.2. CORRECTION DES ANOMALIES",style:"grasGris",alignment:"center"}],[{text:l,margin:[2,7],fontSize:10}],[{text:"3.3. APPROBATION D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:s,margin:[2,7],fontSize:10}],[{text:"3.4. TRANSMISSION DU DOSSIER D'INVENTAIRE",style:"grasGris",alignment:"center"}],[{text:u,margin:[2,7],fontSize:10}]])},margin:[0,10,0,0]}],_toConsumableArray(this.getSignatairePdf(d)))}},{key:"getImage",value:function(){var e,t,i;return(null===(e=this.entreprise)||void 0===e?void 0:e.image)&&(null===(t=this.entreprise)||void 0===t?void 0:t.image)!=Mt.a?[{image:null===(i=this.entreprise)||void 0===i?void 0:i.image,width:75}]:[{}]}},{key:"getEntete",value:function(){var e=this.entreprise;return[[{text:""+(null==e?void 0:e.denomination),border:[!1,!1,!1,!1],margin:[-5,0,0,0]}],[{text:(null==e?void 0:e.republique)+"/"+(null==e?void 0:e.ville),border:[!1,!1,!1,!1],margin:[-5,0,0,0]}]]}},{key:"getSignatairePdf",value:function(e){return e&&0!=e.length?2==e.length?this.getOneSignatairePdf(e):6==e.length?this.get3SignatairePdf(e):this.getOtherSignatairePdf(e):[{}]}},{key:"getOneSignatairePdf",value:function(e){return[{text:e[0],margin:[0,20,0,0],fontSize:10,decoration:""},{text:e[1],margin:[10,2,0,0],fontSize:10,decoration:""}]}},{key:"get3SignatairePdf",value:function(e){return[{table:{widths:["*","*"],body:[[{text:e[0]+"\n"+e[1],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1]},{text:e[4]+"\n"+e[5],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"right"}],[{text:e[2]+"\n"+e[3],fontSize:10,margin:[0,20,0,0],decoration:"",border:[!1,!1,!1,!1],alignment:"center",colSpan:2},{}]]}}]}},{key:"getOtherSignatairePdf",value:function(e){return[{table:{widths:["*","*"],body:_toConsumableArray(this.lignesSignataires(e))}}]}},{key:"lignesSignataires",value:function(e){for(var t=[],i=0;i<e.length;i+=4)t.push([{text:e[i]+"\n"+e[i+1],fontSize:10,margin:[0,20,0,70],border:[!1,!1,!1,!1]},{text:e[i+2]+"\n"+e[i+3],fontSize:10,margin:[0,20,0,70],alignment:"right",border:[!1,!1,!1,!1]}]);return t}},{key:"generatePdf",value:function(e){var t=this,i={content:[this.pageInst(e)],styles:this.getStyle(),pageMargins:[40,40]};wt.a.createPdf(i).getBase64((function(e){t.urlInst="data:application/pdf;base64, "+e}))}},{key:"getStyle",value:function(){return{fsize:{fontSize:6.5},enTete:{fontSize:6.5,fillColor:"#eeeeee"},enTete2:{fontSize:6.5,bold:!0,fillColor:"#bcbdbc"},gris:{fillColor:"#bcbdbc"},grasGris:{bold:!0,fillColor:"#e6e6e6"},grasGrisF:{bold:!0,fillColor:"#b5b3b3"},gras:{bold:!0},centerGG:{bold:!0,fillColor:"#e6e6e6",alignment:"center"},no_border:{border:!1}}}}]),e}(),Zn.\u0275fac=function(e){return new(e||Zn)(v.Ub(d.a),v.Ub(b.a),v.Ub(u.a))},Zn.\u0275cmp=v.Ob({type:Zn,selectors:[["app-instruction"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"select-trie",2,"width","215px !important",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","row clearfix",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],["class","row",4,"ngIf"],["allow","fullscreen","title","Instruction",2,"width","100%","height","75vh",3,"src"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngFor","ngForOf"],[2,"font-size","15px"],[1,"example-margin",3,"color","checked","disabled","click"]],template:function(e,t){1&e&&v.Wc(0,In,15,5,"section",0),2&e&&v.xc("ngIf",t.show)},directives:[n.n,m.w,m.o,m.r,n.m,m.s,m.y,dn.a],pipes:[n.e,mn],styles:[".select-trie[_ngcontent-%COMP%]{background-color:#ebebee!important;width:153px!important}"]}),Zn)}],Sn=((yn=function e(){_classCallCheck(this,e)}).\u0275mod=v.Sb({type:yn}),yn.\u0275inj=v.Rb({factory:function(e){return new(e||yn)},imports:[[a.h.forChild(Cn)],a.h]}),yn),On=i("TU8p"),wn=i("2ChS"),Ln=i("MutI"),Pn=i("XhcP"),Mn=i("Wp6s"),qn=i("Xa2L"),Fn=i("bv9b"),Dn=i("5RNC"),Rn=i("wZkO"),An=i("AGJ6"),Nn=i("+0xr"),Yn=i("M9IT"),Tn=i("QibW"),_n=i("Dh3D"),Vn=i("/t3+"),Wn=i("7ZcW"),Un=i("STbY"),Bn=((kn=function e(){_classCallCheck(this,e)}).\u0275mod=v.Sb({type:kn}),kn.\u0275inj=v.Rb({factory:function(e){return new(e||kn)},imports:[[n.c,Sn,m.k,m.u,me.c,dn.b,Z.c,I.b,E.e,x.c,On.b,y.e,fe.b,wn.b,Ln.c,Pn.a,g.b,ve.b,Rt.c,Mn.g,qn.a,Fn.b,Dn.a,Rn.d,An.b,ge.b,n.c,n.c,m.k,m.u,de.g,g.b,Nn.l,Yn.b,Tn.c,he.b,qt.f,_n.c,Vn.a,Wn.b,Un.c,de.g,Dt.d]]}),kn)}}]);