function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{AGJ6:function(t,e,n){"use strict";n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return h}));var o=n("fXoL"),i=n("ofXK"),c=n("bTqV"),a=n("bv9b"),r=n("Xa2L"),s=n("FKr1"),l=n("NFeN");function d(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",4),o.Yc(2),o.Zb(),o.Xb()),2&t){var n=o.qc();o.Eb(1),o.Kb("is-mat-icon",!n.options.buttonIcon.fontSet)("active",n.options.active&&!n.options.disabled),o.xc("ngClass",n.options.buttonIcon.customClass)("fontSet",n.options.buttonIcon.fontSet)("fontIcon",n.options.buttonIcon.fontIcon)("color",n.options.buttonIcon.color)("svgIcon",n.options.buttonIcon.svgIcon)("inline",n.options.buttonIcon.inline),o.Eb(1),o.ad(" ",n.options.buttonIcon.fontSet?"":n.options.buttonIcon.fontIcon," ")}}function b(t,e){if(1&t&&(o.ac(0,"span",5),o.Yc(1),o.Zb()),2&t){var n=o.qc();o.Kb("active",n.options.active&&!n.options.disabled),o.Eb(1),o.ad(" ",n.options.text," ")}}function u(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",6),o.Yc(2),o.Zb(),o.Xb()),2&t){var n=o.qc();o.Eb(1),o.xc("fontSet",n.options.icon.fontSet)("fontIcon",n.options.icon.fontIcon)("color",n.options.icon.color)("svgIcon",n.options.icon.svgIcon)("inline",n.options.icon.inline),o.Eb(1),o.ad(" ",n.options.icon.fontSet?"":n.options.icon.fontIcon," ")}}function p(t,e){if(1&t&&o.Vb(0,"mat-spinner",7),2&t){var n=o.qc();o.Kb("active",n.options.active&&!n.options.disabled),o.xc("diameter",n.options.fab?58:n.options.spinnerSize)("color",n.options.spinnerColor)("mode",n.options.mode)("value",n.options.value)}}function m(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",3),o.Yc(2),o.Zb(),o.Xb()),2&t){var n=o.qc();o.Eb(1),o.Kb("is-mat-icon",!n.options.buttonIcon.fontSet),o.xc("ngClass",n.options.buttonIcon.customClass)("fontSet",n.options.buttonIcon.fontSet)("fontIcon",n.options.buttonIcon.fontIcon)("color",n.options.buttonIcon.color)("svgIcon",n.options.buttonIcon.svgIcon)("inline",n.options.buttonIcon.inline),o.Eb(1),o.ad(" ",n.options.buttonIcon.fontSet?"":n.options.buttonIcon.fontIcon," ")}}function f(t,e){if(1&t&&o.Vb(0,"mat-progress-bar",4),2&t){var n=o.qc();o.xc("color",n.options.barColor)("mode",n.options.mode)("value",n.options.value)}}var g=function(){var t=function(){function t(){_classCallCheck(this,t),this.btnClick=new o.o}return _createClass(t,[{key:"onClick",value:function(t){this.options.disabled||this.options.active||this.btnClick.emit(t)}},{key:"ngOnChanges",value:function(t){t.active&&(this.options.active=t.active.currentValue),t.disabled&&(this.options.disabled=t.disabled.currentValue)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ob({type:t,selectors:[["mat-spinner-button"]],hostBindings:function(t,e){1&t&&o.mc("click",(function(t){return e.onClick(t)}))},inputs:{options:"options",active:"active",disabled:"disabled"},outputs:{btnClick:"btnClick"},features:[o.Cb],decls:5,vars:20,consts:[["mat-button","",3,"type","color","ngClass","disabled"],[4,"ngIf"],["class","button-text",3,"active",4,"ngIf"],["class","spinner",3,"diameter","color","mode","value","active",4,"ngIf"],[1,"mat-button-icon",3,"ngClass","fontSet","fontIcon","color","svgIcon","inline"],[1,"button-text"],[3,"fontSet","fontIcon","color","svgIcon","inline"],[1,"spinner",3,"diameter","color","mode","value"]],template:function(t,e){1&t&&(o.ac(0,"button",0),o.Wc(1,d,3,11,"ng-container",1),o.Wc(2,b,2,3,"span",2),o.Wc(3,u,3,6,"ng-container",1),o.Wc(4,p,1,6,"mat-spinner",3),o.Zb()),2&t&&(o.Kb("active",e.options.active)("fullWidth",e.options.fullWidth)("mat-raised-button",e.options.raised)("mat-stroked-button",e.options.stroked)("mat-flat-button",e.options.flat)("mat-fab",e.options.fab),o.xc("type",e.options.type)("color",e.options.buttonColor)("ngClass",e.options.customClass)("disabled",e.options.active||e.options.disabled),o.Eb(1),o.xc("ngIf",e.options.buttonIcon),o.Eb(1),o.xc("ngIf",!e.options.fab),o.Eb(1),o.xc("ngIf",e.options.fab&&e.options.icon),o.Eb(1),o.xc("ngIf",e.options.active&&!e.options.disabled))},directives:[c.b,i.l,i.n,l.a,r.b],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{outline:none}[_nghost-%COMP%]   button.active[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   button[_ngcontent-%COMP%]  .mat-button-wrapper{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   button.fullWidth[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   button.mat-fab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-top:-15px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:25%;opacity:0;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .spinner.active[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .button-text.active[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon[_ngcontent-%COMP%]{padding-right:5px;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon.is-mat-icon[_ngcontent-%COMP%]{font-size:18px;position:relative;top:3px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon.active[_ngcontent-%COMP%]{opacity:0}"]}),t}(),v=function(){var t=function(){function t(){_classCallCheck(this,t),this.btnClick=new o.o}return _createClass(t,[{key:"onClick",value:function(t){this.options.disabled||this.options.active||this.btnClick.emit(t)}},{key:"ngOnChanges",value:function(t){t.active&&(this.options.active=t.active.currentValue),t.disabled&&(this.options.disabled=t.disabled.currentValue)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ob({type:t,selectors:[["mat-bar-button"]],hostBindings:function(t,e){1&t&&o.mc("click",(function(t){return e.onClick(t)}))},inputs:{options:"options",active:"active",disabled:"disabled"},outputs:{btnClick:"btnClick"},features:[o.Cb],decls:5,vars:17,consts:[["mat-button","",3,"type","color","ngClass","disabled"],[4,"ngIf"],["class","bar",3,"color","mode","value",4,"ngIf"],[3,"ngClass","fontSet","fontIcon","color","svgIcon","inline"],[1,"bar",3,"color","mode","value"]],template:function(t,e){1&t&&(o.ac(0,"button",0),o.Wc(1,m,3,9,"ng-container",1),o.ac(2,"span"),o.Yc(3),o.Zb(),o.Wc(4,f,1,3,"mat-progress-bar",2),o.Zb()),2&t&&(o.Kb("active",e.options.active)("mat-raised-button",e.options.raised)("mat-stroked-button",e.options.stroked)("mat-flat-button",e.options.flat)("fullWidth",e.options.fullWidth),o.xc("type",e.options.type)("color",e.options.buttonColor)("ngClass",e.options.customClass)("disabled",e.options.active||e.options.disabled),o.Eb(1),o.xc("ngIf",e.options.buttonIcon),o.Eb(2),o.Zc(e.options.text),o.Eb(1),o.xc("ngIf",e.options.active&&!e.options.disabled))},directives:[c.b,i.l,i.n,l.a,a.a],styles:["[_nghost-%COMP%]   button.active[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   button.fullWidth[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-right:5px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.is-mat-icon[_ngcontent-%COMP%]{font-size:18px;position:relative;top:3px}"]}),t}(),h=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(){return{ngModule:t}}}]),t}();return t.\u0275mod=o.Sb({type:t}),t.\u0275inj=o.Rb({factory:function(e){return new(e||t)},imports:[[i.c,c.c,a.b,r.a,s.u,l.b]]}),t}()},JPjI:function(t,e,n){"use strict";n.r(e),n.d(e,"SupportsModule",(function(){return ee}));var o,i=n("ofXK"),c=n("tyNb"),a=n("/8Pk"),r=n("AytR"),s=n("fXoL"),l=n("tk/3"),d=((o=function(){function t(e){_classCallCheck(this,t),this.http=e,this.apiUrl=r.a.apiSupportUrl+"/api/supports"}return _createClass(t,[{key:"create",value:function(t){return this.http.post(""+this.apiUrl,t)}},{key:"update",value:function(t,e){return this.http.put("".concat(this.apiUrl,"/").concat(t),e)}},{key:"get",value:function(t){return this.http.get("".concat(this.apiUrl,"/").concat(t))}},{key:"lists",value:function(t){var e=""+this.apiUrl;return t&&(e+="?licence="+t),this.http.get(e)}},{key:"getTicketStatus",value:function(t){if(!0===t.closed)return'<span class="badge badge-success">Cl\xf4tur\xe9</span>';var e="";switch(t.status){case 1:e='<span class="badge badge-secondary">Pris en charge</span>';break;case 2:e='<span class="badge badge-info">En traitement</span>';break;case 3:e='<span class="badge badge-success">Trait\xe9</span>';break;default:e='<span class="badge badge-warning">Ouvert</span>'}return e}}]),t}()).\u0275fac=function(t){return new(t||o)(s.ic(l.b))},o.\u0275prov=s.Qb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),b=n("kmnG"),u=n("qFsG"),p=n("QibW"),m=n("3Pt+");function f(t,e){1&t&&(s.ac(0,"span"),s.Yc(1,"D\xe9tail du ticket"),s.Zb())}function g(t,e){1&t&&(s.ac(0,"span"),s.Yc(1,"Progression"),s.Zb())}function v(t,e){if(1&t&&(s.ac(0,"div",42),s.Vb(1,"img",43),s.Zb()),2&t){var n=e.$implicit;s.Eb(1),s.xc("src",n,s.Rc)}}function h(t,e){if(1&t&&(s.ac(0,"div",4),s.Wc(1,v,2,1,"div",41),s.Zb()),2&t){var n=s.qc(3);s.Eb(1),s.xc("ngForOf",n.ticket.piecesJointes)}}function C(t,e){if(1&t){var n=s.bc();s.ac(0,"div",23),s.ac(1,"div",4),s.ac(2,"div",24),s.ac(3,"div",4),s.ac(4,"div",25),s.ac(5,"div",4),s.ac(6,"div",26),s.ac(7,"mat-label"),s.Yc(8,"Type de ticket"),s.Zb(),s.Zb(),s.ac(9,"div",27),s.ac(10,"mat-form-field",28),s.Vb(11,"input",29),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(12,"div",4),s.ac(13,"div",25),s.ac(14,"div",4),s.ac(15,"div",26),s.ac(16,"mat-label"),s.Yc(17,"Objet"),s.Zb(),s.Zb(),s.ac(18,"div",27),s.ac(19,"mat-form-field",28),s.Vb(20,"input",30),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(21,"div",4),s.ac(22,"div",25),s.ac(23,"div",4),s.ac(24,"div",26),s.ac(25,"mat-label"),s.Yc(26,"Description"),s.Zb(),s.Zb(),s.ac(27,"div",31),s.ac(28,"mat-form-field",28),s.ac(29,"textarea",32),s.Yc(30),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(31,"div",4),s.ac(32,"div",25),s.ac(33,"div",4),s.ac(34,"div",33),s.ac(35,"button",34),s.mc("click",(function(){return s.Oc(n),s.qc(2).currentContainer=2})),s.Yc(36,"Voir l'\xe9tat d'avancement"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(37,"div",35),s.Wc(38,h,2,1,"div",36),s.ac(39,"div",37),s.ac(40,"div",38),s.ac(41,"div",39),s.Vb(42,"div",40),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()}if(2&t){var o=s.qc(2);s.Eb(11),s.yc("value",o.ticket.type),s.Eb(9),s.yc("value",o.ticket.objet),s.Eb(10),s.Zc(o.ticket.description),s.Eb(8),s.xc("ngIf",o.ticket.piecesJointes.length>0)}}var k=function(t,e){return{"active-step editable-step":t,"step-done":e}};function Z(t,e){if(1&t&&(s.ac(0,"div",44),s.ac(1,"div",4),s.ac(2,"div",45),s.ac(3,"div",46),s.ac(4,"div",47),s.ac(5,"div",48),s.ac(6,"div",49),s.ac(7,"div",50),s.Yc(8,"Ouvert"),s.Zb(),s.Vb(9,"div",51),s.ac(10,"div",52),s.ac(11,"span"),s.Yc(12,"01"),s.Zb(),s.Zb(),s.Vb(13,"div",53),s.Zb(),s.ac(14,"div",49),s.ac(15,"div",50),s.Yc(16,"Pris en charge"),s.Zb(),s.Vb(17,"div",51),s.ac(18,"div",52),s.ac(19,"span"),s.Yc(20,"02"),s.Zb(),s.Zb(),s.Vb(21,"div",53),s.Zb(),s.ac(22,"div",49),s.ac(23,"div",50),s.Yc(24,"En traitement"),s.Zb(),s.Vb(25,"div",51),s.ac(26,"div",52),s.ac(27,"span"),s.Yc(28,"03"),s.Zb(),s.Zb(),s.Vb(29,"div",53),s.Zb(),s.ac(30,"div",49),s.ac(31,"div",50),s.Yc(32,"Trait\xe9"),s.Zb(),s.Vb(33,"div",51),s.ac(34,"div",52),s.ac(35,"span"),s.Yc(36,"04"),s.Zb(),s.Zb(),s.Vb(37,"div",53),s.Zb(),s.ac(38,"div",49),s.ac(39,"div",50),s.Yc(40,"Cl\xf4tur\xe9"),s.Zb(),s.Vb(41,"div",51),s.ac(42,"div",52),s.ac(43,"span"),s.Yc(44,"05"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()),2&t){var n=s.qc(2);s.Eb(6),s.xc("ngClass",s.Cc(5,k,0==n.ticket.status,n.ticket.status>0)),s.Eb(8),s.xc("ngClass",s.Cc(8,k,1==n.ticket.status,n.ticket.status>1)),s.Eb(8),s.xc("ngClass",s.Cc(11,k,2==n.ticket.status,n.ticket.status>2)),s.Eb(8),s.xc("ngClass",s.Cc(14,k,3==n.ticket.status&&!n.ticket.closed,n.ticket.closed)),s.Eb(8),s.xc("ngClass",s.Cc(17,k,4==n.ticket.status,n.ticket.closed))}}function O(t,e){1&t&&(s.ac(0,"p"),s.Yc(1,"Quelle est votre niveau "),s.Vb(2,"br"),s.Yc(3," de satisfaction sur une \xe9chelle de 1 \xe0 5 ?"),s.Zb())}function x(t,e){1&t&&(s.ac(0,"p"),s.Yc(1,"Votre niveau de satisfaction sur une \xe9chelle de 1 \xe0 5 "),s.Zb())}function _(t,e){if(1&t){var n=s.bc();s.ac(0,"li"),s.ac(1,"mat-radio-group",59),s.mc("ngModelChange",(function(t){return s.Oc(n),s.qc(3).niveauSatisfaction=t})),s.ac(2,"mat-radio-button",60),s.Yc(3),s.Zb(),s.Zb(),s.Zb()}if(2&t){var o=e.$implicit,i=s.qc(3);s.Eb(1),s.xc("ngModel",i.niveauSatisfaction),s.Eb(1),s.xc("value",o)("disabled",i.ticket.closed),s.Eb(1),s.ad(" ",o," ")}}function P(t,e){if(1&t&&(s.ac(0,"div",54),s.ac(1,"div",55),s.Wc(2,O,4,0,"p",16),s.Wc(3,x,2,0,"p",16),s.Zb(),s.ac(4,"div",56),s.ac(5,"ul",57),s.Wc(6,_,4,4,"li",58),s.Zb(),s.Zb(),s.Zb()),2&t){var n=s.qc(2);s.Eb(2),s.xc("ngIf",!n.ticket.closed),s.Eb(1),s.xc("ngIf",n.ticket.closed),s.Eb(3),s.xc("ngForOf",n.niveauSatisfactions)}}function M(t,e){if(1&t&&(s.ac(0,"div",26),s.ac(1,"span",67),s.Yc(2),s.Zb(),s.Zb()),2&t){var n=s.qc(3);s.Eb(2),s.ad(" ",n.ticket.assigne.nom," ")}}function y(t,e){1&t&&(s.ac(0,"li"),s.ac(1,"span",67),s.Yc(2,"\xa0"),s.Zb(),s.Yc(3," Support team "),s.Zb())}function w(t,e){if(1&t&&(s.ac(0,"div",61),s.ac(1,"div",26),s.ac(2,"span",62),s.Yc(3),s.Zb(),s.Zb(),s.ac(4,"div",26),s.ac(5,"span",63),s.Yc(6),s.Zb(),s.Zb(),s.Wc(7,M,3,1,"div",64),s.ac(8,"div",65),s.ac(9,"ul",66),s.ac(10,"li"),s.ac(11,"span",62),s.Yc(12,"\xa0"),s.Zb(),s.Yc(13," Entit\xe9 "),s.Zb(),s.ac(14,"li"),s.ac(15,"span",63),s.Yc(16,"\xa0"),s.Zb(),s.Yc(17," Initiateur "),s.Zb(),s.Wc(18,y,4,0,"li",16),s.Zb(),s.Zb(),s.Zb()),2&t){var n=s.qc(2);s.Eb(3),s.ad(" ",n.ticket.entreprise.denomination," "),s.Eb(3),s.ad(" ",null==n.ticket.auteur?null:n.ticket.auteur.username," "),s.Eb(1),s.xc("ngIf",n.ticket.auteur.nom&&n.isSuperAdmin),s.Eb(11),s.xc("ngIf",n.isSuperAdmin)}}function I(t,e){1&t&&(s.ac(0,"span",75),s.Yc(1,"Voulez-vous cl\xf4turer le ticket ? "),s.Zb())}function E(t,e){if(1&t){var n=s.bc();s.ac(0,"button",76),s.mc("click",(function(){return s.Oc(n),s.qc(3).wantClose=!0})),s.Yc(1,"Oui"),s.Zb()}}function S(t,e){1&t&&(s.ac(0,"button",77),s.Yc(1,"Non"),s.Zb())}function Y(t,e){if(1&t){var n=s.bc();s.ac(0,"button",78),s.mc("click",(function(){return s.Oc(n),s.qc(3).closeTicket()})),s.Yc(1,"Confirmer"),s.Zb()}}function W(t,e){if(1&t){var n=s.bc();s.ac(0,"button",79),s.mc("click",(function(){return s.Oc(n),s.qc(3).wantClose=!1})),s.Yc(1,"Annuler"),s.Zb()}}function z(t,e){if(1&t&&(s.ac(0,"div",68),s.ac(1,"div",69),s.Wc(2,I,2,0,"span",70),s.Wc(3,E,2,0,"button",71),s.Wc(4,S,2,0,"button",72),s.Wc(5,Y,2,0,"button",73),s.Wc(6,W,2,0,"button",74),s.Zb(),s.Zb()),2&t){var n=s.qc(2);s.Eb(2),s.xc("ngIf",!n.wantClose),s.Eb(1),s.xc("ngIf",!n.wantClose),s.Eb(1),s.xc("ngIf",!n.wantClose),s.Eb(1),s.xc("ngIf",n.wantClose),s.Eb(1),s.xc("ngIf",n.wantClose)}}function T(t,e){1&t&&(s.ac(0,"span",75),s.Yc(1,"Voulez-vous passer \xe0 l'\xe9tape suivante ? "),s.Zb())}function q(t,e){if(1&t){var n=s.bc();s.ac(0,"button",76),s.mc("click",(function(){return s.Oc(n),s.qc(3).goToNextStep=!0})),s.Yc(1,"Oui"),s.Zb()}}function L(t,e){1&t&&(s.ac(0,"button",77),s.Yc(1,"Non"),s.Zb())}function V(t,e){if(1&t){var n=s.bc();s.ac(0,"button",78),s.mc("click",(function(){return s.Oc(n),s.qc(3).nextStep()})),s.Yc(1,"Confirmer"),s.Zb()}}function D(t,e){if(1&t){var n=s.bc();s.ac(0,"button",79),s.mc("click",(function(){return s.Oc(n),s.qc(3).goToNextStep=!1})),s.Yc(1,"Annuler"),s.Zb()}}function U(t,e){if(1&t&&(s.ac(0,"div",68),s.ac(1,"div",69),s.Wc(2,T,2,0,"span",70),s.Wc(3,q,2,0,"button",71),s.Wc(4,L,2,0,"button",72),s.Wc(5,V,2,0,"button",73),s.Wc(6,D,2,0,"button",74),s.Zb(),s.Zb()),2&t){var n=s.qc(2);s.Eb(2),s.xc("ngIf",!n.goToNextStep),s.Eb(1),s.xc("ngIf",!n.goToNextStep),s.Eb(1),s.xc("ngIf",!n.goToNextStep),s.Eb(1),s.xc("ngIf",n.goToNextStep),s.Eb(1),s.xc("ngIf",n.goToNextStep)}}function F(t,e){if(1&t&&(s.ac(0,"div",2),s.ac(1,"div",3),s.ac(2,"div",4),s.ac(3,"div",5),s.ac(4,"ul",6),s.ac(5,"li",7),s.ac(6,"h4",8),s.Yc(7),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(8,"div",9),s.ac(9,"div",10),s.ac(10,"div",11),s.ac(11,"div",12),s.ac(12,"div",13),s.Yc(13," \xa0 "),s.Zb(),s.Zb(),s.ac(14,"div",14),s.ac(15,"h4",15),s.Wc(16,f,2,0,"span",16),s.Wc(17,g,2,0,"span",16),s.Zb(),s.Wc(18,C,43,4,"div",17),s.Wc(19,Z,45,20,"div",18),s.Zb(),s.ac(20,"div",19),s.Wc(21,P,7,3,"div",20),s.Wc(22,w,19,4,"div",21),s.Wc(23,z,7,5,"div",22),s.Wc(24,U,7,5,"div",22),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()),2&t){var n=s.qc();s.Eb(7),s.ad("Suivis ticket No ",n.ticket.numero,""),s.Eb(9),s.xc("ngIf",1==n.currentContainer),s.Eb(1),s.xc("ngIf",2==n.currentContainer),s.Eb(1),s.xc("ngIf",1==n.currentContainer),s.Eb(1),s.xc("ngIf",2==n.currentContainer),s.Eb(2),s.xc("ngIf",2==n.currentContainer&&(n.wantClose||n.ticket.closed)),s.Eb(1),s.xc("ngIf",1==n.currentContainer),s.Eb(1),s.xc("ngIf",2==n.currentContainer&&!n.ticket.closed&&(n.isAuteur||n.isSuperAdmin)),s.Eb(1),s.xc("ngIf",2==n.currentContainer&&n.isSuperAdmin&&!n.ticket.closed&&3!=n.ticket.status)}}var j,A=((j=function(){function t(e,n,o){_classCallCheck(this,t),this.route=e,this.supportService=n,this.securityService=o,this.loading=!1,this.currentContainer=1,this.niveauSatisfactions=[1,2,3,4,5],this.wantClose=!1,this.goToNextStep=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.ticket=null,this.securityService.showLoadingIndicatior.next(!0),this.isSuperAdmin=this.securityService.SupAdmin,this.isAuteur=!1,this.wantClose=!1,this.supportService.get(this.route.snapshot.params.id).subscribe((function(e){e&&e.id&&(t.ticket=e,t.niveauSatisfaction=+t.ticket.satisfaction,t.isAuteur=t.ticket.auteur.username===localStorage.getItem("username")),t.securityService.showLoadingIndicatior.next(!1),setTimeout((function(){t.createProgressBar()}),1e3),console.log(e)}))}},{key:"getTicketStatus",value:function(t){return this.supportService.getTicketStatus(t)}},{key:"closeTicket",value:function(){var t=this;this.ticket.status=3,this.ticket.closed=!0,this.ticket.satisfaction=this.niveauSatisfaction,this.supportService.update(this.ticket.id,this.ticket).subscribe((function(e){console.log(e),t.ticket=e,t.wantClose=!1}))}},{key:"nextStep",value:function(){var t=this,e=+this.ticket.status;e<3&&(this.ticket.status=e+1,console.log(e,this.ticket)),this.supportService.update(this.ticket.id,this.ticket).subscribe((function(e){console.log(e),t.ticket=e,t.goToNextStep=!1}))}},{key:"createProgressBar",value:function(){var t,e=document.querySelector("#container-progegress-bar");if(e){console.log(e);var n=(t=e.clientHeight>e.clientWidth?e.clientWidth:e.clientHeight)-10,o=t,i=(e.clientWidth-e.clientHeight)/2;document.getElementById("circle").style.width=n+"px",document.getElementById("circle").style.height=n+"px",e.style.paddingLeft=i+"px",document.getElementById("border").style.width=o+"px",document.getElementById("border").style.height=o+"px";var c=180*Number(2)/Number(5);document.getElementById("border").style.background="-webkit-linear-gradient("+c+"deg, #9a9a9a 50%, #00a651 50%)";var a=180-c;document.getElementById("needle").style.webkitTransform="rotate("+a+"deg)",e.style.visibility="visible"}else console.log("Progress bar could not be found")}}]),t}()).\u0275fac=function(t){return new(t||j)(s.Ub(c.a),s.Ub(d),s.Ub(a.a))},j.\u0275cmp=s.Ob({type:j,selectors:[["app-infos-support"]],decls:2,vars:1,consts:[[1,"content"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"card-header"],[1,"bg-header"],[1,"card-body"],[1,"card-title","text-center","mb-5"],[4,"ngIf"],["class","container-infos",4,"ngIf"],["class","container-progressions",4,"ngIf"],[1,"card-footer"],["class","row band-orange mb-5",4,"ngIf"],["class","row band-gray",4,"ngIf"],["class","row band-gray mt-5",4,"ngIf"],[1,"container-infos"],[1,"col-md-9"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"col-md-3","my-auto"],[1,"col-md-5","mb-0"],["appearance","outline"],["matInput","","id","type","readonly","",3,"value"],["matInput","","id","objet","readonly","",3,"value"],[1,"col-md-9","mb-0"],["matInput","","id","description","readonly","","rows","8"],[1,"col-md-9","ml-auto"],[1,"btn","btn-orange",3,"click"],[1,"col-md-3"],["class","row",4,"ngIf"],["id","container-progegress-bar",2,"visibility","hidden"],["id","border",1,"active-border"],["id","circle",1,"circle"],["id","needle",1,"needle"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],["alt","",1,"img-thumbnail",3,"src"],[1,"container-progressions"],[1,"col-md-12"],[1,"mdl-card","mdl-shadow--2dp"],[1,"mdl-card__supporting-text"],[1,"mdl-stepper-horizontal-alternative"],[1,"mdl-stepper-step",3,"ngClass"],[1,"mdl-stepper-title"],[1,"mdl-stepper-arrow-left"],[1,"mdl-stepper-arrow"],[1,"mdl-stepper-arrow-right"],[1,"row","band-orange","mb-5"],[1,"col-md-4","my-auto"],[1,"col-md-8"],[1,"satisfaction-notation","d-flex","justify-content-between","legend"],[4,"ngFor","ngForOf"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"ngModel","ngModelChange"],[1,"example-radio-button",3,"value","disabled"],[1,"row","band-gray"],[1,"card-info","bg-red"],[1,"card-info","bg-orange"],["class","col-md-3 my-auto",4,"ngIf"],[1,"col-md-3","ml-auto","my-auto"],[1,"legend-card"],[1,"card-info","bg-gray"],[1,"row","band-gray","mt-5"],[1,"col-md-12","text-right","div-close"],["class","mr-5",4,"ngIf"],["type","button","class","btn btn-lg btn-orange-gradient mr-3",3,"click",4,"ngIf"],["type","button","class","btn btn-lg btn-secondary",4,"ngIf"],["type","button","class","btn btn-lg btn-success mr-3",3,"click",4,"ngIf"],["type","button","class","btn btn-lg btn-secondary",3,"click",4,"ngIf"],[1,"mr-5"],["type","button",1,"btn","btn-lg","btn-orange-gradient","mr-3",3,"click"],["type","button",1,"btn","btn-lg","btn-secondary"],["type","button",1,"btn","btn-lg","btn-success","mr-3",3,"click"],["type","button",1,"btn","btn-lg","btn-secondary",3,"click"]],template:function(t,e){1&t&&(s.ac(0,"section",0),s.Wc(1,F,25,9,"div",1),s.Zb()),2&t&&(s.Eb(1),s.xc("ngIf",e.ticket))},directives:[i.n,b.g,b.c,u.b,i.m,i.l,p.b,m.o,m.r,p.a],styles:['.container-infos[_ngcontent-%COMP%]{margin-left:8%;margin-right:8%}.mdl-card[_ngcontent-%COMP%]{width:100%;min-height:0;margin:10px auto}.mdl-card__supporting-text[_ngcontent-%COMP%]{width:100%;padding:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]{width:100%}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;justify-content:space-between}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]{display:table-cell;padding:24px 10px;position:relative}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:active{border-radius:15%/75%}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:first-child:active{border-top-left-radius:0;border-bottom-left-radius:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:last-child:active{border-top-right-radius:0;border-bottom-right-radius:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:hover   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#757575}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:hover   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#757575}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{width:75%;height:50px;margin:0 auto;background-color:#9e9e9e;text-align:center;line-height:2em;font-size:24px;color:#fff}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-left[_ngcontent-%COMP%]{width:0;height:0;position:absolute;top:61px;left:15%;border-top:25px solid transparent;border-left:50px solid #fff;border-bottom:25px solid transparent;z-index:1}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{width:0;height:0;position:absolute;top:61px;right:-1.5%;border-top:25px solid transparent;border-left:50px solid #9e9e9e;border-bottom:25px solid transparent;z-index:1}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#2196f3}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#2196f3}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#28a745}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#28a745}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-circle[_ngcontent-%COMP%]:before{content:"\\2714"}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-arrow*[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow*[_ngcontent-%COMP%]{display:none}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-circle[_ngcontent-%COMP%]:before{content:"\\270E"}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;font-weight:400}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{text-align:center;color:rgba(0,0,0,.26)}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{font-weight:500;color:rgba(0,0,0,.87)}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{font-weight:300}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%]{font-size:12px}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}  .legend{max-width:285px;position:relative}  .legend:before{content:"Insatisfait";left:-88px}  .legend:after{content:"Satisfait";right:-88px}  .legend:after,   .legend:before{position:absolute;bottom:10px;font-size:16px;top:18px}  .legend li{position:relative}  .legend li .mat-radio-label-content{position:absolute;top:-2px;left:2px;color:#fff;font-size:1.3rem}  .legend li .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle,   .legend li .mat-radio-outer-circle{border-color:#fff}  .legend li .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#fff}.mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:1em 0;padding-bottom:0;border:0;outline:0}  .mat-form-field-appearance-outline .mat-form-field-outline{background:#ededed;border-radius:30px}  .mat-form-field-appearance-outline .mat-form-field-outline-end,   .mat-form-field-appearance-outline .mat-form-field-outline-start{border:0}  input:-webkit-autofill{box-shadow:inset 0 0 0 50px #ededed}  .mat-error{margin-top:15px;font-size:14px}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:0;padding:.75rem;border-radius:15px}.card-header[_ngcontent-%COMP%]   .bg-header[_ngcontent-%COMP%]{width:100%;height:60px;margin:auto;background:radial-gradient(#ef7711,#774007)}.card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:0;border-radius:15px}.container-infos[_ngcontent-%COMP%]{width:95%;margin-left:auto;margin-right:auto}.btn-submit[_ngcontent-%COMP%]{font-size:1.2rem!important;padding:.5rem 2rem .5rem 5rem;border-radius:10px}.btn-submit[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]:hover{color:#fff;background:radial-gradient(#ef7711,#774007);border-color:#774007}.btn-upload[_ngcontent-%COMP%]{font-size:1.2rem;color:#616160;margin-right:7rem!important}.band-gray[_ngcontent-%COMP%]{background:radial-gradient(#d8d8d8,#cbcbcb)}.band-gray[_ngcontent-%COMP%], .band-orange[_ngcontent-%COMP%]{padding-top:1.4rem;padding-bottom:1.4rem;margin-bottom:1rem!important}.band-orange[_ngcontent-%COMP%]{background:radial-gradient(#ef7711,#774007);color:#fff}.band-orange[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem}.card-info[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px;color:#fff}.card-info.bg-red[_ngcontent-%COMP%]{background:red}.card-info.bg-gray[_ngcontent-%COMP%]{background:grey}.card-info.bg-orange[_ngcontent-%COMP%]{background:#ef7711}.legend-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.legend-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{padding:0;width:60px;border-radius:2px;display:inline-block}.div-close[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 30px;font-size:1.3rem}.div-close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem}.satisfaction-notation[_ngcontent-%COMP%]{margin-left:5rem!important}']}),j),N=n("jiEm"),B=n("NFeN"),X=n("+0xr");function H(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," No ticket "),s.Zb())}var R=function(t){return["/supports/infos",t]};function K(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.numero," ")}}function $(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Date de cr\xe9ation "),s.Zb())}function J(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.rc(2,"date"),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(5,R,n.id)),s.Eb(1),s.ad(" ",s.tc(2,2,n.startDate,"dd/M/yy, HH:mm")," ")}}function G(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Type de ticket "),s.Zb())}function Q(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.type," ")}}function tt(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Sujet trait\xe9 "),s.Zb())}function et(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.objet," ")}}function nt(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Entit\xe9s "),s.Zb())}function ot(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.entreprise.denomination," ")}}function it(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Initiateur "),s.Zb())}function ct(t,e){if(1&t&&(s.ac(0,"td",41),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.auteur?n.auteur.username:""," ")}}function at(t,e){1&t&&(s.ac(0,"th",42),s.Yc(1," Support Team "),s.Zb())}function rt(t,e){if(1&t&&(s.ac(0,"td",43),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.xc("routerLink",s.Bc(2,R,n.id)),s.Eb(1),s.ad(" ",n.assigne?n.assigne.nom:"-"," ")}}function st(t,e){1&t&&(s.ac(0,"th",40),s.Yc(1," Statut "),s.Zb())}function lt(t,e){if(1&t&&s.Vb(0,"td",44),2&t){var n=e.$implicit,o=s.qc();s.xc("routerLink",s.Bc(2,R,n.id))("innerHTML",o.getTicketStatus(n),s.Pc)}}function dt(t,e){1&t&&s.Vb(0,"tr",45)}function bt(t,e){1&t&&s.Vb(0,"tr",46)}var ut,pt=function(){return["/supports/new"]},mt=((ut=function(){function t(e,n,o){_classCallCheck(this,t),this.supportService=e,this.adminService=n,this.securityService=o,this.displayedColumns=["numero","startDate","type","objet","entreprise","auteur","status"],this.inventaires=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.tickets=[],this.isSuperAdmin=this.securityService.SupAdmin,this.isSuperAdmin&&this.displayedColumns.push("assigne"),this.idUser=localStorage.getItem("idUser"),this.getTickets()}},{key:"getTickets",value:function(){var t=this;this.isSuperAdmin?this.supportService.lists().subscribe((function(e){t.tickets=null==e?void 0:e.reverse()})):this.adminService.getClients().then((function(e){t.supportService.lists(e[0].cle).subscribe((function(e){t.tickets=null==e?void 0:e.reverse()}))}))}},{key:"filterDatatable",value:function(t){console.log(t)}},{key:"getTicketStatus",value:function(t){return this.supportService.getTicketStatus(t)}}]),t}()).\u0275fac=function(t){return new(t||ut)(s.Ub(d),s.Ub(N.a),s.Ub(a.a))},ut.\u0275cmp=s.Ob({type:ut,selectors:[["app-list-supports"]],decls:57,vars:7,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"col-sm-12"],[1,"ngxTableHeader","pl-0","pb-0"],[1,"header-buttons-left","ml-0"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Rechercher un ticket","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"header-buttons","m-r-20"],[1,"icon-button-demo"],[1,"font-weight-bold","text-white","pointer","mr-3",3,"routerLink"],["title","AJouter un ticket",1,"btn","btn-orange","btn-40-rounded","pt-0","pb-0","mr-4",3,"routerLink"],[1,"col-white"],["mat-table","",1,"mat-elevation-z8","table-striped",3,"dataSource"],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","type"],["matColumnDef","objet"],["matColumnDef","entreprise"],["matColumnDef","auteur"],["matColumnDef","assigne"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",3,"routerLink",4,"matCellDef"],["matColumnDef","status"],["mat-cell","",3,"routerLink","innerHTML",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","ele-ticket","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"routerLink"],["mat-header-cell","",1,"text-center"],["mat-cell","",2,"text-align","center",3,"routerLink"],["mat-cell","",3,"routerLink","innerHTML"],["mat-header-row",""],["mat-row","",1,"ele-ticket"]],template:function(t,e){1&t&&(s.ac(0,"section",0),s.ac(1,"div",1),s.ac(2,"div",2),s.ac(3,"div",3),s.ac(4,"div",4),s.ac(5,"ul",5),s.ac(6,"li",6),s.ac(7,"h4",7),s.Yc(8,"Liste des tickets"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(9,"div",8),s.ac(10,"div",9),s.ac(11,"div",10),s.ac(12,"div",11),s.ac(13,"div",3),s.ac(14,"div",12),s.ac(15,"div",13),s.ac(16,"ul",14),s.ac(17,"li",15),s.ac(18,"label",16),s.ac(19,"i",17),s.Yc(20,"search"),s.Zb(),s.Zb(),s.ac(21,"input",18),s.mc("keyup",(function(t){return e.filterDatatable(t.target.value)})),s.Zb(),s.Zb(),s.Zb(),s.ac(22,"ul",19),s.ac(23,"li"),s.ac(24,"div",20),s.ac(25,"span",21),s.Yc(26,"Ajouter un ticket"),s.Zb(),s.ac(27,"button",22),s.ac(28,"mat-icon",23),s.Yc(29,"add"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(30,"table",24),s.Yb(31,25),s.Wc(32,H,2,0,"th",26),s.Wc(33,K,2,4,"td",27),s.Xb(),s.Yb(34,28),s.Wc(35,$,2,0,"th",26),s.Wc(36,J,3,7,"td",27),s.Xb(),s.Yb(37,29),s.Wc(38,G,2,0,"th",26),s.Wc(39,Q,2,4,"td",27),s.Xb(),s.Yb(40,30),s.Wc(41,tt,2,0,"th",26),s.Wc(42,et,2,4,"td",27),s.Xb(),s.Yb(43,31),s.Wc(44,nt,2,0,"th",26),s.Wc(45,ot,2,4,"td",27),s.Xb(),s.Yb(46,32),s.Wc(47,it,2,0,"th",26),s.Wc(48,ct,2,4,"td",27),s.Xb(),s.Yb(49,33),s.Wc(50,at,2,0,"th",34),s.Wc(51,rt,2,4,"td",35),s.Xb(),s.Yb(52,36),s.Wc(53,st,2,0,"th",26),s.Wc(54,lt,1,4,"td",37),s.Xb(),s.Wc(55,dt,1,0,"tr",38),s.Wc(56,bt,1,0,"tr",39),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()),2&t&&(s.Eb(25),s.xc("routerLink",s.Ac(5,pt)),s.Eb(2),s.xc("routerLink",s.Ac(6,pt)),s.Eb(3),s.xc("dataSource",e.tickets),s.Eb(25),s.xc("matHeaderRowDef",e.displayedColumns),s.Eb(1),s.xc("matRowDefColumns",e.displayedColumns))},directives:[c.e,B.a,X.j,X.c,X.e,X.b,X.g,X.i,X.d,X.a,X.f,X.h],pipes:[i.e],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]{z-index:1;-webkit-transition:all .4s ease-in-out;-moz-transition:all .4s ease-in-out;-o-transition:all .4s ease-in-out;-ms-transition:all .4s ease-in-out}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]:hover{background:#ef7711;cursor:pointer;z-index:10;box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.02);transform:scale(1.01)}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{color:#fff}  .badge-warning{background:#ef7711!important;color:#fff!important}"]}),ut),ft=n("d3UM"),gt=n("FKr1"),vt=["fileUpload"];function ht(t,e){if(1&t&&(s.ac(0,"mat-option",39),s.Yc(1),s.Zb()),2&t){var n=e.$implicit;s.yc("value",n),s.Eb(1),s.Zc(n)}}function Ct(t,e){1&t&&(s.ac(0,"mat-error"),s.Yc(1,"Le type de ticket est requise"),s.Zb())}function kt(t,e){1&t&&(s.ac(0,"mat-error"),s.Yc(1,"L'objet du ticket est requise"),s.Zb())}function Zt(t,e){1&t&&(s.ac(0,"mat-error"),s.Yc(1,"Une description du ticket est requise"),s.Zb())}function Ot(t,e){if(1&t&&(s.ac(0,"div",41),s.Vb(1,"img",42),s.Zb()),2&t){var n=e.$implicit;s.Eb(1),s.xc("src",n,s.Rc)}}function xt(t,e){if(1&t&&(s.ac(0,"div",3),s.Wc(1,Ot,2,1,"div",40),s.Zb()),2&t){var n=s.qc();s.Eb(1),s.xc("ngForOf",n.files)}}var _t,Pt,Mt,yt=[{path:"",redirectTo:"/supports/lists",pathMatch:"full"},{path:"lists",component:mt},{path:"new",component:(_t=function(){function t(e,n,o,i){_classCallCheck(this,t),this.formBuilder=e,this.supportService=n,this.adminService=o,this.router=i,this.submitted=!1,this.files=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.ticketTypes=["Phase pr\xe9paratoire","Phase m\xe9thodologique et de planification","Phase de r\xe9alisation des travaux de comptage et de traitement des donn\xe9es","Phase d\u2019ajustement du fichier des immobilisations","Autres"],this.buildForm()}},{key:"saveTicket",value:function(){var t=this;if(this.submitted=!0,this.isLoading=!0,!this.ticketForm.invalid){var e=this.ticketForm.value;this.adminService.getOneEntreprise(localStorage.getItem("currentEse")).then((function(n){n&&n.id&&t.adminService.getClients().then((function(o){e.licence=o[0].cle,e.client={id:o[0].id,denomination:o[0].denomination,nomContact:o[0].nomContact,telContact:o[0].telContact},e.piecesJointes=t.files,e.auteur={id:localStorage.getItem("idUser"),username:localStorage.getItem("username"),roles:localStorage.getItem("roles")},e.entreprise={id:n.id,denomination:n.denomination},console.log(e),t.supportService.create(e).subscribe((function(e){e&&e.id&&t.router.navigate(["/supports/lists"])}))}))}))}}},{key:"buildForm",value:function(){this.ticketForm=this.formBuilder.group({type:["",m.x.required],objet:["",m.x.required],description:["",m.x.required]})}},{key:"onClick",value:function(){this.fileUpload.nativeElement.click()}},{key:"changeListener",value:function(){var t=this,e=this.fileUpload.nativeElement.files;this.files=[];for(var n=function(n){var o=new FileReader;o.onloadend=function(e){t.files.push(o.result)},o.readAsDataURL(e[n])},o=0;o<e.length;o++)n(o)}},{key:"f",get:function(){return this.ticketForm.controls}}]),t}(),_t.\u0275fac=function(t){return new(t||_t)(s.Ub(m.e),s.Ub(d),s.Ub(N.a),s.Ub(c.d))},_t.\u0275cmp=s.Ob({type:_t,selectors:[["app-new-support"]],viewQuery:function(t,e){var n;1&t&&s.dd(vt,!0),2&t&&s.Jc(n=s.nc())&&(e.fileUpload=n.first)},decls:69,vars:7,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],["id","ticketForm",3,"formGroup","ngSubmit"],[1,"card-header"],[1,"bg-header"],[1,"card-body"],[1,"card-title","text-center","mb-5"],[1,"container-form"],[1,"col-md-9"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"col-md-3","my-auto"],[1,"col-md-5","mb-0"],["appearance","outline"],["id","type","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","id","objet","formControlName","objet"],[1,"text-muted"],[1,"col-md-9","mb-0"],["matInput","","id","description","formControlName","description","rows","8"],[1,"col-md-3"],["class","row",4,"ngIf"],[1,"card-footer"],[1,"row","band-gray"],[1,"col-md-7","mx-auto"],["type","submit","click","",1,"btn","btn-submit","btn-border-radius","mr-3",3,"disabled"],["aria-hidden","true",1,"fas","fa-chevron-right","ml-5"],[1,"pointer","btn-upload","float-right",3,"click"],["type","file","id","fileUpload","multiple","multiple",2,"display","none",3,"change"],["fileUpload",""],[3,"value"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],["alt","",1,"img-thumbnail",3,"src"]],template:function(t,e){1&t&&(s.ac(0,"section",0),s.ac(1,"div",1),s.ac(2,"div",2),s.ac(3,"div",3),s.ac(4,"div",4),s.ac(5,"ul",5),s.ac(6,"li",6),s.ac(7,"h4",7),s.Yc(8,"Ouvrir un ticket"),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(9,"div",8),s.ac(10,"div",9),s.ac(11,"div",10),s.ac(12,"form",11),s.mc("ngSubmit",(function(){return e.saveTicket()})),s.ac(13,"div",12),s.ac(14,"div",13),s.Yc(15," \xa0 "),s.Zb(),s.Zb(),s.ac(16,"div",14),s.ac(17,"h4",15),s.Yc(18,"Ouvrir un ticket"),s.Zb(),s.ac(19,"div",16),s.ac(20,"div",3),s.ac(21,"div",17),s.ac(22,"div",3),s.ac(23,"div",18),s.ac(24,"div",3),s.ac(25,"div",19),s.ac(26,"mat-label"),s.Yc(27,"Type de tickets *"),s.Zb(),s.Zb(),s.ac(28,"div",20),s.ac(29,"mat-form-field",21),s.ac(30,"mat-select",22),s.Wc(31,ht,2,2,"mat-option",23),s.Zb(),s.Wc(32,Ct,2,0,"mat-error",24),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(33,"div",3),s.ac(34,"div",18),s.ac(35,"div",3),s.ac(36,"div",19),s.ac(37,"mat-label"),s.Yc(38,"Objet *"),s.Zb(),s.Zb(),s.ac(39,"div",20),s.ac(40,"mat-form-field",21),s.Vb(41,"input",25),s.Wc(42,kt,2,0,"mat-error",24),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(43,"div",3),s.ac(44,"div",18),s.ac(45,"div",3),s.ac(46,"div",19),s.ac(47,"mat-label"),s.Yc(48,"Description *"),s.Zb(),s.ac(49,"p",26),s.Yc(50," Faire une description sommaire du probl\xe8me rencontr\xe9. "),s.Zb(),s.Zb(),s.ac(51,"div",27),s.ac(52,"mat-form-field",21),s.Vb(53,"textarea",28),s.Wc(54,Zt,2,0,"mat-error",24),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(55,"div",29),s.Wc(56,xt,2,1,"div",30),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.ac(57,"div",31),s.ac(58,"div",32),s.ac(59,"div",33),s.ac(60,"button",34),s.Yc(61,"Envoyer "),s.Vb(62,"i",35),s.Zb(),s.ac(63,"span",36),s.mc("click",(function(){return e.onClick()})),s.ac(64,"mat-icon"),s.Yc(65,"file_upload"),s.Zb(),s.Yc(66," Attacher une capture "),s.Zb(),s.ac(67,"input",37,38),s.mc("change",(function(){return e.changeListener()})),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb()),2&t&&(s.Eb(12),s.xc("formGroup",e.ticketForm),s.Eb(19),s.xc("ngForOf",e.ticketTypes),s.Eb(1),s.xc("ngIf",e.f.type.errors),s.Eb(10),s.xc("ngIf",e.f.objet.errors),s.Eb(12),s.xc("ngIf",e.f.description.errors),s.Eb(2),s.xc("ngIf",e.files.length>0),s.Eb(4),s.xc("disabled",e.ticketForm.invalid))},directives:[m.z,m.p,m.j,b.g,b.c,ft.a,m.o,m.h,i.m,i.n,u.b,m.b,B.a,gt.o,b.b],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:1em 0;padding-bottom:0;border:0;outline:0}  .mat-form-field-appearance-outline .mat-form-field-outline{background:#ededed;border-radius:30px}  .mat-form-field-appearance-outline .mat-form-field-outline-end,   .mat-form-field-appearance-outline .mat-form-field-outline-start{border:0}  input:-webkit-autofill{box-shadow:inset 0 0 0 50px #ededed}  .mat-error{margin-top:15px;font-size:14px}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:0;padding:.75rem;border-radius:15px}.card-header[_ngcontent-%COMP%]   .bg-header[_ngcontent-%COMP%]{width:100%;height:70px;margin:auto;background:radial-gradient(#ef7711,#774007)}.card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:0;border-radius:15px}.container-form[_ngcontent-%COMP%]{width:95%;margin-left:auto;margin-right:auto}.btn-submit[_ngcontent-%COMP%]{font-size:1.2rem!important;padding:.5rem 2rem .5rem 5rem;border-radius:10px}.btn-submit[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]:hover{color:#fff;background:radial-gradient(#ef7711,#774007);border-color:#774007}.btn-upload[_ngcontent-%COMP%]{font-size:1.2rem;color:#616160;margin-right:7rem!important}.band-gray[_ngcontent-%COMP%]{background:radial-gradient(#d8d8d8,#cbcbcb);padding-top:1.4rem;padding-bottom:1.4rem;margin-bottom:1rem!important}"]}),_t)},{path:"infos/:id",component:A}],wt=((Pt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Sb({type:Pt}),Pt.\u0275inj=s.Rb({factory:function(t){return new(t||Pt)},imports:[[c.h.forChild(yt)],c.h]}),Pt),It=n("bTqV"),Et=n("TU8p"),St=n("A5z7"),Yt=n("/1cH"),Wt=n("2ChS"),zt=n("MutI"),Tt=n("XhcP"),qt=n("dNgK"),Lt=n("7EHt"),Vt=n("iadO"),Dt=n("Wp6s"),Ut=n("Xa2L"),Ft=n("bv9b"),jt=n("5RNC"),At=n("wZkO"),Nt=n("bSwM"),Bt=n("AGJ6"),Xt=n("M9IT"),Ht=n("0IaG"),Rt=n("Dh3D"),Kt=n("/t3+"),$t=n("7ZcW"),Jt=n("STbY"),Gt=n("lDzL"),Qt=n("Kdsb"),te=n("xHqg"),ee=((Mt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Sb({type:Mt}),Mt.\u0275inj=s.Rb({factory:function(t){return new(t||Mt)},imports:[[i.c,wt,i.c,m.k,m.u,Qt.c,It.c,B.b,b.e,u.c,Et.b,St.e,Yt.b,Wt.b,zt.c,Tt.a,qt.b,Lt.b,Vt.c,Dt.g,Ut.a,Ft.b,jt.a,At.d,Bt.b,Nt.b,i.c,i.c,m.k,m.u,Gt.g,qt.b,X.l,Xt.b,p.c,ft.b,Ht.f,Rt.c,Kt.a,$t.b,Jt.c,Gt.g,te.d]]}),Mt)}}]);