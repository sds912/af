(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{AGJ6:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return v}));var o=n("fXoL"),i=n("ofXK"),c=n("bTqV"),a=n("bv9b"),r=n("Xa2L"),s=n("FKr1"),l=n("NFeN");function d(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",4),o.Yc(2),o.Zb(),o.Xb()),2&t){const t=o.qc();o.Eb(1),o.Kb("is-mat-icon",!t.options.buttonIcon.fontSet)("active",t.options.active&&!t.options.disabled),o.xc("ngClass",t.options.buttonIcon.customClass)("fontSet",t.options.buttonIcon.fontSet)("fontIcon",t.options.buttonIcon.fontIcon)("color",t.options.buttonIcon.color)("svgIcon",t.options.buttonIcon.svgIcon)("inline",t.options.buttonIcon.inline),o.Eb(1),o.ad(" ",t.options.buttonIcon.fontSet?"":t.options.buttonIcon.fontIcon," ")}}function b(t,e){if(1&t&&(o.ac(0,"span",5),o.Yc(1),o.Zb()),2&t){const t=o.qc();o.Kb("active",t.options.active&&!t.options.disabled),o.Eb(1),o.ad(" ",t.options.text," ")}}function p(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",6),o.Yc(2),o.Zb(),o.Xb()),2&t){const t=o.qc();o.Eb(1),o.xc("fontSet",t.options.icon.fontSet)("fontIcon",t.options.icon.fontIcon)("color",t.options.icon.color)("svgIcon",t.options.icon.svgIcon)("inline",t.options.icon.inline),o.Eb(1),o.ad(" ",t.options.icon.fontSet?"":t.options.icon.fontIcon," ")}}function u(t,e){if(1&t&&o.Vb(0,"mat-spinner",7),2&t){const t=o.qc();o.Kb("active",t.options.active&&!t.options.disabled),o.xc("diameter",t.options.fab?58:t.options.spinnerSize)("color",t.options.spinnerColor)("mode",t.options.mode)("value",t.options.value)}}function m(t,e){if(1&t&&(o.Yb(0),o.ac(1,"mat-icon",3),o.Yc(2),o.Zb(),o.Xb()),2&t){const t=o.qc();o.Eb(1),o.Kb("is-mat-icon",!t.options.buttonIcon.fontSet),o.xc("ngClass",t.options.buttonIcon.customClass)("fontSet",t.options.buttonIcon.fontSet)("fontIcon",t.options.buttonIcon.fontIcon)("color",t.options.buttonIcon.color)("svgIcon",t.options.buttonIcon.svgIcon)("inline",t.options.buttonIcon.inline),o.Eb(1),o.ad(" ",t.options.buttonIcon.fontSet?"":t.options.buttonIcon.fontIcon," ")}}function g(t,e){if(1&t&&o.Vb(0,"mat-progress-bar",4),2&t){const t=o.qc();o.xc("color",t.options.barColor)("mode",t.options.mode)("value",t.options.value)}}let f=(()=>{class t{constructor(){this.btnClick=new o.o}onClick(t){this.options.disabled||this.options.active||this.btnClick.emit(t)}ngOnChanges(t){t.active&&(this.options.active=t.active.currentValue),t.disabled&&(this.options.disabled=t.disabled.currentValue)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ob({type:t,selectors:[["mat-spinner-button"]],hostBindings:function(t,e){1&t&&o.mc("click",(function(t){return e.onClick(t)}))},inputs:{options:"options",active:"active",disabled:"disabled"},outputs:{btnClick:"btnClick"},features:[o.Cb],decls:5,vars:20,consts:[["mat-button","",3,"type","color","ngClass","disabled"],[4,"ngIf"],["class","button-text",3,"active",4,"ngIf"],["class","spinner",3,"diameter","color","mode","value","active",4,"ngIf"],[1,"mat-button-icon",3,"ngClass","fontSet","fontIcon","color","svgIcon","inline"],[1,"button-text"],[3,"fontSet","fontIcon","color","svgIcon","inline"],[1,"spinner",3,"diameter","color","mode","value"]],template:function(t,e){1&t&&(o.ac(0,"button",0),o.Wc(1,d,3,11,"ng-container",1),o.Wc(2,b,2,3,"span",2),o.Wc(3,p,3,6,"ng-container",1),o.Wc(4,u,1,6,"mat-spinner",3),o.Zb()),2&t&&(o.Kb("active",e.options.active)("fullWidth",e.options.fullWidth)("mat-raised-button",e.options.raised)("mat-stroked-button",e.options.stroked)("mat-flat-button",e.options.flat)("mat-fab",e.options.fab),o.xc("type",e.options.type)("color",e.options.buttonColor)("ngClass",e.options.customClass)("disabled",e.options.active||e.options.disabled),o.Eb(1),o.xc("ngIf",e.options.buttonIcon),o.Eb(1),o.xc("ngIf",!e.options.fab),o.Eb(1),o.xc("ngIf",e.options.fab&&e.options.icon),o.Eb(1),o.xc("ngIf",e.options.active&&!e.options.disabled))},directives:[c.b,i.l,i.n,l.a,r.b],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{outline:none}[_nghost-%COMP%]   button.active[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   button[_ngcontent-%COMP%]  .mat-button-wrapper{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   button.fullWidth[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   button.mat-fab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-top:-15px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:25%;opacity:0;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .spinner.active[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .button-text.active[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon[_ngcontent-%COMP%]{padding-right:5px;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon.is-mat-icon[_ngcontent-%COMP%]{font-size:18px;position:relative;top:3px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.mat-button-icon.active[_ngcontent-%COMP%]{opacity:0}"]}),t})(),h=(()=>{class t{constructor(){this.btnClick=new o.o}onClick(t){this.options.disabled||this.options.active||this.btnClick.emit(t)}ngOnChanges(t){t.active&&(this.options.active=t.active.currentValue),t.disabled&&(this.options.disabled=t.disabled.currentValue)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ob({type:t,selectors:[["mat-bar-button"]],hostBindings:function(t,e){1&t&&o.mc("click",(function(t){return e.onClick(t)}))},inputs:{options:"options",active:"active",disabled:"disabled"},outputs:{btnClick:"btnClick"},features:[o.Cb],decls:5,vars:17,consts:[["mat-button","",3,"type","color","ngClass","disabled"],[4,"ngIf"],["class","bar",3,"color","mode","value",4,"ngIf"],[3,"ngClass","fontSet","fontIcon","color","svgIcon","inline"],[1,"bar",3,"color","mode","value"]],template:function(t,e){1&t&&(o.ac(0,"button",0),o.Wc(1,m,3,9,"ng-container",1),o.ac(2,"span"),o.Yc(3),o.Zb(),o.Wc(4,g,1,3,"mat-progress-bar",2),o.Zb()),2&t&&(o.Kb("active",e.options.active)("mat-raised-button",e.options.raised)("mat-stroked-button",e.options.stroked)("mat-flat-button",e.options.flat)("fullWidth",e.options.fullWidth),o.xc("type",e.options.type)("color",e.options.buttonColor)("ngClass",e.options.customClass)("disabled",e.options.active||e.options.disabled),o.Eb(1),o.xc("ngIf",e.options.buttonIcon),o.Eb(2),o.Zc(e.options.text),o.Eb(1),o.xc("ngIf",e.options.active&&!e.options.disabled))},directives:[c.b,i.l,i.n,l.a,a.a],styles:["[_nghost-%COMP%]   button.active[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   button.fullWidth[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-right:5px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.is-mat-icon[_ngcontent-%COMP%]{font-size:18px;position:relative;top:3px}"]}),t})(),v=(()=>{class t{static forRoot(){return{ngModule:t}}}return t.\u0275mod=o.Sb({type:t}),t.\u0275inj=o.Rb({factory:function(e){return new(e||t)},imports:[[i.c,c.c,a.b,r.a,s.u,l.b]]}),t})()},JPjI:function(t,e,n){"use strict";n.r(e),n.d(e,"SupportsModule",(function(){return $t}));var o=n("ofXK"),i=n("tyNb"),c=n("/8Pk"),a=n("AytR"),r=n("fXoL"),s=n("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.apiUrl=a.a.apiSupportUrl+"/api/supports"}create(t){return this.http.post(""+this.apiUrl,t)}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}get(t){return this.http.get(`${this.apiUrl}/${t}`)}lists(t){let e=""+this.apiUrl;return t&&(e+="?licence="+t),this.http.get(e)}getTicketStatus(t){if(!0===t.closed)return'<span class="badge badge-success">Cl\xf4tur\xe9</span>';let e="";switch(t.status){case 1:e='<span class="badge badge-secondary">Pris en charge</span>';break;case 2:e='<span class="badge badge-info">En traitement</span>';break;case 3:e='<span class="badge badge-success">Trait\xe9</span>';break;default:e='<span class="badge badge-warning">Ouvert</span>'}return e}}return t.\u0275fac=function(e){return new(e||t)(r.ic(s.b))},t.\u0275prov=r.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n("kmnG"),b=n("qFsG"),p=n("QibW"),u=n("3Pt+");function m(t,e){1&t&&(r.ac(0,"span"),r.Yc(1,"D\xe9tail du ticket"),r.Zb())}function g(t,e){1&t&&(r.ac(0,"span"),r.Yc(1,"Progression"),r.Zb())}function f(t,e){if(1&t&&(r.ac(0,"div",42),r.Vb(1,"img",43),r.Zb()),2&t){const t=e.$implicit;r.Eb(1),r.xc("src",t,r.Rc)}}function h(t,e){if(1&t&&(r.ac(0,"div",4),r.Wc(1,f,2,1,"div",41),r.Zb()),2&t){const t=r.qc(3);r.Eb(1),r.xc("ngForOf",t.ticket.piecesJointes)}}function v(t,e){if(1&t){const t=r.bc();r.ac(0,"div",23),r.ac(1,"div",4),r.ac(2,"div",24),r.ac(3,"div",4),r.ac(4,"div",25),r.ac(5,"div",4),r.ac(6,"div",26),r.ac(7,"mat-label"),r.Yc(8,"Type de ticket"),r.Zb(),r.Zb(),r.ac(9,"div",27),r.ac(10,"mat-form-field",28),r.Vb(11,"input",29),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"div",4),r.ac(13,"div",25),r.ac(14,"div",4),r.ac(15,"div",26),r.ac(16,"mat-label"),r.Yc(17,"Objet"),r.Zb(),r.Zb(),r.ac(18,"div",27),r.ac(19,"mat-form-field",28),r.Vb(20,"input",30),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(21,"div",4),r.ac(22,"div",25),r.ac(23,"div",4),r.ac(24,"div",26),r.ac(25,"mat-label"),r.Yc(26,"Description"),r.Zb(),r.Zb(),r.ac(27,"div",31),r.ac(28,"mat-form-field",28),r.ac(29,"textarea",32),r.Yc(30),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",4),r.ac(32,"div",25),r.ac(33,"div",4),r.ac(34,"div",33),r.ac(35,"button",34),r.mc("click",(function(){return r.Oc(t),r.qc(2).currentContainer=2})),r.Yc(36,"Voir l'\xe9tat d'avancement"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(37,"div",35),r.Wc(38,h,2,1,"div",36),r.ac(39,"div",37),r.ac(40,"div",38),r.ac(41,"div",39),r.Vb(42,"div",40),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()}if(2&t){const t=r.qc(2);r.Eb(11),r.yc("value",t.ticket.type),r.Eb(9),r.yc("value",t.ticket.objet),r.Eb(10),r.Zc(t.ticket.description),r.Eb(8),r.xc("ngIf",t.ticket.piecesJointes.length>0)}}const C=function(t,e){return{"active-step editable-step":t,"step-done":e}};function Z(t,e){if(1&t&&(r.ac(0,"div",44),r.ac(1,"div",4),r.ac(2,"div",45),r.ac(3,"div",46),r.ac(4,"div",47),r.ac(5,"div",48),r.ac(6,"div",49),r.ac(7,"div",50),r.Yc(8,"Ouvert"),r.Zb(),r.Vb(9,"div",51),r.ac(10,"div",52),r.ac(11,"span"),r.Yc(12,"01"),r.Zb(),r.Zb(),r.Vb(13,"div",53),r.Zb(),r.ac(14,"div",49),r.ac(15,"div",50),r.Yc(16,"Pris en charge"),r.Zb(),r.Vb(17,"div",51),r.ac(18,"div",52),r.ac(19,"span"),r.Yc(20,"02"),r.Zb(),r.Zb(),r.Vb(21,"div",53),r.Zb(),r.ac(22,"div",49),r.ac(23,"div",50),r.Yc(24,"En traitement"),r.Zb(),r.Vb(25,"div",51),r.ac(26,"div",52),r.ac(27,"span"),r.Yc(28,"03"),r.Zb(),r.Zb(),r.Vb(29,"div",53),r.Zb(),r.ac(30,"div",49),r.ac(31,"div",50),r.Yc(32,"Trait\xe9"),r.Zb(),r.Vb(33,"div",51),r.ac(34,"div",52),r.ac(35,"span"),r.Yc(36,"04"),r.Zb(),r.Zb(),r.Vb(37,"div",53),r.Zb(),r.ac(38,"div",49),r.ac(39,"div",50),r.Yc(40,"Cl\xf4tur\xe9"),r.Zb(),r.Vb(41,"div",51),r.ac(42,"div",52),r.ac(43,"span"),r.Yc(44,"05"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&t){const t=r.qc(2);r.Eb(6),r.xc("ngClass",r.Cc(5,C,0==t.ticket.status,t.ticket.status>0)),r.Eb(8),r.xc("ngClass",r.Cc(8,C,1==t.ticket.status,t.ticket.status>1)),r.Eb(8),r.xc("ngClass",r.Cc(11,C,2==t.ticket.status,t.ticket.status>2)),r.Eb(8),r.xc("ngClass",r.Cc(14,C,3==t.ticket.status&&!t.ticket.closed,t.ticket.closed)),r.Eb(8),r.xc("ngClass",r.Cc(17,C,4==t.ticket.status,t.ticket.closed))}}function O(t,e){1&t&&(r.ac(0,"p"),r.Yc(1,"Quelle est votre niveau "),r.Vb(2,"br"),r.Yc(3," de satisfaction sur une \xe9chelle de 1 \xe0 5 ?"),r.Zb())}function x(t,e){1&t&&(r.ac(0,"p"),r.Yc(1,"Votre niveau de satisfaction sur une \xe9chelle de 1 \xe0 5 "),r.Zb())}function k(t,e){if(1&t){const t=r.bc();r.ac(0,"li"),r.ac(1,"mat-radio-group",59),r.mc("ngModelChange",(function(e){return r.Oc(t),r.qc(3).niveauSatisfaction=e})),r.ac(2,"mat-radio-button",60),r.Yc(3),r.Zb(),r.Zb(),r.Zb()}if(2&t){const t=e.$implicit,n=r.qc(3);r.Eb(1),r.xc("ngModel",n.niveauSatisfaction),r.Eb(1),r.xc("value",t)("disabled",n.ticket.closed),r.Eb(1),r.ad(" ",t," ")}}function M(t,e){if(1&t&&(r.ac(0,"div",54),r.ac(1,"div",55),r.Wc(2,O,4,0,"p",16),r.Wc(3,x,2,0,"p",16),r.Zb(),r.ac(4,"div",56),r.ac(5,"ul",57),r.Wc(6,k,4,4,"li",58),r.Zb(),r.Zb(),r.Zb()),2&t){const t=r.qc(2);r.Eb(2),r.xc("ngIf",!t.ticket.closed),r.Eb(1),r.xc("ngIf",t.ticket.closed),r.Eb(3),r.xc("ngForOf",t.niveauSatisfactions)}}function P(t,e){if(1&t&&(r.ac(0,"div",26),r.ac(1,"span",67),r.Yc(2),r.Zb(),r.Zb()),2&t){const t=r.qc(3);r.Eb(2),r.ad(" ",t.ticket.assigne.nom," ")}}function _(t,e){1&t&&(r.ac(0,"li"),r.ac(1,"span",67),r.Yc(2,"\xa0"),r.Zb(),r.Yc(3," Support team "),r.Zb())}function y(t,e){if(1&t&&(r.ac(0,"div",61),r.ac(1,"div",26),r.ac(2,"span",62),r.Yc(3),r.Zb(),r.Zb(),r.ac(4,"div",26),r.ac(5,"span",63),r.Yc(6),r.Zb(),r.Zb(),r.Wc(7,P,3,1,"div",64),r.ac(8,"div",65),r.ac(9,"ul",66),r.ac(10,"li"),r.ac(11,"span",62),r.Yc(12,"\xa0"),r.Zb(),r.Yc(13," Entit\xe9 "),r.Zb(),r.ac(14,"li"),r.ac(15,"span",63),r.Yc(16,"\xa0"),r.Zb(),r.Yc(17," Initiateur "),r.Zb(),r.Wc(18,_,4,0,"li",16),r.Zb(),r.Zb(),r.Zb()),2&t){const t=r.qc(2);r.Eb(3),r.ad(" ",t.ticket.entreprise.denomination," "),r.Eb(3),r.ad(" ",null==t.ticket.auteur?null:t.ticket.auteur.username," "),r.Eb(1),r.xc("ngIf",t.ticket.auteur.nom&&t.isSuperAdmin),r.Eb(11),r.xc("ngIf",t.isSuperAdmin)}}function I(t,e){1&t&&(r.ac(0,"span",75),r.Yc(1,"Voulez-vous cl\xf4turer le ticket ? "),r.Zb())}function w(t,e){if(1&t){const t=r.bc();r.ac(0,"button",76),r.mc("click",(function(){return r.Oc(t),r.qc(3).wantClose=!0})),r.Yc(1,"Oui"),r.Zb()}}function E(t,e){1&t&&(r.ac(0,"button",77),r.Yc(1,"Non"),r.Zb())}function S(t,e){if(1&t){const t=r.bc();r.ac(0,"button",78),r.mc("click",(function(){return r.Oc(t),r.qc(3).closeTicket()})),r.Yc(1,"Confirmer"),r.Zb()}}function Y(t,e){if(1&t){const t=r.bc();r.ac(0,"button",79),r.mc("click",(function(){return r.Oc(t),r.qc(3).wantClose=!1})),r.Yc(1,"Annuler"),r.Zb()}}function W(t,e){if(1&t&&(r.ac(0,"div",68),r.ac(1,"div",69),r.Wc(2,I,2,0,"span",70),r.Wc(3,w,2,0,"button",71),r.Wc(4,E,2,0,"button",72),r.Wc(5,S,2,0,"button",73),r.Wc(6,Y,2,0,"button",74),r.Zb(),r.Zb()),2&t){const t=r.qc(2);r.Eb(2),r.xc("ngIf",!t.wantClose),r.Eb(1),r.xc("ngIf",!t.wantClose),r.Eb(1),r.xc("ngIf",!t.wantClose),r.Eb(1),r.xc("ngIf",t.wantClose),r.Eb(1),r.xc("ngIf",t.wantClose)}}function z(t,e){1&t&&(r.ac(0,"span",75),r.Yc(1,"Voulez-vous passer \xe0 l'\xe9tape suivante ? "),r.Zb())}function T(t,e){if(1&t){const t=r.bc();r.ac(0,"button",76),r.mc("click",(function(){return r.Oc(t),r.qc(3).goToNextStep=!0})),r.Yc(1,"Oui"),r.Zb()}}function q(t,e){1&t&&(r.ac(0,"button",77),r.Yc(1,"Non"),r.Zb())}function L(t,e){if(1&t){const t=r.bc();r.ac(0,"button",78),r.mc("click",(function(){return r.Oc(t),r.qc(3).nextStep()})),r.Yc(1,"Confirmer"),r.Zb()}}function V(t,e){if(1&t){const t=r.bc();r.ac(0,"button",79),r.mc("click",(function(){return r.Oc(t),r.qc(3).goToNextStep=!1})),r.Yc(1,"Annuler"),r.Zb()}}function D(t,e){if(1&t&&(r.ac(0,"div",68),r.ac(1,"div",69),r.Wc(2,z,2,0,"span",70),r.Wc(3,T,2,0,"button",71),r.Wc(4,q,2,0,"button",72),r.Wc(5,L,2,0,"button",73),r.Wc(6,V,2,0,"button",74),r.Zb(),r.Zb()),2&t){const t=r.qc(2);r.Eb(2),r.xc("ngIf",!t.goToNextStep),r.Eb(1),r.xc("ngIf",!t.goToNextStep),r.Eb(1),r.xc("ngIf",!t.goToNextStep),r.Eb(1),r.xc("ngIf",t.goToNextStep),r.Eb(1),r.xc("ngIf",t.goToNextStep)}}function U(t,e){if(1&t&&(r.ac(0,"div",2),r.ac(1,"div",3),r.ac(2,"div",4),r.ac(3,"div",5),r.ac(4,"ul",6),r.ac(5,"li",7),r.ac(6,"h4",8),r.Yc(7),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"div",9),r.ac(9,"div",10),r.ac(10,"div",11),r.ac(11,"div",12),r.ac(12,"div",13),r.Yc(13," \xa0 "),r.Zb(),r.Zb(),r.ac(14,"div",14),r.ac(15,"h4",15),r.Wc(16,m,2,0,"span",16),r.Wc(17,g,2,0,"span",16),r.Zb(),r.Wc(18,v,43,4,"div",17),r.Wc(19,Z,45,20,"div",18),r.Zb(),r.ac(20,"div",19),r.Wc(21,M,7,3,"div",20),r.Wc(22,y,19,4,"div",21),r.Wc(23,W,7,5,"div",22),r.Wc(24,D,7,5,"div",22),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&t){const t=r.qc();r.Eb(7),r.ad("Suivis ticket No ",t.ticket.numero,""),r.Eb(9),r.xc("ngIf",1==t.currentContainer),r.Eb(1),r.xc("ngIf",2==t.currentContainer),r.Eb(1),r.xc("ngIf",1==t.currentContainer),r.Eb(1),r.xc("ngIf",2==t.currentContainer),r.Eb(2),r.xc("ngIf",2==t.currentContainer&&(t.wantClose||t.ticket.closed)),r.Eb(1),r.xc("ngIf",1==t.currentContainer),r.Eb(1),r.xc("ngIf",2==t.currentContainer&&!t.ticket.closed&&(t.isAuteur||t.isSuperAdmin)),r.Eb(1),r.xc("ngIf",2==t.currentContainer&&t.isSuperAdmin&&!t.ticket.closed&&3!=t.ticket.status)}}let F=(()=>{class t{constructor(t,e,n){this.route=t,this.supportService=e,this.securityService=n,this.loading=!1,this.currentContainer=1,this.niveauSatisfactions=[1,2,3,4,5],this.wantClose=!1,this.goToNextStep=!1}ngOnInit(){this.ticket=null,this.securityService.showLoadingIndicatior.next(!0),this.isSuperAdmin=this.securityService.SupAdmin,this.isAuteur=!1,this.wantClose=!1,this.supportService.get(this.route.snapshot.params.id).subscribe(t=>{t&&t.id&&(this.ticket=t,this.niveauSatisfaction=+this.ticket.satisfaction,this.isAuteur=this.ticket.auteur.username===localStorage.getItem("username")),this.securityService.showLoadingIndicatior.next(!1),setTimeout(()=>{this.createProgressBar()},1e3),console.log(t)})}getTicketStatus(t){return this.supportService.getTicketStatus(t)}closeTicket(){this.ticket.status=3,this.ticket.closed=!0,this.ticket.satisfaction=this.niveauSatisfaction,this.supportService.update(this.ticket.id,this.ticket).subscribe(t=>{console.log(t),this.ticket=t,this.wantClose=!1})}nextStep(){let t=+this.ticket.status;t<3&&(this.ticket.status=t+1,console.log(t,this.ticket)),this.supportService.update(this.ticket.id,this.ticket).subscribe(t=>{console.log(t),this.ticket=t,this.goToNextStep=!1})}createProgressBar(){let t=0;const e=document.querySelector("#container-progegress-bar");if(!e)return void console.log("Progress bar could not be found");console.log(e),t=e.clientHeight>e.clientWidth?e.clientWidth:e.clientHeight;let n=t-10,o=t,i=(e.clientWidth-e.clientHeight)/2;document.getElementById("circle").style.width=n+"px",document.getElementById("circle").style.height=n+"px",e.style.paddingLeft=i+"px",document.getElementById("border").style.width=o+"px",document.getElementById("border").style.height=o+"px";let c=180*Number(2)/Number(5);document.getElementById("border").style.background="-webkit-linear-gradient("+c+"deg, #9a9a9a 50%, #00a651 50%)";var a=180-c;document.getElementById("needle").style.webkitTransform="rotate("+a+"deg)",e.style.visibility="visible"}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(i.a),r.Ub(l),r.Ub(c.a))},t.\u0275cmp=r.Ob({type:t,selectors:[["app-infos-support"]],decls:2,vars:1,consts:[[1,"content"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"card-header"],[1,"bg-header"],[1,"card-body"],[1,"card-title","text-center","mb-5"],[4,"ngIf"],["class","container-infos",4,"ngIf"],["class","container-progressions",4,"ngIf"],[1,"card-footer"],["class","row band-orange mb-5",4,"ngIf"],["class","row band-gray",4,"ngIf"],["class","row band-gray mt-5",4,"ngIf"],[1,"container-infos"],[1,"col-md-9"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"col-md-3","my-auto"],[1,"col-md-5","mb-0"],["appearance","outline"],["matInput","","id","type","readonly","",3,"value"],["matInput","","id","objet","readonly","",3,"value"],[1,"col-md-9","mb-0"],["matInput","","id","description","readonly","","rows","8"],[1,"col-md-9","ml-auto"],[1,"btn","btn-orange",3,"click"],[1,"col-md-3"],["class","row",4,"ngIf"],["id","container-progegress-bar",2,"visibility","hidden"],["id","border",1,"active-border"],["id","circle",1,"circle"],["id","needle",1,"needle"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],["alt","",1,"img-thumbnail",3,"src"],[1,"container-progressions"],[1,"col-md-12"],[1,"mdl-card","mdl-shadow--2dp"],[1,"mdl-card__supporting-text"],[1,"mdl-stepper-horizontal-alternative"],[1,"mdl-stepper-step",3,"ngClass"],[1,"mdl-stepper-title"],[1,"mdl-stepper-arrow-left"],[1,"mdl-stepper-arrow"],[1,"mdl-stepper-arrow-right"],[1,"row","band-orange","mb-5"],[1,"col-md-4","my-auto"],[1,"col-md-8"],[1,"satisfaction-notation","d-flex","justify-content-between","legend"],[4,"ngFor","ngForOf"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"ngModel","ngModelChange"],[1,"example-radio-button",3,"value","disabled"],[1,"row","band-gray"],[1,"card-info","bg-red"],[1,"card-info","bg-orange"],["class","col-md-3 my-auto",4,"ngIf"],[1,"col-md-3","ml-auto","my-auto"],[1,"legend-card"],[1,"card-info","bg-gray"],[1,"row","band-gray","mt-5"],[1,"col-md-12","text-right","div-close"],["class","mr-5",4,"ngIf"],["type","button","class","btn btn-lg btn-orange-gradient mr-3",3,"click",4,"ngIf"],["type","button","class","btn btn-lg btn-secondary",4,"ngIf"],["type","button","class","btn btn-lg btn-success mr-3",3,"click",4,"ngIf"],["type","button","class","btn btn-lg btn-secondary",3,"click",4,"ngIf"],[1,"mr-5"],["type","button",1,"btn","btn-lg","btn-orange-gradient","mr-3",3,"click"],["type","button",1,"btn","btn-lg","btn-secondary"],["type","button",1,"btn","btn-lg","btn-success","mr-3",3,"click"],["type","button",1,"btn","btn-lg","btn-secondary",3,"click"]],template:function(t,e){1&t&&(r.ac(0,"section",0),r.Wc(1,U,25,9,"div",1),r.Zb()),2&t&&(r.Eb(1),r.xc("ngIf",e.ticket))},directives:[o.n,d.g,d.c,b.b,o.m,o.l,p.b,u.o,u.r,p.a],styles:['.container-infos[_ngcontent-%COMP%]{margin-left:8%;margin-right:8%}.mdl-card[_ngcontent-%COMP%]{width:100%;min-height:0;margin:10px auto}.mdl-card__supporting-text[_ngcontent-%COMP%]{width:100%;padding:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]{width:100%}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;justify-content:space-between}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]{display:table-cell;padding:24px 10px;position:relative}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:active{border-radius:15%/75%}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:first-child:active{border-top-left-radius:0;border-bottom-left-radius:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:last-child:active{border-top-right-radius:0;border-bottom-right-radius:0}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:hover   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#757575}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]:hover   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#757575}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{width:75%;height:50px;margin:0 auto;background-color:#9e9e9e;text-align:center;line-height:2em;font-size:24px;color:#fff}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-left[_ngcontent-%COMP%]{width:0;height:0;position:absolute;top:61px;left:15%;border-top:25px solid transparent;border-left:50px solid #fff;border-bottom:25px solid transparent;z-index:1}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{width:0;height:0;position:absolute;top:61px;right:-1.5%;border-top:25px solid transparent;border-left:50px solid #9e9e9e;border-bottom:25px solid transparent;z-index:1}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#2196f3}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#2196f3}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow[_ngcontent-%COMP%]{background-color:#28a745}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow-right[_ngcontent-%COMP%]{border-left-color:#28a745}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-circle[_ngcontent-%COMP%]:before{content:"\\2714"}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-arrow*[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-arrow*[_ngcontent-%COMP%]{display:none}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-circle[_ngcontent-%COMP%]:before{content:"\\270E"}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;font-weight:400}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{text-align:center;color:rgba(0,0,0,.26)}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{font-weight:500;color:rgba(0,0,0,.87)}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step.editable-step[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%], .mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step.step-done[_ngcontent-%COMP%]   .mdl-stepper-title[_ngcontent-%COMP%]{font-weight:300}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%]{font-size:12px}.mdl-stepper-horizontal-alternative[_ngcontent-%COMP%]   .mdl-stepper-step.active-step[_ngcontent-%COMP%]   .mdl-stepper-optional[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}  .legend{max-width:285px;position:relative}  .legend:before{content:"Insatisfait";left:-88px}  .legend:after{content:"Satisfait";right:-88px}  .legend:after,   .legend:before{position:absolute;bottom:10px;font-size:16px;top:18px}  .legend li{position:relative}  .legend li .mat-radio-label-content{position:absolute;top:-2px;left:2px;color:#fff;font-size:1.3rem}  .legend li .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle,   .legend li .mat-radio-outer-circle{border-color:#fff}  .legend li .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#fff}.mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:1em 0;padding-bottom:0;border:0;outline:0}  .mat-form-field-appearance-outline .mat-form-field-outline{background:#ededed;border-radius:30px}  .mat-form-field-appearance-outline .mat-form-field-outline-end,   .mat-form-field-appearance-outline .mat-form-field-outline-start{border:0}  input:-webkit-autofill{box-shadow:inset 0 0 0 50px #ededed}  .mat-error{margin-top:15px;font-size:14px}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:0;padding:.75rem;border-radius:15px}.card-header[_ngcontent-%COMP%]   .bg-header[_ngcontent-%COMP%]{width:100%;height:60px;margin:auto;background:radial-gradient(#ef7711,#774007)}.card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:0;border-radius:15px}.container-infos[_ngcontent-%COMP%]{width:95%;margin-left:auto;margin-right:auto}.btn-submit[_ngcontent-%COMP%]{font-size:1.2rem!important;padding:.5rem 2rem .5rem 5rem;border-radius:10px}.btn-submit[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]:hover{color:#fff;background:radial-gradient(#ef7711,#774007);border-color:#774007}.btn-upload[_ngcontent-%COMP%]{font-size:1.2rem;color:#616160;margin-right:7rem!important}.band-gray[_ngcontent-%COMP%]{background:radial-gradient(#d8d8d8,#cbcbcb)}.band-gray[_ngcontent-%COMP%], .band-orange[_ngcontent-%COMP%]{padding-top:1.4rem;padding-bottom:1.4rem;margin-bottom:1rem!important}.band-orange[_ngcontent-%COMP%]{background:radial-gradient(#ef7711,#774007);color:#fff}.band-orange[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem}.card-info[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px;color:#fff}.card-info.bg-red[_ngcontent-%COMP%]{background:red}.card-info.bg-gray[_ngcontent-%COMP%]{background:grey}.card-info.bg-orange[_ngcontent-%COMP%]{background:#ef7711}.legend-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.legend-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{padding:0;width:60px;border-radius:2px;display:inline-block}.div-close[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 30px;font-size:1.3rem}.div-close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem}.satisfaction-notation[_ngcontent-%COMP%]{margin-left:5rem!important}']}),t})();var A=n("jiEm"),j=n("NFeN"),N=n("+0xr");function B(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," No ticket "),r.Zb())}const X=function(t){return["/supports/infos",t]};function H(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.numero," ")}}function R(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Date de cr\xe9ation "),r.Zb())}function $(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.rc(2,"date"),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(5,X,t.id)),r.Eb(1),r.ad(" ",r.tc(2,2,t.startDate,"dd/M/yy, HH:mm")," ")}}function K(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Type de ticket "),r.Zb())}function J(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.type," ")}}function G(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Sujet trait\xe9 "),r.Zb())}function Q(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.objet," ")}}function tt(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Entit\xe9s "),r.Zb())}function et(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.entreprise.denomination," ")}}function nt(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Initiateur "),r.Zb())}function ot(t,e){if(1&t&&(r.ac(0,"td",41),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.auteur?t.auteur.username:""," ")}}function it(t,e){1&t&&(r.ac(0,"th",42),r.Yc(1," Support Team "),r.Zb())}function ct(t,e){if(1&t&&(r.ac(0,"td",43),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.xc("routerLink",r.Bc(2,X,t.id)),r.Eb(1),r.ad(" ",t.assigne?t.assigne.nom:"-"," ")}}function at(t,e){1&t&&(r.ac(0,"th",40),r.Yc(1," Statut "),r.Zb())}function rt(t,e){if(1&t&&r.Vb(0,"td",44),2&t){const t=e.$implicit,n=r.qc();r.xc("routerLink",r.Bc(2,X,t.id))("innerHTML",n.getTicketStatus(t),r.Pc)}}function st(t,e){1&t&&r.Vb(0,"tr",45)}function lt(t,e){1&t&&r.Vb(0,"tr",46)}const dt=function(){return["/supports/new"]};let bt=(()=>{class t{constructor(t,e,n){this.supportService=t,this.adminService=e,this.securityService=n,this.displayedColumns=["numero","startDate","type","objet","entreprise","auteur","status"],this.inventaires=[]}ngOnInit(){this.tickets=[],this.isSuperAdmin=this.securityService.SupAdmin,this.isSuperAdmin&&this.displayedColumns.push("assigne"),this.idUser=localStorage.getItem("idUser"),this.getTickets()}getTickets(){this.isSuperAdmin?this.supportService.lists().subscribe(t=>{this.tickets=null==t?void 0:t.reverse()}):this.adminService.getClients().then(t=>{this.supportService.lists(t[0].cle).subscribe(t=>{this.tickets=null==t?void 0:t.reverse()})})}filterDatatable(t){console.log(t)}getTicketStatus(t){return this.supportService.getTicketStatus(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(l),r.Ub(A.a),r.Ub(c.a))},t.\u0275cmp=r.Ob({type:t,selectors:[["app-list-supports"]],decls:57,vars:7,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"col-sm-12"],[1,"ngxTableHeader","pl-0","pb-0"],[1,"header-buttons-left","ml-0"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Rechercher un ticket","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"header-buttons","m-r-20"],[1,"icon-button-demo"],[1,"font-weight-bold","text-white","pointer","mr-3",3,"routerLink"],["title","AJouter un ticket",1,"btn","btn-orange","btn-40-rounded","pt-0","pb-0","mr-4",3,"routerLink"],[1,"col-white"],["mat-table","",1,"mat-elevation-z8","table-striped",3,"dataSource"],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","type"],["matColumnDef","objet"],["matColumnDef","entreprise"],["matColumnDef","auteur"],["matColumnDef","assigne"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",3,"routerLink",4,"matCellDef"],["matColumnDef","status"],["mat-cell","",3,"routerLink","innerHTML",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","ele-ticket","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"routerLink"],["mat-header-cell","",1,"text-center"],["mat-cell","",2,"text-align","center",3,"routerLink"],["mat-cell","",3,"routerLink","innerHTML"],["mat-header-row",""],["mat-row","",1,"ele-ticket"]],template:function(t,e){1&t&&(r.ac(0,"section",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"ul",5),r.ac(6,"li",6),r.ac(7,"h4",7),r.Yc(8,"Liste des tickets"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(9,"div",8),r.ac(10,"div",9),r.ac(11,"div",10),r.ac(12,"div",11),r.ac(13,"div",3),r.ac(14,"div",12),r.ac(15,"div",13),r.ac(16,"ul",14),r.ac(17,"li",15),r.ac(18,"label",16),r.ac(19,"i",17),r.Yc(20,"search"),r.Zb(),r.Zb(),r.ac(21,"input",18),r.mc("keyup",(function(t){return e.filterDatatable(t.target.value)})),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"ul",19),r.ac(23,"li"),r.ac(24,"div",20),r.ac(25,"span",21),r.Yc(26,"Ajouter un ticket"),r.Zb(),r.ac(27,"button",22),r.ac(28,"mat-icon",23),r.Yc(29,"add"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(30,"table",24),r.Yb(31,25),r.Wc(32,B,2,0,"th",26),r.Wc(33,H,2,4,"td",27),r.Xb(),r.Yb(34,28),r.Wc(35,R,2,0,"th",26),r.Wc(36,$,3,7,"td",27),r.Xb(),r.Yb(37,29),r.Wc(38,K,2,0,"th",26),r.Wc(39,J,2,4,"td",27),r.Xb(),r.Yb(40,30),r.Wc(41,G,2,0,"th",26),r.Wc(42,Q,2,4,"td",27),r.Xb(),r.Yb(43,31),r.Wc(44,tt,2,0,"th",26),r.Wc(45,et,2,4,"td",27),r.Xb(),r.Yb(46,32),r.Wc(47,nt,2,0,"th",26),r.Wc(48,ot,2,4,"td",27),r.Xb(),r.Yb(49,33),r.Wc(50,it,2,0,"th",34),r.Wc(51,ct,2,4,"td",35),r.Xb(),r.Yb(52,36),r.Wc(53,at,2,0,"th",26),r.Wc(54,rt,1,4,"td",37),r.Xb(),r.Wc(55,st,1,0,"tr",38),r.Wc(56,lt,1,0,"tr",39),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&t&&(r.Eb(25),r.xc("routerLink",r.Ac(5,dt)),r.Eb(2),r.xc("routerLink",r.Ac(6,dt)),r.Eb(3),r.xc("dataSource",e.tickets),r.Eb(25),r.xc("matHeaderRowDef",e.displayedColumns),r.Eb(1),r.xc("matRowDefColumns",e.displayedColumns))},directives:[i.e,j.a,N.j,N.c,N.e,N.b,N.g,N.i,N.d,N.a,N.f,N.h],pipes:[o.e],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]{z-index:1;-webkit-transition:all .4s ease-in-out;-moz-transition:all .4s ease-in-out;-o-transition:all .4s ease-in-out;-ms-transition:all .4s ease-in-out}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]:hover{background:#ef7711;cursor:pointer;z-index:10;box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.02);transform:scale(1.01)}table[_ngcontent-%COMP%]   .ele-ticket[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{color:#fff}  .badge-warning{background:#ef7711!important;color:#fff!important}"]}),t})();var pt=n("d3UM"),ut=n("FKr1");const mt=["fileUpload"];function gt(t,e){if(1&t&&(r.ac(0,"mat-option",39),r.Yc(1),r.Zb()),2&t){const t=e.$implicit;r.yc("value",t),r.Eb(1),r.Zc(t)}}function ft(t,e){1&t&&(r.ac(0,"mat-error"),r.Yc(1,"Le type de ticket est requise"),r.Zb())}function ht(t,e){1&t&&(r.ac(0,"mat-error"),r.Yc(1,"L'objet du ticket est requise"),r.Zb())}function vt(t,e){1&t&&(r.ac(0,"mat-error"),r.Yc(1,"Une description du ticket est requise"),r.Zb())}function Ct(t,e){if(1&t&&(r.ac(0,"div",41),r.Vb(1,"img",42),r.Zb()),2&t){const t=e.$implicit;r.Eb(1),r.xc("src",t,r.Rc)}}function Zt(t,e){if(1&t&&(r.ac(0,"div",3),r.Wc(1,Ct,2,1,"div",40),r.Zb()),2&t){const t=r.qc();r.Eb(1),r.xc("ngForOf",t.files)}}const Ot=[{path:"",redirectTo:"/supports/lists",pathMatch:"full"},{path:"lists",component:bt},{path:"new",component:(()=>{class t{constructor(t,e,n,o){this.formBuilder=t,this.supportService=e,this.adminService=n,this.router=o,this.submitted=!1,this.files=[]}ngOnInit(){this.ticketTypes=["Phase pr\xe9paratoire","Phase m\xe9thodologique et de planification","Phase de r\xe9alisation des travaux de comptage et de traitement des donn\xe9es","Phase d\u2019ajustement du fichier des immobilisations","Autres"],this.buildForm()}get f(){return this.ticketForm.controls}saveTicket(){if(this.submitted=!0,this.isLoading=!0,this.ticketForm.invalid)return;let t=this.ticketForm.value;this.adminService.getOneEntreprise(localStorage.getItem("currentEse")).then(e=>{e&&e.id&&this.adminService.getClients().then(n=>{t.licence=n[0].cle,t.client={id:n[0].id,denomination:n[0].denomination,nomContact:n[0].nomContact,telContact:n[0].telContact},t.piecesJointes=this.files,t.auteur={id:localStorage.getItem("idUser"),username:localStorage.getItem("username"),roles:localStorage.getItem("roles")},t.entreprise={id:e.id,denomination:e.denomination},console.log(t),this.supportService.create(t).subscribe(t=>{t&&t.id&&this.router.navigate(["/supports/lists"])})})})}buildForm(){this.ticketForm=this.formBuilder.group({type:["",u.x.required],objet:["",u.x.required],description:["",u.x.required]})}onClick(){this.fileUpload.nativeElement.click()}changeListener(){const t=this.fileUpload.nativeElement.files;this.files=[];for(let e=0;e<t.length;e++){let n=new FileReader;n.onloadend=t=>{this.files.push(n.result)},n.readAsDataURL(t[e])}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(u.e),r.Ub(l),r.Ub(A.a),r.Ub(i.d))},t.\u0275cmp=r.Ob({type:t,selectors:[["app-new-support"]],viewQuery:function(t,e){var n;1&t&&r.dd(mt,!0),2&t&&r.Jc(n=r.nc())&&(e.fileUpload=n.first)},decls:69,vars:7,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item","mr-4"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],["id","ticketForm",3,"formGroup","ngSubmit"],[1,"card-header"],[1,"bg-header"],[1,"card-body"],[1,"card-title","text-center","mb-5"],[1,"container-form"],[1,"col-md-9"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"col-md-3","my-auto"],[1,"col-md-5","mb-0"],["appearance","outline"],["id","type","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","id","objet","formControlName","objet"],[1,"text-muted"],[1,"col-md-9","mb-0"],["matInput","","id","description","formControlName","description","rows","8"],[1,"col-md-3"],["class","row",4,"ngIf"],[1,"card-footer"],[1,"row","band-gray"],[1,"col-md-7","mx-auto"],["type","submit","click","",1,"btn","btn-submit","btn-border-radius","mr-3",3,"disabled"],["aria-hidden","true",1,"fas","fa-chevron-right","ml-5"],[1,"pointer","btn-upload","float-right",3,"click"],["type","file","id","fileUpload","multiple","multiple",2,"display","none",3,"change"],["fileUpload",""],[3,"value"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],["alt","",1,"img-thumbnail",3,"src"]],template:function(t,e){1&t&&(r.ac(0,"section",0),r.ac(1,"div",1),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"ul",5),r.ac(6,"li",6),r.ac(7,"h4",7),r.Yc(8,"Ouvrir un ticket"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(9,"div",8),r.ac(10,"div",9),r.ac(11,"div",10),r.ac(12,"form",11),r.mc("ngSubmit",(function(){return e.saveTicket()})),r.ac(13,"div",12),r.ac(14,"div",13),r.Yc(15," \xa0 "),r.Zb(),r.Zb(),r.ac(16,"div",14),r.ac(17,"h4",15),r.Yc(18,"Ouvrir un ticket"),r.Zb(),r.ac(19,"div",16),r.ac(20,"div",3),r.ac(21,"div",17),r.ac(22,"div",3),r.ac(23,"div",18),r.ac(24,"div",3),r.ac(25,"div",19),r.ac(26,"mat-label"),r.Yc(27,"Type de tickets *"),r.Zb(),r.Zb(),r.ac(28,"div",20),r.ac(29,"mat-form-field",21),r.ac(30,"mat-select",22),r.Wc(31,gt,2,2,"mat-option",23),r.Zb(),r.Wc(32,ft,2,0,"mat-error",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(33,"div",3),r.ac(34,"div",18),r.ac(35,"div",3),r.ac(36,"div",19),r.ac(37,"mat-label"),r.Yc(38,"Objet *"),r.Zb(),r.Zb(),r.ac(39,"div",20),r.ac(40,"mat-form-field",21),r.Vb(41,"input",25),r.Wc(42,ht,2,0,"mat-error",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(43,"div",3),r.ac(44,"div",18),r.ac(45,"div",3),r.ac(46,"div",19),r.ac(47,"mat-label"),r.Yc(48,"Description *"),r.Zb(),r.ac(49,"p",26),r.Yc(50," Faire une description sommaire du probl\xe8me rencontr\xe9. "),r.Zb(),r.Zb(),r.ac(51,"div",27),r.ac(52,"mat-form-field",21),r.Vb(53,"textarea",28),r.Wc(54,vt,2,0,"mat-error",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(55,"div",29),r.Wc(56,Zt,2,1,"div",30),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(57,"div",31),r.ac(58,"div",32),r.ac(59,"div",33),r.ac(60,"button",34),r.Yc(61,"Envoyer "),r.Vb(62,"i",35),r.Zb(),r.ac(63,"span",36),r.mc("click",(function(){return e.onClick()})),r.ac(64,"mat-icon"),r.Yc(65,"file_upload"),r.Zb(),r.Yc(66," Attacher une capture "),r.Zb(),r.ac(67,"input",37,38),r.mc("change",(function(){return e.changeListener()})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&t&&(r.Eb(12),r.xc("formGroup",e.ticketForm),r.Eb(19),r.xc("ngForOf",e.ticketTypes),r.Eb(1),r.xc("ngIf",e.f.type.errors),r.Eb(10),r.xc("ngIf",e.f.objet.errors),r.Eb(12),r.xc("ngIf",e.f.description.errors),r.Eb(2),r.xc("ngIf",e.files.length>0),r.Eb(4),r.xc("disabled",e.ticketForm.invalid))},directives:[u.z,u.p,u.j,d.g,d.c,pt.a,u.o,u.h,o.m,o.n,b.b,u.b,j.a,ut.o,d.b],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:1em 0;padding-bottom:0;border:0;outline:0}  .mat-form-field-appearance-outline .mat-form-field-outline{background:#ededed;border-radius:30px}  .mat-form-field-appearance-outline .mat-form-field-outline-end,   .mat-form-field-appearance-outline .mat-form-field-outline-start{border:0}  input:-webkit-autofill{box-shadow:inset 0 0 0 50px #ededed}  .mat-error{margin-top:15px;font-size:14px}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:0;padding:.75rem;border-radius:15px}.card-header[_ngcontent-%COMP%]   .bg-header[_ngcontent-%COMP%]{width:100%;height:70px;margin:auto;background:radial-gradient(#ef7711,#774007)}.card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:0;border-radius:15px}.container-form[_ngcontent-%COMP%]{width:95%;margin-left:auto;margin-right:auto}.btn-submit[_ngcontent-%COMP%]{font-size:1.2rem!important;padding:.5rem 2rem .5rem 5rem;border-radius:10px}.btn-submit[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]:hover{color:#fff;background:radial-gradient(#ef7711,#774007);border-color:#774007}.btn-upload[_ngcontent-%COMP%]{font-size:1.2rem;color:#616160;margin-right:7rem!important}.band-gray[_ngcontent-%COMP%]{background:radial-gradient(#d8d8d8,#cbcbcb);padding-top:1.4rem;padding-bottom:1.4rem;margin-bottom:1rem!important}"]}),t})()},{path:"infos/:id",component:F}];let xt=(()=>{class t{}return t.\u0275mod=r.Sb({type:t}),t.\u0275inj=r.Rb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(Ot)],i.h]}),t})();var kt=n("bTqV"),Mt=n("TU8p"),Pt=n("A5z7"),_t=n("/1cH"),yt=n("2ChS"),It=n("MutI"),wt=n("XhcP"),Et=n("dNgK"),St=n("7EHt"),Yt=n("iadO"),Wt=n("Wp6s"),zt=n("Xa2L"),Tt=n("bv9b"),qt=n("5RNC"),Lt=n("wZkO"),Vt=n("bSwM"),Dt=n("AGJ6"),Ut=n("M9IT"),Ft=n("0IaG"),At=n("Dh3D"),jt=n("/t3+"),Nt=n("7ZcW"),Bt=n("STbY"),Xt=n("lDzL"),Ht=n("Kdsb"),Rt=n("xHqg");let $t=(()=>{class t{}return t.\u0275mod=r.Sb({type:t}),t.\u0275inj=r.Rb({factory:function(e){return new(e||t)},imports:[[o.c,xt,o.c,u.k,u.u,Ht.c,kt.c,j.b,d.e,b.c,Mt.b,Pt.e,_t.b,yt.b,It.c,wt.a,Et.b,St.b,Yt.c,Wt.g,zt.a,Tt.b,qt.a,Lt.d,Dt.b,Vt.b,o.c,o.c,u.k,u.u,Xt.g,Et.b,N.l,Ut.b,p.c,pt.b,Ft.f,At.c,jt.a,Nt.b,Bt.c,Xt.g,Rt.d]]}),t})()}}]);